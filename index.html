<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> DDNetwork by DD CLOUD NETWORK</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/ddnetwork-one/ddnetwork-store/refs/heads/main/crop_ddnlogo.png">
    
    <meta name="description" content="Designed in Malaysia. Built for the world.">
    
    <!-- Font: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Icons: RemixIcon -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">

    <!-- RAZORPAY CHECKOUT SCRIPT -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <style>
        /* --- CSS VARIABLES (PREMIUM GLASS & SOFT BLACK THEME) --- */
        :root {
            /* Backgrounds: Premium Slate instead of Plain White */
            --bg-deep: #f1f5f9; /* Slate 100 */
            --bg-surface: #ffffff;
            
            /* Glass Effect: Frosted & Saturated */
            --bg-glass: rgba(255, 255, 255, 0.65); 
            --bg-glass-hover: rgba(255, 255, 255, 0.8);
            --border-glass: rgba(30, 41, 59, 0.08); /* Soft Black tint */
            --border-highlight: rgba(255, 255, 255, 0.5); /* Light catch */
            
            /* Text: Slate Grey */
            --text-main: #0f172a; /* Slate 900 */
            --text-secondary: #475569; /* Slate 600 */
            --text-tertiary: #94a3b8; /* Slate 400 */
            
            /* Accents: Soft Black */
            --soft-black: #1e293b; /* Slate 800 */
            --soft-black-hover: #0f172a; /* Slate 900 */
            --accent-glow: rgba(30, 41, 59, 0.15);
            
            /* Functional Colors */
            --accent-warn: #f59e0b;
            --accent-success: #10b981;
            --accent-danger: #ef4444; /* For Maintenance Text */
            --accent-star: #fbbf24; /* Gold for reviews */
            
            /* Shadows: Multi-layered for depth */
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.02);
            --shadow-glass: 0 8px 30px rgba(30, 41, 59, 0.06);
            --shadow-card-hover: 0 20px 40px rgba(30, 41, 59, 0.1);
            --shadow-dropdown: 0 10px 40px -5px rgba(30, 41, 59, 0.1);
            
            /* Typography */
            --font-display: 'Inter', sans-serif; 
            --ease-elastic: cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
            --header-height: 80px;
        }

        /* --- RESET & BASE --- */
        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
        html { scroll-behavior: smooth; }
        
        body {
            background-color: var(--bg-deep);
            /* Subtle Noise Texture */
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
            background-attachment: fixed;
            color: var(--text-main);
            font-family: var(--font-display);
            font-weight: 400;
            overflow-x: hidden;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        a { text-decoration: none; color: inherit; cursor: pointer; transition: color 0.3s ease; }
        ul { list-style: none; }
        button, input, select, textarea { font-family: inherit; }

        /* --- UTILITIES --- */
        .container { width: 92%; max-width: 1240px; margin: 0 auto; }
        .flex-between { display: flex; justify-content: space-between; align-items: center; }
        .text-center { text-align: center; }
        .hidden { display: none !important; }
        
        h1, h2, h3, h4 { 
            font-weight: 800; 
            text-transform: uppercase; 
            line-height: 1.1; 
            letter-spacing: -0.03em;
            color: var(--text-main);
        }

        /* --- GLASSMORPHISM --- */
        .glass-panel {
            background: var(--bg-glass);
            backdrop-filter: blur(24px) saturate(180%);
            -webkit-backdrop-filter: blur(24px) saturate(180%);
            border: 1px solid var(--border-glass);
            border-top: 1px solid var(--border-highlight);
            box-shadow: var(--shadow-glass);
        }

        /* --- PRELOADER --- */
        #preloader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-deep); z-index: 10000;
            display: flex; justify-content: center; align-items: center;
            transition: opacity 0.6s ease;
        }
        .spinner {
            width: 50px; height: 50px;
            border: 3px solid rgba(30, 41, 59, 0.1);
            border-left-color: var(--soft-black);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* --- HEADER (STICKY & PREMIUM) --- */
        header {
            position: fixed; 
            top: 20px; left: 50%; 
            transform: translateX(-50%);
            width: calc(100% - 40px);
            max-width: 1200px;
            z-index: 2100;
            background: rgba(255, 255, 255, 0.7); /* More opaque */
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255,255,255,0.6);
            border-top: 1px solid var(--border-highlight);
            box-shadow: 0 8px 32px rgba(0,0,0,0.04);
            border-radius: 20px; 
            padding: 0 2rem; 
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.4s var(--ease-smooth);
            will-change: top, background, height, border-radius, box-shadow;
        }
        
        /* SCROLLED / STICKY STATE */
        header.scrolled {
            top: 0; /* Snap to top */
            width: 100%;
            max-width: 100%;
            border-radius: 0; /* Flat at top */
            background: rgba(255, 255, 255, 0.95); /* Almost solid */
            border-bottom: 1px solid var(--border-glass);
            border-top: none;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05); /* Tighter shadow */
            padding: 0 1rem; /* Tighter padding on mobile sticky */
            height: 60px; /* Slightly smaller */
        }

        .logo-wrapper { display: flex; align-items: center; gap: 12px; cursor: pointer; z-index: 2101; flex-shrink: 0; }
        .logo-img { height: 35px; width: auto; display: block; object-fit: contain; } /* Slightly smaller logo for mobile */
        .company-name { font-size: 1.1rem; font-weight: 800; color: var(--text-main); letter-spacing: -0.5px; line-height: 1; white-space: nowrap; }

        /* Desktop Navigation */
        .nav-desktop { display: none; gap: 2rem; align-items: center; }
        .nav-link-item { position: relative; font-size: 0.95rem; font-weight: 600; color: var(--text-secondary); padding: 0.5rem 0; cursor: pointer; display: flex; align-items: center; gap: 4px; white-space: nowrap; }
        .nav-link-item:hover, .nav-link-item.active { color: var(--soft-black); }
        .nav-link-item i { font-size: 1rem; transition: transform 0.3s; }
        .nav-link-item:hover i { transform: rotate(180deg); }

        /* Dropdown Menu */
        .dropdown {
            position: absolute;
            top: 140%; /* Slightly lower for hover clearance */
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            background: white; /* Solid white for menu readability */
            min-width: 240px;
            border-radius: 12px;
            padding: 0.5rem;
            box-shadow: var(--shadow-dropdown);
            border: 1px solid var(--border-glass);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 2100;
        }
        .nav-link-item:hover .dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }
        .dropdown li a {
            display: block;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-main);
            transition: all 0.2s;
            display: flex; align-items: center;
        }
        .dropdown li a i { margin-right: 10px; color: var(--text-tertiary); transition: color 0.2s; }
        .dropdown li a:hover {
            background: #f8fafc; 
            color: var(--soft-black);
        }
        .dropdown li a:hover i { color: var(--soft-black); }

        /* Auth Buttons in Header */
        .auth-buttons { display: flex; gap: 10px; align-items: center; }
        .logout-btn { font-size: 0.8rem; color: var(--text-secondary); cursor: pointer; transition: 0.2s; white-space: nowrap;}
        .logout-btn:hover { color: var(--soft-black); text-decoration: underline; }
        .admin-link { font-size: 1.1rem; color: var(--accent-warn); background: rgba(245, 158, 11, 0.1); padding: 6px; border-radius: 50%; transition: 0.2s; border: 1px solid rgba(245, 158, 11, 0.2); }
        .admin-link:hover { background: var(--accent-warn); color: white; transform: rotate(15deg) scale(1.1); box-shadow: 0 0 15px rgba(245, 158, 11, 0.3); }

        /* Mobile Toggle */
        .mobile-toggle { display: block; font-size: 1.5rem; cursor: pointer; color: var(--text-main); z-index: 2101; transition: transform 0.4s var(--ease-elastic); }
        .mobile-toggle.open { transform: rotate(90deg); }

        /* DESKTOP MEDIA QUERY */
        @media(min-width: 992px) {
            .nav-desktop { display: flex; } 
            .mobile-toggle { display: none; }  
        }

        /* --- MOBILE DRAWER (FULL SCREEN UPDATE) --- */
        .mobile-drawer-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.4); backdrop-filter: blur(5px);
            z-index: 1999; opacity: 0; pointer-events: none; transition: opacity 0.4s ease;
        }
        .mobile-drawer-overlay.active { opacity: 1; pointer-events: all; }

        .mobile-drawer {
            /* FULL SCREEN UPDATE */
            position: fixed; top: 0; right: 0; width: 100%; 
            height: 100vh;
            background: var(--bg-surface);
            z-index: 2000;
            display: flex; flex-direction: column; 
            transform: translateX(100%); transition: transform 0.4s var(--ease-smooth);
            overflow-y: auto; border-left: 1px solid var(--border-glass);
            box-shadow: -10px 0 30px rgba(0,0,0,0.1);
        }
        .mobile-drawer.open { transform: translateX(0); }

        /* Mobile Navigation Structure */
        .mobile-nav-list {
            padding: 100px 0 40px;
            display: flex;
            flex-direction: column;
        }

        /* Top Level Link or Header */
        .mobile-nav-item {
            border-bottom: 1px solid #f1f5f9;
        }

        .mobile-nav-link {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.2rem 2rem;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-main);
            transition: background 0.2s;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .mobile-nav-link:hover {
            background: #f8fafc;
            padding-left: 2.2rem; /* Slight movement on hover */
        }
        .mobile-nav-link i {
            color: var(--text-tertiary);
            transition: transform 0.3s;
        }

        /* Accordion Submenu */
        .mobile-submenu {
            max-height: 0;
            overflow: hidden;
            background: #fdfdfd;
            transition: max-height 0.3s ease-in-out;
            border-bottom: 1px solid #e2e8f0;
        }
        .mobile-submenu.open {
            max-height: 500px; /* Arbitrary large height for animation */
            box-shadow: inset 0 4px 6px -1px rgba(0, 0, 0, 0.02);
        }
        
        .mobile-submenu a {
            display: flex;
            align-items: center;
            padding: 1rem 2rem 1rem 3rem; /* Indented */
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-secondary);
            border-bottom: 1px dashed #f1f5f9;
        }
        .mobile-submenu a i {
            margin-right: 12px;
            color: var(--accent-warn);
            font-size: 1rem;
        }
        .mobile-submenu a:hover {
            background: #f1f5f9;
            color: var(--soft-black);
        }

        /* Active State for Dropdowns */
        .mobile-nav-header.active {
            background: #f8fafc;
            color: var(--soft-black);
        }
        .mobile-nav-header.active i.ri-arrow-down-s-line {
            transform: rotate(180deg);
        }
        .mobile-nav-header.active i {
            color: var(--soft-black);
        }

        /* Mobile Auth Section at Bottom */
        .mobile-auth-section {
            margin-top: auto;
            padding: 2rem;
            border-top: 1px solid var(--border-glass);
            background: #f8fafc;
        }

        /* --- FAB (UPDATED) --- */
        .mobile-fab {
            position: fixed; bottom: 30px; right: 30px;
            width: 60px; height: 60px;
            background: var(--soft-black); color: white;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 10px 30px rgba(30, 41, 59, 0.3);
            font-size: 1.5rem; cursor: pointer;
            z-index: 2000;
            transition: transform 0.3s ease;
        }
        .mobile-fab:hover { transform: scale(1.1) rotate(10deg); }

        /* --- MAIN CONTENT AREA --- */
        main { flex:1; width: 100%; position: relative; overflow-x: hidden; }
        
        /* --- PAGE ROUTING (UPDATED FOR SMOOTH FADE) --- */
        .page-section { 
            display: none; 
            min-height: calc(100vh - 80px); 
            padding-top: 120px; 
            padding-bottom: 60px; 
            opacity: 0; 
            transform: translateY(15px); 
            transition: opacity 0.4s var(--ease-smooth), transform 0.4s var(--ease-smooth); 
            pointer-events: none; /* Prevent interaction while invisible */
        }
        .page-section.active { 
            display: block; 
            opacity: 1; 
            transform: translateY(0); 
            pointer-events: auto;
        }
        /* Leaving state class for transition out */
        .page-section.leaving {
            opacity: 0;
            transform: translateY(-15px);
            pointer-events: none;
        }

        /* --- HERO --- */
        .hero { position: relative; min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding-top: 0; overflow: hidden; margin-top: -100px; }
        #globe-canvas { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1; pointer-events: none; opacity: 0.4; will-change: transform; }
        .hero-content { position: relative; z-index: 10; width: 100%; max-width: 900px; display: flex; flex-direction: column; align-items: center; padding: 0 20px; }
        .hero h1 { 
            font-size: clamp(2.5rem, 6vw, 5rem); margin-bottom:1.5rem; 
            background: linear-gradient(180deg, var(--text-main) 0%, var(--text-secondary) 100%); 
            -webkit-background-clip: text; background-clip: text; color: transparent; 
            filter: drop-shadow(0 0 20px rgba(255,255,255,0.8)); 
        }
        .hero p { font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 2.5rem; max-width: 600px; line-height: 1.7; }

        /* --- MARQUEE STYLES --- */
        .marquee-section {
            background: var(--bg-surface);
            border-top: 1px solid var(--border-glass);
            border-bottom: 1px solid var(--border-glass);
            padding: 1.5rem 0;
            position: relative;
            z-index: 10;
            width: 100%; 
            overflow: hidden; 
        }
        
        /* The row that moves */
        .marquee-row {
            display: flex;
            gap: 3rem;
            width: max-content; 
            animation: scroll-left 40s linear infinite;
        }

        .marquee-row.reverse {
            animation: scroll-right 40s linear infinite;
        }

        @media (max-width: 768px) {
            .marquee-row, .marquee-row.reverse {
                animation-duration: 30s; /* Faster on mobile */
            }
        }

        @keyframes scroll-left { from { transform: translateX(0); } to { transform: translateX(-50%); } }
        @keyframes scroll-right { from { transform: translateX(-50%); } to { transform: translateX(0); } }

        .trust-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            color: var(--soft-black);
            font-size: 1.1rem;
            white-space: nowrap;
        }
        .trust-item i { color: var(--accent-success); font-size: 1.3rem; }
        
        .review-marquee-item {
            background: var(--bg-glass);
            padding: 1rem 1.5rem;
            border-radius: 12px;
            border: 1px solid var(--border-glass);
            min-width: 300px;
            max-width: 400px;
            flex-shrink: 0; /* Important to prevent squishing */
        }
        .rm-rating { color: var(--accent-star); font-size: 0.9rem; margin-bottom: 0.5rem; }
        .rm-text { font-size: 0.9rem; color: var(--text-main); font-style: italic; margin-bottom: 0.5rem; line-height: 1.4; }
        .rm-author { font-size: 0.8rem; font-weight: 700; color: var(--text-secondary); text-align: right; }

        /* --- NEW HOME SECTIONS STYLES --- */
        
        /* Service Highlights */
        .home-section { padding: 5rem 0; position: relative; }
        .section-header { text-align: center; margin-bottom: 3.5rem; }
        .section-header h2 { font-size: 2rem; margin-bottom: 1rem; color: var(--text-main); }
        .section-header p { color: var(--text-secondary); max-width: 600px; margin: 0 auto; }
        
        .services-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem;
        }
        .service-card {
            background: var(--bg-glass);
            backdrop-filter: blur(12px);
            border: 1px solid var(--border-glass);
            border-top: 1px solid var(--border-highlight);
            border-radius: 20px;
            padding: 2.5rem 2rem;
            text-align: center;
            transition: all 0.3s ease;
        }
        .service-card:hover { transform: translateY(-10px); box-shadow: var(--shadow-card-hover); border-color: var(--soft-black); }
        .service-icon {
            width: 70px; height: 70px; margin: 0 auto 1.5rem;
            background: white; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 2rem; color: var(--soft-black);
            box-shadow: var(--shadow-sm);
            transition: 0.3s;
        }
        .service-card:hover .service-icon { background: var(--soft-black); color: white; transform: rotate(10deg); }
        .service-card h3 { font-size: 1.25rem; margin-bottom: 1rem; color: var(--text-main); text-transform: none; letter-spacing: normal; }
        .service-card p { font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 1.5rem; }

        /* Features / Why Choose Us */
        .features-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 2rem;
        }
        .feature-item {
            text-align: center;
            padding: 2rem;
            background: rgba(255,255,255,0.4);
            border-radius: 16px;
            border: 1px solid var(--border-glass);
            transition: 0.3s;
        }
        .feature-item:hover { background: white; box-shadow: var(--shadow-glass); transform: scale(1.02); }
        .feature-icon {
            font-size: 2.5rem; color: var(--soft-black); margin-bottom: 1rem;
            display: inline-block; padding: 15px; background: white; border-radius: 50%;
            box-shadow: var(--shadow-sm);
        }
        .feature-item h4 { font-size: 1.1rem; margin-bottom: 0.5rem; text-transform: none; letter-spacing: normal; }

        /* Home Portfolio Preview */
        .portfolio-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;
        }
        .portfolio-item {
            position: relative; border-radius: 16px; overflow: hidden;
            box-shadow: var(--shadow-glass); background: white; border: 1px solid var(--border-glass);
            transition: 0.4s;
        }
        .portfolio-item:hover { transform: translateY(-5px); box-shadow: var(--shadow-card-hover); }
        .portfolio-img-wrapper { height: 220px; overflow: hidden; position: relative; }
        .portfolio-img-wrapper img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s; }
        .portfolio-item:hover .portfolio-img-wrapper img { transform: scale(1.1); }
        .portfolio-info { padding: 1.5rem; }
        .portfolio-info h4 { font-size: 1.1rem; margin-bottom: 0.5rem; text-transform: none; }
        .portfolio-info p { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 1rem; }

        /* Home Lead Form */
        .home-lead-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            padding: 6rem 0;
            position: relative;
            overflow: hidden;
        }
        .home-lead-section::before {
            content:''; position: absolute; top: -50px; left: -50px; width: 300px; height: 300px;
            background: rgba(30, 41, 59, 0.05); border-radius: 50%; filter: blur(60px);
        }
        .lead-form-card {
            background: white; border-radius: 24px; padding: 3rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.05); border: 1px solid var(--border-glass);
            max-width: 600px; margin: 0 auto; position: relative; z-index: 2;
        }

        /* --- GLASS CARDS & AUTH --- */
        .glass-card {
            background: var(--bg-glass);
            backdrop-filter: blur(24px) saturate(180%);
            -webkit-backdrop-filter: blur(24px) saturate(180%);
            border: 1px solid var(--border-glass);
            border-top: 1px solid var(--border-highlight);
            box-shadow: var(--shadow-glass);
            border-radius: 24px;
            padding: 2.5rem;
            transition: all 0.4s var(--ease-smooth);
            position: relative;
        }
        .glass-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-card-hover); border-color: rgba(30, 41, 59, 0.15); }

        .auth-container { width: 100%; max-width: 600px; margin: 0 auto; padding-top: 40px; }
        .auth-card { text-align: center; }
        .auth-card h2 { margin-bottom: 0.5rem; }
        .auth-card p { color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 2rem; }
        .auth-link { color: var(--soft-black); cursor: pointer; font-weight: 700; text-decoration: underline; }
        .profile-details-grid { display: grid; grid-template-columns:1fr 1fr; gap:1rem; }
        @media(max-width: 600px) { .profile-details-grid { grid-template-columns:1fr; } }

        /* --- BUTTONS (SOFT BLACK FOCUS) --- */
        .btn {
            position: relative; display: inline-flex; align-items: center; justify-content: center;
            padding: 0.9rem 2rem; border-radius: 100px; cursor: pointer; overflow: hidden;
            font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; font-size: 0.85rem;
            transition: all 0.3s var(--ease-smooth); z-index: 1; border: 1px solid transparent;
            white-space: nowrap;
        }
        .btn::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 50%; height: 100%;
            background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0) 100%);
            transform: skewX(-25deg); transition: 0.5s; z-index: -1;
        }
        .btn:hover::before { left: 150%; }

        /* The Requested Soft Black Button */
        .btn-primary { 
            background: var(--soft-black); 
            color: white; 
            border: 1px solid var(--soft-black); 
            box-shadow: 0 4px 15px rgba(30, 41, 59, 0.25);
        }
        .btn-primary:hover { 
            background: var(--soft-black-hover); 
            transform: translateY(-2px); 
            box-shadow: 0 10px 25px rgba(30, 41, 59, 0.3); 
        }

        .btn-glass { background: rgba(255,255,255,0.7); color: var(--text-main); border: 1px solid var(--border-glass); }
        .btn-glass:hover { background: white; border-color: var(--soft-black); color: var(--soft-black); transform: translateY(-2px); }
        
        .btn-secondary { background: rgba(0,0,0,0.03); color: var(--text-main); border: 1px solid var(--border-glass); }
        .btn-secondary:hover { background: rgba(0,0,0,0.06); border-color: var(--text-main); }
        
        .btn-success { background: #10b981; color: white; border: 1px solid #10b981; }
        .btn-danger { background: var(--accent-warn); color: white; border: 1px solid var(--accent-warn); }
        .btn.disabled {
            background: rgba(0,0,0,0.05) !important; color: rgba(0,0,0,0.2) !important;
            border-color: rgba(0,0,0,0.05) !important; cursor: not-allowed !important;
        }

        /* --- GOOGLE BUTTON STYLE --- */
        .btn-google {
            background: white; 
            color: var(--text-main); 
            border: 1px solid var(--border-glass);
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .btn-google i { color: #DB4437; font-size: 1.2rem; }
        .btn-google:hover { 
            background: #f8fafc; 
            border-color: #cbd5e1; 
            transform: translateY(-2px); 
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        /* --- FORM ELEMENTS --- */
        .form-group { margin-bottom:1.5rem; text-align: left; position: relative; }
        .form-label { display: block; margin-bottom: 0.6rem; font-size: 0.85rem; color: var(--text-secondary); font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .form-input, .form-select, textarea {
            width: 100%; padding: 1rem;
            background: rgba(255, 255, 255, 0.5); border: 1px solid var(--border-glass);
            color: var(--text-main); border-radius: 12px; font-size: 1rem; 
            min-height: 48px; transition: 0.3s; appearance: none;
        }
        .form-input:focus, .form-select:focus, textarea:focus {
            background: white; border-color: var(--soft-black);
            box-shadow: 0 0 0 3px rgba(30, 41, 59, 0.1);
        }
        .form-select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%230f172a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat; background-position: right 1rem center; background-size: 1.2rem;
        }
        .radio-group { display: grid; gap: 1rem; }
        .radio-option { 
            border: 1px solid var(--border-glass); padding: 1rem 1.2rem; border-radius: 12px; 
            display: flex; align-items: center; gap: 12px; cursor: pointer; 
            transition: all 0.2s ease; background: rgba(255,255,255,0.5); 
            min-height: 56px; position: relative; user-select: none;
        }
        .radio-option:hover { transform: scale(1.01); background: white; border-color: var(--text-secondary); }
        .radio-option.selected { border-color: var(--soft-black); background: #f8fafc; box-shadow: 0 0 0 1px rgba(30, 41, 59, 0.1); }
        .radio-option.selected span { color: var(--soft-black); font-weight: 700; }
        .radio-option input[type="radio"] { width: 1px; height: 1px; opacity: 0; position: absolute; pointer-events: none; }

        /* --- PASSWORD REQUIREMENTS STYLES --- */
        .password-requirements {
            margin-top: 0.5rem;
            font-size: 0.75rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }
        .req-item {
            color: var(--text-tertiary);
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s ease;
        }
        .req-item i {
            font-size: 1rem;
            color: var(--text-tertiary);
        }
        .req-item.valid {
            color: var(--accent-success);
            font-weight: 600;
        }
        .req-item.valid i {
            color: var(--accent-success);
        }

        /* --- NOTIFICATION MODAL (UPDATED: CENTERED POPUP CARD) --- */
        #glass-modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.3); /* Subtle backdrop */
            backdrop-filter: blur(4px);
            z-index: 100001; 
            display: none; 
            justify-content: center; 
            align-items: center;
            opacity: 0; 
            transition: opacity 0.3s ease;
        }
        #glass-modal-overlay.active { display: flex; opacity: 1; }
        
        /* Card Container */
        .animated-notification-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            
            /* Card Styling */
            background: rgba(255, 255, 255, 0.95);
            padding: 2.5rem 3rem;
            border-radius: 24px;
            border: 1px solid rgba(255,255,255,0.8);
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            min-width: 320px;
            max-width: 450px;
            
            /* Animation */
            animation: popInBounce 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popInBounce {
            0% { transform: scale(0.5); opacity: 0; }
            70% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Icon Animations */
        .notif-icon-wrapper {
            width: 80px; height: 80px;
            margin-bottom: 1.5rem;
            position: relative;
            display: flex; align-items: center; justify-content: center;
        }
        
        /* Success Checkmark Animation */
        .checkmark-circle {
            width: 100%; height: 100%;
            border-radius: 50%;
            stroke: var(--accent-success);
            stroke-width: 4;
            fill: none;
            stroke-dasharray: 500;
            stroke-dashoffset: 500;
            animation: strokeDraw 1s ease-out forwards, fillGreen 0.5s ease-out 0.5s forwards;
        }
        .checkmark-check {
            stroke: white;
            stroke-width: 6;
            stroke-linecap: round;
            stroke-linejoin: round;
            fill: none;
            stroke-dasharray: 100;
            stroke-dashoffset: 100;
            animation: strokeDraw 0.5s ease-out 0.8s forwards;
            transform-origin: 50% 50%;
        }

        @keyframes strokeDraw { to { stroke-dashoffset: 0; } }
        @keyframes fillGreen { to { fill: var(--accent-success); } }

        /* Error/Wrong Animation */
        .error-circle {
            width: 100%; height: 100%;
            border-radius: 50%;
            stroke: var(--accent-danger);
            stroke-width: 4;
            fill: none;
            stroke-dasharray: 500;
            stroke-dashoffset: 500;
            animation: strokeDraw 1s ease-out forwards, fillRed 0.5s ease-out 0.5s forwards;
        }
        .error-x { 
            stroke: white; stroke-width: 6; stroke-linecap: round;
            stroke-dasharray: 50; stroke-dashoffset: 50; fill: none;
            animation: strokeDraw 0.3s ease-out 0.8s forwards;
        }
        .error-x.left { animation-delay: 0.8s; }
        .error-x.right { animation-delay: 1s; }
        
        /* Shake Animation for Error */
        .shake-wrapper {
            animation: shake 0.6s ease-in-out 1.2s; /* Shake after X drawn */
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }

        @keyframes fillRed { to { fill: var(--accent-danger); } }

        /* Warning Pulsing */
        .warning-pulse {
            font-size: 4rem;
            color: var(--accent-warn);
            animation: pulseWarning 1.5s infinite ease-in-out;
        }
        @keyframes pulseWarning {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.7; }
        }

        .notif-title { font-size: 1.8rem; font-weight: 800; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: -0.02em; color: var(--text-main); }
        .notif-desc { font-size: 1rem; opacity: 0.8; max-width: 400px; line-height: 1.5; margin-bottom: 2rem; color: var(--text-secondary); }
        
        .notif-btn {
            background: var(--soft-black);
            border: none;
            color: white;
            padding: 0.8rem 2.5rem;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-block; /* hidden by default if auto-close */
        }
        .notif-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }

        /* --- IMPROVED TOAST NOTIFICATIONS (HIDDEN AS PER REQUEST) --- */
        .toast-container { 
            display: none !important; /* Updated: Hidden because we use Pop-up modals now */
        }

        /* --- PRICING CARDS --- */
        .pricing-toggle-container { display: flex; align-items: center; justify-content: center; gap: 20px; margin-bottom: 3rem; }
        .switch { position: relative; display: inline-block; width: 60px; height: 32px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
            background-color: #e2e8f0; border: 1px solid #cbd5e1;
            transition: .4s; border-radius: 32px;
        }
        .slider:before {
            position: absolute; content: ""; height: 24px; width: 24px; left: 4px; bottom: 4px;
            background-color: white; transition: .4s; border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        input:checked + .slider { background-color: var(--soft-black); border-color: var(--soft-black); }
        input:checked + .slider:before { transform: translateX(28px); }
        .toggle-label { font-size: 0.95rem; font-weight: 600; color: var(--text-secondary); cursor: pointer; transition: 0.3s; }
        .toggle-label.active { color: var(--text-main); }

        .setup-fee-tag {
            display: block; text-align: center; font-size: 0.8rem; color: var(--accent-warn);
            font-weight: 700; margin-bottom: 0.5rem; background: #fffbeb;
            padding: 4px; border-radius: 4px; border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .pkg-header { text-align: center; margin-bottom: 2rem; position: relative; z-index: 2; }
        .pkg-icon {
            width: 60px; height: 60px; border-radius: 16px;
            background: #f8fafc; display: flex; align-items: center; justify-content: center;
            margin: 0 auto 1rem; font-size: 1.5rem; color: var(--text-main);
            border: 1px solid var(--border-glass); transition: 0.3s;
        }
        .glass-card:hover .pkg-icon {
            background: var(--soft-black); border-color: var(--soft-black);
            color: white; transform: scale(1.1) rotate(5deg);
            box-shadow: 0 10px 20px rgba(30, 41, 59, 0.2);
        }
        .pkg-title { font-size: 1.4rem; margin-bottom: 0.5rem; font-weight: 800; }
        .pkg-desc { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.5; margin-bottom: 1rem; min-height: 42px; }
        .pkg-price { font-size: 2.5rem; font-weight: 800; color: var(--text-main); margin-bottom: 0.5rem; letter-spacing: -1px; }
        .pkg-period { font-size: 0.9rem; color: var(--text-tertiary); font-weight: 500; }
        .pkg-features { list-style: none; text-align: left; margin-bottom: 2rem; flex-grow: 1; }
        .pkg-features li {
            color: var(--text-secondary); font-size: 0.95rem; margin-bottom: 0.8rem;
            padding-left: 24px; position: relative; line-height: 1.5;
        }
        .pkg-features li::before {
            content: '\eb7b'; font-family: 'remixicon'; position: absolute; left: 0;
            color: var(--soft-black); font-size: 1rem;
        }
        /* UPDATED MAINTENANCE TEXT STYLING */
        .pkg-features li.maintenance-warning {
            color: var(--accent-danger); /* Red text */
            font-weight: 600;
        }
        .pkg-features li.maintenance-warning::before {
            content: '\eb7b'; /* 'X' icon from RemixIcon */
            color: var(--accent-danger);
        }
        
        .bundle-tag {
            position: absolute; top: 15px; right: 15px;
            background: var(--soft-black); color: white;
            font-size: 0.7rem; font-weight: 800; padding: 4px 10px;
            border-radius: 20px; text-transform: uppercase; letter-spacing: 0.5px;
            z-index: 5; box-shadow: 0 0 10px rgba(30, 41, 59, 0.3);
        }
        
        /* --- PROCESSING OVERLAY --- */
        #processing-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(20px);
            z-index: 100002; display: none; flex-direction: column;
            justify-content: center; align-items: center; text-align: center; padding: 2rem;
        }
        .process-spinner {
            width: 60px; height: 60px;
            border: 4px solid rgba(30, 41, 59, 0.1);
            border-left-color: var(--soft-black);
            border-radius: 50%;
            animation: spin 1s linear infinite; margin-bottom: 2rem;
        }
        .process-text { font-size: 1.25rem; color: var(--text-main); max-width: 600px; line-height: 1.6; }
        /* New style for the processing note */
        .process-note {
            margin-top: 1.5rem;
            padding: 1rem 1.5rem;
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 12px;
            color: #0369a1;
            font-size: 0.95rem;
            max-width: 500px;
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }

        /* --- MAINTENANCE --- */
        #maintenance-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            background: var(--bg-deep); z-index: 99999;
            display: flex; justify-content: center; align-items: center;
            flex-direction: column; opacity: 0; pointer-events: none; transition: opacity 0.5s ease;
        }
        #maintenance-overlay.active { opacity:1; pointer-events: all; }
        .maintenance-content { text-align: center; padding: 2rem; max-width: 600px; }
        .maintenance-content i { font-size:5rem; color: var(--accent-warn); margin-bottom: 2rem; display: block; animation: pulse 2s infinite; }

        /* --- FAQ ACCORDION STYLES (IMPROVED) --- */
        .faq-container { max-width: 800px; margin: 0 auto; }
        .faq-item {
            margin-bottom: 1rem;
            border-radius: 12px;
            background: white;
            border: 1px solid var(--border-glass);
            overflow: hidden;
            transition: box-shadow 0.3s;
        }
        .faq-item:hover { box-shadow: var(--shadow-glass); }
        .faq-question {
            padding: 1.5rem;
            font-weight: 600;
            color: var(--text-main);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255,255,255,0.5);
            user-select: none;
        }
        .faq-question:hover { background: #f8fafc; }
        .faq-question i { color: var(--soft-black); transition: transform 0.3s; }
        .faq-item.active .faq-question i { transform: rotate(180deg); color: var(--soft-black); }
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s var(--ease-smooth), padding 0.4s;
            padding: 0 1.5rem;
            color: var(--text-main); /* Changed to main text for better visibility */
            background: white;
            border-top: 1px solid transparent;
        }
        .faq-item.active .faq-answer {
            padding: 1.5rem;
            border-top-color: var(--border-glass);
        }

        /* --- ABOUT COMPANY STYLES --- */
        .about-section-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        .about-hero h2 { 
            font-size: 2.5rem; 
            margin-bottom: 1rem; 
            letter-spacing: -0.02em;
            font-weight: 700;
        }
        .about-narrative {
            color: var(--text-secondary);
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 3rem;
        }
        .about-highlight {
            color: var(--soft-black);
            font-weight: 600;
        }
        .founder-card {
            margin: 2rem 0;
            padding: 2rem;
            background: var(--bg-deep);
            border-radius: 16px;
            border: 1px solid var(--border-glass);
        }

        /* --- PRIVACY POLICY STYLES --- */
        .privacy-content {
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.7;
        }
        .privacy-content h2 {
            font-size: 1.8rem;
            margin-top: 3rem;
            margin-bottom: 1.5rem;
            color: var(--soft-black);
            border-bottom: 2px solid var(--border-glass);
            padding-bottom: 0.5rem;
        }
        .privacy-content h3 {
            font-size: 1.3rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: var(--text-main);
            text-transform: none;
            letter-spacing: normal;
        }
        .privacy-content p {
            color: var(--text-secondary);
            margin-bottom: 1.2rem;
        }
        .privacy-content ul {
            list-style: disc;
            margin-left: 1.5rem;
            margin-bottom: 1.2rem;
            color: var(--text-secondary);
        }
        .privacy-content a {
            color: #3b82f6;
            text-decoration: underline;
        }

        /* --- TERMS PAGE STYLES --- */
        .terms-content {
            max-width: 800px;
            margin: 0 auto;
        }
        .terms-content h3 { 
            color: var(--soft-black); 
            margin-top: 2.5rem; 
            margin-bottom: 1rem; 
            font-size: 1.4rem; 
            text-transform: none; 
            letter-spacing: normal; 
            border-bottom: 1px solid var(--border-glass); 
            padding-bottom: 10px; 
        }
        .terms-content p { 
            color: var(--text-secondary); 
            line-height: 1.8; 
            margin-bottom: 1rem; 
        }
        .terms-content ul { 
            list-style: disc; 
            margin-left: 25px; 
            margin-bottom: 1.5rem; 
            color: var(--text-secondary);
        }
        .terms-content li { margin-bottom: 0.8rem; }

        /* --- TERMS MODAL (Kept for checkout) --- */
        .modal { display: none; position: fixed; z-index: 99999; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); backdrop-filter: blur(10px); opacity: 0; transition: opacity 0.3s; overflow-y: auto; }
        .modal.open { display: block; opacity: 1; }
        .modal-content {
            background-color: var(--bg-surface); margin: 2% auto; padding: 40px;
            border: 1px solid var(--border-glass); width: 90%; max-width: 800px; border-radius: 24px;
            min-height: 90vh; transform: scale(0.9); transition: transform 0.3s var(--ease-smooth);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); position: relative; z-index: 10000;
        }
        .modal.open .modal-content { transform: scale(1); }
        .close-modal { position: absolute; top: 20px; right: 25px; color: #999; font-size: 35px; font-weight: bold; cursor: pointer; z-index: 10001; transition: 0.2s; }
        .close-modal:hover { color: var(--text-main); transform: rotate(90deg); }
        
        /* --- ORDER HISTORY TABLE --- */
        .history-table-container { margin-top: 2rem; width: 100%; overflow-x: auto; border: 1px solid var(--border-glass); border-radius: 12px; background: white; }
        .history-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; text-align: left; }
        .history-table th { background: #f8fafc; color: var(--text-secondary); padding: 1rem; font-weight: 700; text-transform: uppercase; font-size: 0.75rem; border-bottom: 1px solid var(--border-glass); white-space: nowrap; }
        .history-table td { padding: 1rem; border-bottom: 1px solid var(--border-glass); color: var(--text-main); }
        .status-badge { padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; }
        .status-pending { background: #fffbeb; color: var(--accent-warn); }
        .status-completed { background: #ecfdf5; color: var(--accent-success); }
        .status-paid { background: #f1f5f9; color: var(--soft-black); }
        .status-cancelled { background: #fef2f2; color: #ef4444; }

        /* --- CUSTOMER REVIEWS STYLES --- */
        .reviews-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-top: 2rem;
        }
        .review-card {
            background: rgba(255, 255, 255, 0.6); border: 1px solid var(--border-glass);
            padding: 1.5rem; border-radius: 16px; transition: 0.3s;
        }
        .review-card:hover { transform: translateY(-3px); background: white; box-shadow: var(--shadow-card-hover); }
        .review-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; }
        .review-avatar {
            width: 40px; height: 40px; border-radius: 50%; background: var(--bg-deep);
            display: flex; align-items: center; justify-content: center; font-weight: 700; color: var(--text-main);
            border: 1px solid var(--border-glass);
        }
        .review-info h4 { font-size: 0.95rem; margin: 0; text-transform: none; letter-spacing: normal; color: var(--soft-black); }
        .review-date { font-size: 0.75rem; color: var(--text-tertiary); }
        .review-stars { color: var(--accent-star); margin-bottom: 0.8rem; font-size: 0.9rem; letter-spacing: 2px; }
        .review-text { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; font-style: italic; }
        
        .review-input-wrapper { display: flex; gap: 0.5rem; cursor: pointer; }
        .star-icon { font-size: 1.8rem; color: #cbd5e1; transition: color 0.2s; }
        .star-icon.hovered, .star-icon.selected { color: var(--accent-star); }

        /* --- FOOTER --- */
        footer { background-color: white; border-top: 1px solid var(--border-glass); padding: 5rem 0 2rem; margin-top: auto; position: relative; z-index: 5; }
        .footer-grid { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 3rem; margin-bottom: 3rem; }
        .footer-col h4 { font-size: 0.9rem; margin-bottom: 1.5rem; color: var(--text-main); letter-spacing: 0.05em; }
        .footer-brand .company-name { font-size: 1.5rem; margin-bottom: 1rem; display: flex; align-items: center; }
        .footer-brand p { color: var(--text-secondary); font-size: 0.9rem; max-width: 300px; line-height: 1.6; }
        .footer-links li { margin-bottom: 0.8rem; }
        .footer-links a { color: var(--text-secondary); font-size: 0.9rem; transition: 0.2s; }
        .footer-links a:hover { color: var(--soft-black); padding-left: 5px; }
        .footer-contact-item { display: flex; align-items: center; gap: 10px; color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem; }
        .footer-contact-item i { color: var(--soft-black); }
        .footer-bottom { display: flex; justify-content: space-between; align-items: center; padding-top: 2rem; border-top: 1px solid var(--border-glass); }
        .copyright { font-size: 0.85rem; color: var(--text-tertiary); }
        .mac-dock { display: flex; gap: 1rem; background: #f8fafc; padding: 0.8rem 1.5rem; border-radius: 24px; border: 1px solid var(--border-glass); box-shadow: var(--shadow-sm); }
        .dock-icon { width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: white; color: var(--text-main); font-size: 1.2rem; transition: all 0.3s; }
        .dock-icon:hover { transform: scale(1.2) translateY(-8px); background: var(--soft-black); color: white; box-shadow: 0 0 15px rgba(30, 41, 59, 0.2); }

        /* --- SUCCESS MODAL --- */
        .idea-success-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.5); backdrop-filter: blur(10px);
            z-index: 100010; display: none; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.4s ease;
        }
        .idea-success-modal.active { display: flex; opacity: 1; }
        .idea-success-content {
            background: white; border: 1px solid var(--soft-black);
            box-shadow: 0 0 50px rgba(30, 41, 59, 0.15);
            border-radius: 24px; padding: 3rem 2rem; width: 90%; max-width: 500px;
            text-align: center; transform: scale(0.8); transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .idea-success-modal.active .idea-success-content { transform: scale(1); }
        .success-check-circle {
            width: 100px; height: 100px; border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-success), #059669);
            display: flex; align-items: center; justify-content: center; margin: 0 auto 2rem;
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.3); position: relative;
        }
        .success-check-circle i { font-size: 4rem; color: white; z-index: 2; }
        .success-check-circle::after {
            content: ''; position: absolute; width: 100%; height: 100%; border-radius: 50%;
            border: 2px solid var(--accent-success); opacity: 0; animation: ripple 2s infinite;
        }
        .idea-success-title { font-size: 1.8rem; font-weight: 800; color: var(--text-main); margin-bottom: 1rem; }
        .idea-success-msg { color: var(--text-secondary); font-size: 1rem; line-height: 1.6; margin-bottom: 2rem; }

        /* --- DONE PAYMENT PAGE STYLES --- */
        .done-payment-wrapper {
            max-width: 600px;
            margin: 2rem auto;
            text-align: center;
        }
        .payment-loader {
            width: 80px; height: 80px;
            border: 5px solid #e2e8f0;
            border-top: 5px solid var(--soft-black);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 2rem;
        }
        .manual-confirmation-box {
            background: white;
            border: 2px dashed var(--soft-black);
            border-radius: 20px;
            padding: 3rem;
            margin-top: 2rem;
        }

        /* --- NEW MANUAL CONFIRMATION BOX FOR CHECKOUT --- */
        #manual-confirm-section {
            display: none;
            margin-top: 2rem;
            padding: 2rem;
            background: #ecfdf5; /* Light green bg */
            border: 1px solid var(--accent-success);
            border-radius: 16px;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .manual-confirm-icon {
            font-size: 3rem;
            color: var(--accent-success);
            margin-bottom: 1rem;
        }

        /* ========================================== */
        /* LOGIN WARP EFFECT STYLES (BLACK & WHITE)   */
        /* ========================================== */
        #warp-transition-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000000; /* Pure Black Background */
            z-index: 999999; 
            display: none; 
            justify-content: center; 
            align-items: center;
            opacity: 0; 
            transition: opacity 0.5s ease;
            pointer-events: none;
        }
        #warp-transition-overlay.active {
            display: flex;
            opacity: 1;
            pointer-events: all;
        }
        #warp-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .warp-flash {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #ffffff; /* White Flash */
            opacity: 0;
            pointer-events: none;
            z-index: 10;
            transition: opacity 0.2s ease;
        }
                #warp-welcome-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10; /* Above the canvas */
            color: #ffffff; /* White Text */
            font-family: var(--font-display);
            font-size: 3rem;
            font-weight: 800;
            text-align: center;
            opacity: 0; /* Hidden by default */
            transition: opacity 0.8s ease;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.6); /* White glow */
            pointer-events: none;
            text-transform: uppercase;
            letter-spacing: 1px;
            width: 90%;
        }
        #warp-welcome-text span {
            display: block;
            font-size: 1.2rem;
            font-weight: 400;
            opacity: 0.8;
            margin-top: 10px;
            text-transform: none;
            color: #e0e0e0;
        }
        
        /* ========================================== */
        /* MOBILE RESPONSIVE (COMPACT MODE)           */
        /* ========================================== */
        @media(max-width: 991px) {
            /* Base Scaling */
            body { font-size: 0.9rem; line-height: 1.5; }
            h1 { font-size: 2rem !important; } h2 { font-size: 1.4rem !important; } h3 { font-size: 1.2rem !important; } h4 { font-size: 1rem !important; }
            
            /* Structure */
            #globe-canvas { transform: translate(-50%, -50%) scale(0.5); opacity: 0.6; }
            .page-section { padding-top: 100px !important; padding-bottom: 30px !important; }
            main, footer { width: 100%; margin: 0; }
            .container { width: 94%; }
            
            /* Header */
            header {
                width: 94% !important; left: 50% !important; transform: translateX(-50%) !important;
                top: 10px; border-radius: 16px; padding: 0 1rem; height: 60px;
            }
            header.scrolled { width: 100% !important; top: 0; border-radius: 0; }
            .company-name { font-size: 0.95rem; }
            .logo-img { height: 28px; }
            
            /* Components Scaling */
            .btn { padding: 0.7rem 1.5rem !important; font-size: 0.75rem !important; min-height: 44px; border-radius: 50px; }
            .glass-card { padding: 1.5rem !important; border-radius: 16px !important; }
            .form-group { margin-bottom: 1rem !important; }
            .form-label { font-size: 0.7rem !important; margin-bottom: 0.4rem !important; }
            .form-input, .form-select, textarea { padding: 0.7rem !important; font-size: 0.9rem !important; border-radius: 8px; min-height: 40px; }
            .radio-option { padding: 0.7rem !important; min-height: auto; }
            
            /* Hero */
            .hero { padding: 0 10px; min-height: 80vh; }
            .hero h1 { font-size: 2.2rem !important; margin-bottom: 1rem; }
            .hero p { font-size: 0.95rem; margin-bottom: 2rem; }
            
            /* Pricing Cards Mobile */
            .pkg-icon { width: 40px; height: 40px; font-size: 1.2rem; margin-bottom: 0.5rem; }
            .pkg-title { font-size: 1rem; margin-bottom: 0.2rem; }
            .pkg-desc { font-size: 0.75rem; margin-bottom: 0.5rem; min-height: auto; }
            .pkg-price { font-size: 1.8rem; }
            .pkg-features li { font-size: 0.8rem; margin-bottom: 0.3rem; padding-left: 18px; }
            .setup-fee-tag { font-size: 0.65rem; padding: 2px 6px; margin-bottom: 0.2rem; }
            .bundle-tag { font-size: 0.6rem; padding: 3px 8px; top: 8px; right: 8px; }

            /* Tables */
            .history-table { font-size: 0.8rem; }
            .history-table th, .history-table td { padding: 0.7rem; }
            
            /* Footer */
            footer { padding: 3rem 0 1.5rem; }
            .footer-grid { grid-template-columns: 1fr; gap: 2rem; text-align: center; }
            .footer-brand { align-items: center; display: flex; flex-direction: column; }
            .footer-contact-item { justify-content: center; }
            .footer-bottom { flex-direction: column; gap: 1.5rem; }
            .mac-dock { display: none; }
        }

        /* Fix: Force Chat Widget Visibility */
        div[id*="chat"], div[class*="chat"], 
        div[id*="lc-"], div[class*="lc-"], 
        div[id*="widget"], div[class*="widget"],
        iframe[id*="chat"], iframe[class*="chat"] {
            z-index: 999999 !important;
            opacity: 1 !important;
            visibility: visible !important;
            pointer-events: auto !important;
            transform: none !important;
        }
        
    </style>
</head>
<body>

    <!-- MAINTENANCE OVERLAY -->
    <div id="maintenance-overlay">
        <div class="maintenance-content">
            <i class="ri-tools-line"></i>
            <h1 id="maint-title">Site is currently under maintenance.</h1>
            <p id="maint-desc">We're making improvements to serve you better.</p>
            <p>Please check back again shortly.</p>
            <p>"If you facing any issues, kindly email to"</p>
            <p>ddnetwork.one@outlook.com</p>
        </div>
    </div>

    <!-- GENERAL ANIMATED NOTIFICATION OVERLAY (UPDATED STYLE) -->
    <div id="glass-modal-overlay">
        <div class="animated-notification-container">
            <!-- SVGs injected by JS -->
            <h3 id="glass-modal-title" class="notif-title"></h3>
            <p id="glass-modal-desc" class="notif-desc"></p>
            <!-- Button hidden for auto-close style -->
            <button id="glass-modal-btn" class="notif-btn" style="display:none;">Okay</button>
        </div>
    </div>

    <!-- IMPROVED SUCCESS MODAL FOR WEBSITE IDEA -->
    <div id="idea-success-modal" class="idea-success-modal">
        <div class="idea-success-content">
            <div class="success-check-circle">
                <i class="ri-checkbox-circle-fill"></i>
            </div>
            <h3 class="idea-success-title">Request Received!</h3>
            <p class="idea-success-msg">
                Thank you! Your request has been successfully saved.<br>
                We will get back to you shortly.
            </p>
            <button class="btn btn-primary" style="width: 100%;" onclick="closeIdeaSuccessModal()">
                Back to Home
            </button>
        </div>
    </div>

    <!-- Preloader -->
    <div id="preloader">
        <div class="spinner"></div>
    </div>

    <!-- Toast Container (Hidden via CSS) -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Mobile Drawer Overlay -->
    <div id="mobileDrawerOverlay" class="mobile-drawer-overlay" onclick="toggleDrawer()"></div>

    <!-- Header -->
    <header id="mainHeader">
        <a href="/" onclick="routeLink(event, '/')" class="logo-wrapper">
            <img src="https://raw.githubusercontent.com/ddnetwork-one/ddnetwork-store/refs/heads/main/crop_ddnlogo.png" alt="DDNetwork Logo" class="logo-img">
            <span class="company-name">DDNetworkOne</span>
        </a>
        
        <nav class="nav-desktop">
            <a href="/" onclick="routeLink(event, '/')" class="nav-link-item">Home</a>
            <div class="nav-link-item">
                Solutions <i class="ri-arrow-down-s-line"></i>
                <ul class="dropdown">
                    <li><a href="/pricing" onclick="routeLink(event, '/pricing')"><i class="ri-price-tag-3-fill"></i> Pricing</a></li>
                    <li><a href="/reviews" onclick="routeLink(event, '/reviews')"><i class="ri-star-smile-fill"></i> Reviews</a></li>
                    <li><a href="/clients" onclick="routeLink(event, '/clients')"><i class="ri-team-fill"></i> Clients</a></li>
                    <li><a href="/helpdesk" onclick="routeLink(event, '/helpdesk')"><i class="ri-customer-service-2-fill"></i> Helpdesk</a></li>
                </ul>
            </div>
            <div class="nav-link-item">
                About Us <i class="ri-arrow-down-s-line"></i>
                <ul class="dropdown">
                    <li><a href="/about-company" onclick="routeLink(event, '/about-company')"><i class="ri-building-4-fill"></i> About Company</a></li>
                    <li><a href="/faq" onclick="routeLink(event, '/faq')"><i class="ri-question-answer-fill"></i> FAQ</a></li>
                    <li><a href="/privacy" onclick="routeLink(event, '/privacy')"><i class="ri-shield-keyhole-fill"></i> Privacy Policy</a></li>
                    <li><a href="/terms" onclick="routeLink(event, '/terms')"><i class="ri-file-list-3-fill"></i> Terms</a></li>
                    <li><a href="/founder-danialdanish" onclick="routeLink(event, '/founder-danialdanish')"><i class="ri-user-star-fill"></i> Founder</a></li>
                </ul>
            </div>
            <a href="https://careers.ddnet.my" target="_blank" class="nav-link-item">Careers</a>
            <a href="/updates" onclick="routeLink(event, '/updates')" class="nav-link-item">Updates</a>
            <a href="/terms" onclick="routeLink(event, '/terms')" class="nav-link-item">Terms</a>
            <div class="auth-buttons" id="desktopAuthLinks"></div>
        </nav>

        <div class="mobile-toggle" onclick="toggleDrawer()">
            <i class="ri-menu-4-line"></i>
        </div>
    </header>

    <!-- MOBILE DRAWER -->
    <div class="mobile-drawer" id="mobileDrawer">
        <ul class="mobile-nav-list">
            <li class="mobile-nav-item"><a href="/" onclick="routeLink(event, '/'); toggleDrawer()" class="mobile-nav-link"><i class="ri-home-4-fill"></i> Home</a></li>
            <li class="mobile-nav-item">
                <div class="mobile-nav-link mobile-nav-header" onclick="toggleMobileSub(this)"><span>Solutions</span><i class="ri-arrow-down-s-line"></i></div>
                <ul class="mobile-submenu">
                    <li><a href="/pricing" onclick="routeLink(event, '/pricing'); toggleDrawer()"><i class="ri-price-tag-3-fill"></i> Pricing</a></li>
                    <li><a href="/reviews" onclick="routeLink(event, '/reviews'); toggleDrawer()"><i class="ri-star-smile-fill"></i> Reviews</a></li>
                    <li><a href="/clients" onclick="routeLink(event, '/clients'); toggleDrawer()"><i class="ri-team-fill"></i> Clients</a></li>
                    <li><a href="/helpdesk" onclick="routeLink(event, '/helpdesk'); toggleDrawer()"><i class="ri-customer-service-2-fill"></i> Helpdesk</a></li>
                </ul>
            </li>
            <li class="mobile-nav-item">
                <div class="mobile-nav-link mobile-nav-header" onclick="toggleMobileSub(this)"><span>About Us</span><i class="ri-arrow-down-s-line"></i></div>
                <ul class="mobile-submenu">
                    <li><a href="/about-company" onclick="routeLink(event, '/about-company'); toggleDrawer()"><i class="ri-building-4-fill"></i> About Company</a></li>
                    <li><a href="/faq" onclick="routeLink(event, '/faq'); toggleDrawer()"><i class="ri-question-answer-fill"></i> FAQ</a></li>
                    <li><a href="/privacy" onclick="routeLink(event, '/privacy'); toggleDrawer()"><i class="ri-shield-keyhole-fill"></i> Privacy Policy</a></li>
                    <li><a href="/terms" onclick="routeLink(event, '/terms'); toggleDrawer()"><i class="ri-file-list-3-fill"></i> Terms</a></li>
                    <li><a href="/founder-danialdanish" onclick="routeLink(event, '/founder-danialdanish'); toggleDrawer()"><i class="ri-user-star-fill"></i> Founder</a></li>
                </ul>
            </li>
            <li class="mobile-nav-item"><a href="https://careers.ddnet.my" target="_blank" onclick="toggleDrawer()" class="mobile-nav-link"><i class="ri-briefcase-4-fill"></i> Careers</a></li>
            <li class="mobile-nav-item"><a href="/updates" onclick="routeLink(event, '/updates'); toggleDrawer()" class="mobile-nav-link"><i class="ri-refresh-line"></i> Updates</a></li>
            <div id="mobileAuthLinksContainer" class="mobile-auth-section"></div>
        </ul>
    </div>

    <!-- CHECKOUT PROCESSING OVERLAY -->
    <div id="processing-overlay">
        <div class="process-spinner"></div>
        <div id="process-message" class="process-text">Initializing...</div>
        <div class="process-note"><i class="ri-refresh-line"></i> <span><strong>Note:</strong> Refresh this page if payment is completed.</span></div>
    </div>

    <!-- LOGIN WARP TRANSITION OVERLAY (UPDATED ID) -->
    <div id="warp-transition-overlay">
        <canvas id="warp-canvas"></canvas>
        <div class="warp-flash" id="warp-flash"></div>
        <div id="warp-welcome-text"></div>
        <audio id="warpSound" preload="auto"></audio>
        <audio id="impactSound" preload="auto"></audio>
    </div>

    <!-- MAIN CONTENT -->
    <main class="container">

        <!-- PAGE: HOME -->
        <section id="home" class="page-section active">
            <div class="hero">
                <canvas id="globe-canvas" width="1200" height="1200"></canvas>
                <div class="hero-content">
                    <div style="display:inline-block; padding: 6px 16px; background: rgba(255,255,255,0.5); border-radius: 30px; border: 1px solid rgba(255,255,255,0.8); margin-bottom:1.5rem; font-size: 0.8rem; font-weight: 700; letter-spacing: 1px; color: var(--soft-black); text-transform: uppercase;">Malaysia  #1 Web Solutions</div>
                    <h1>Custom Websites for<br>Malaysian Businesses</h1>
                    <p>Designed in Malaysia. Built for the world.</p>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center;">
                        <button class="btn btn-primary" onclick="navigateTo('/pricing')">View Pricing</button>
                        <button class="btn btn-glass" onclick="navigateTo('/reviews')">See Reviews</button>
                        <button class="btn btn-secondary" onclick="navigateTo('/profile-website-describe')">Start Your Project</button>
                    </div>
                </div>
            </div>

            <div class="marquee-section">
                <div class="container" style="overflow: hidden;">
                    <div class="marquee-row" id="trust-marquee-row-1">
                        <div class="trust-item"><i class="ri-check-double-line"></i> Trusted by 10+ Clients</div>
                        <div class="trust-item"><i class="ri-global-line"></i> Global Standard Hosting</div>
                        <div class="trust-item"><i class="ri-rocket-line"></i> Fast Delivery Guaranteed</div>
                        <div class="trust-item"><i class="ri-shield-check-line"></i> Secure Payment Gateway</div>
                        <div class="trust-item"><i class="ri-customer-service-2-line"></i> 24/7 Technical Support</div>
                        <div class="trust-item"><i class="ri-star-s-fill"></i> 5-Star Rated Services</div>
                        <div class="trust-item"><i class="ri-check-double-line"></i> Trusted by 10+ Clients</div>
                        <div class="trust-item"><i class="ri-global-line"></i> Global Standard Hosting</div>
                        <div class="trust-item"><i class="ri-rocket-line"></i> Fast Delivery Guaranteed</div>
                        <div class="trust-item"><i class="ri-shield-check-line"></i> Secure Payment Gateway</div>
                        <div class="trust-item"><i class="ri-customer-service-2-line"></i> 24/7 Technical Support</div>
                        <div class="trust-item"><i class="ri-star-s-fill"></i> 5-Star Rated Services</div>
                    </div>
                </div>
            </div>

            <div class="home-section">
                <div class="container">
                    <div class="section-header"><h2>Our Solutions</h2><p>From simple landing pages to complex AI-powered systems, we have a package for every stage of your business growth.</p></div>
                    <div class="services-grid">
                        <div class="service-card">
                            <div class="service-icon"><i class="ri-layout-4-line"></i></div>
                            <h3>Static Website</h3>
                            <p>Perfect for portfolios and small businesses. Fast loading and cost-effective.</p>
                            <button class="btn btn-glass" onclick="selectPackage('HTML Only', 'html')">Learn More</button>
                        </div>
                        <div class="service-card">
                            <div class="service-icon"><i class="ri-layout-masonry-line"></i></div>
                            <h3>Interactive Website</h3>
                            <p>Dynamic, engaging websites with animations and user interactions.</p>
                            <button class="btn btn-glass" onclick="selectPackage('Front-End Website', 'frontend')">Learn More</button>
                        </div>
                        <div class="service-card">
                            <div class="service-icon"><i class="ri-brain-line"></i></div>
                            <h3>AI-Powered Solutions</h3>
                            <p>Integrate ChatGPT chatbots and automation to save time and costs.</p>
                            <button class="btn btn-glass" onclick="selectPackage('AI Powered', 'ai')">Learn More</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="home-section" style="background: rgba(255,255,255,0.4);">
                <div class="container">
                    <div class="section-header"><h2>Why Choose Us?</h2><p>We combine technical expertise with a deep understanding of the local market.</p></div>
                    <div class="features-grid">
                        <div class="feature-item"><div class="feature-icon"><i class="ri-rocket-2-fill"></i></div><h4>Fast Delivery</h4><p style="font-size:0.85rem; color:var(--text-secondary);">We value your time with efficient turnaround.</p></div>
                        <div class="feature-item"><div class="feature-icon"><i class="ri-smartphone-line"></i></div><h4>Mobile-First</h4><p style="font-size:0.85rem; color:var(--text-secondary);">Perfectly responsive on all devices.</p></div>
                        <div class="feature-item"><div class="feature-icon"><i class="ri-bar-chart-box-line"></i></div><h4>SEO & Analytics</h4><p style="font-size:0.85rem; color:var(--text-secondary);">Built-in tools to help you rank higher.</p></div>
                        <div class="feature-item"><div class="feature-icon"><i class="ri-robot-2-line"></i></div><h4>AI Integration</h4><p style="font-size:0.85rem; color:var(--text-secondary);">Future-proof your business with AI.</p></div>
                    </div>
                </div>
            </div>

            <div class="home-section">
                <div class="container">
                    <div class="section-header"><h2>Recent Work</h2><p>Check out some of our latest completed projects.</p></div>
                    <div id="home-portfolio-grid" class="portfolio-grid"><div class="text-center" style="grid-column: 1/-1; color: var(--text-tertiary);">Loading portfolio...</div></div>
                    <div class="text-center" style="margin-top: 2rem;"><button class="btn btn-primary" onclick="navigateTo('/clients')">View All Projects</button></div>
                </div>
            </div>

            <div class="home-lead-section">
                <div class="container">
                    <div class="lead-form-card glass-card">
                        <div class="text-center" style="margin-bottom: 2rem;"><h2 style="font-size: 1.8rem; margin-bottom: 0.5rem;">Get In Touch</h2><p style="color: var(--text-secondary);">Have a custom project in mind? Send us a direct message.</p></div>
                        <form onsubmit="handleHomeLeadSubmit(event)">
                            <div class="form-group"><label class="form-label">Name</label><input type="text" id="lead-name" class="form-input" placeholder="Your Name" required></div>
                            <div class="form-group"><label class="form-label">Email</label><input type="email" id="lead-email" class="form-input" placeholder="hello@example.com" required></div>
                            <div class="form-group"><label class="form-label">Message</label><textarea id="lead-message" class="form-input" rows="4" placeholder="Tell us about your project..." required></textarea></div>
                            <button class="btn btn-primary" style="width: 100%;">Send Message</button>
                        </form>
                        <div style="margin-top: 2rem; border-top: 1px solid var(--border-glass); padding-top: 1.5rem; text-align: center;"><p style="color: var(--text-main); font-weight: 700; margin-bottom: 0.5rem;">Email Us</p><a href="mailto:sales@ddnet.my" style="color: var(--soft-black); font-size: 1.2rem;">sales@ddnet.my</a></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PAGE: REVIEWS -->
        <section id="reviews" class="page-section">
            <div class="text-center" style="margin-bottom: 2rem;"><h2 style="font-size: 1.8rem; margin-bottom: 0.5rem;">Customer Reviews</h2><p style="color: var(--text-secondary); font-size: 0.9rem;">See what our clients say about us.</p></div>
            <div class="auth-container" style="margin-top: 0;">
                <div class="glass-card" style="max-width: 700px;">
                    <h3 style="text-align: center; margin-bottom: 1rem; font-size: 1.2rem;">Write a Review</h3>
                    <p style="text-align: center; color: var(--text-secondary); margin-bottom: 2rem; font-size: 0.9rem;">Login required to submit a review.</p>
                    <form id="review-form" onsubmit="handleReviewSubmit(event)">
                        <div class="form-group">
                            <label class="form-label">Your Rating</label>
                            <div class="review-input-wrapper" id="star-input-container">
                                <i class="ri-star-fill star-icon" data-val="1"></i><i class="ri-star-fill star-icon" data-val="2"></i><i class="ri-star-fill star-icon" data-val="3"></i><i class="ri-star-fill star-icon" data-val="4"></i><i class="ri-star-fill star-icon" data-val="5"></i>
                            </div>
                            <input type="hidden" id="rating-value" required>
                            <div id="rating-error" style="color: var(--accent-warn); font-size: 0.8rem; margin-top: 5px; display: none;">Please select a rating.</div>
                        </div>
                        <div class="form-group"><label class="form-label">Your Comment</label><textarea id="review-comment" class="form-input" rows="4" placeholder="Share your experience with DDNetwork One..." required></textarea></div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">Submit Review</button>
                    </form>
                </div>
            </div>
            <div style="margin-top: 4rem; overflow: hidden; position: relative; width: 100%;">
                <div class="marquee-row" id="reviews-marquee-row-1"></div>
                <div class="marquee-row reverse" id="reviews-marquee-row-2" style="margin-top: 1rem;"></div>
            </div>
            <div class="text-center" style="margin-top: 2rem;"><button class="btn btn-primary" onclick="toggleFullReviews()">View All Reviews</button></div>
            <div id="reviews-list" class="reviews-grid hidden"></div>
        </section>

        <!-- PAGE: PRIVACY -->
        <section id="privacy" class="page-section">
            <div class="glass-card privacy-content">
                <h2 class="text-center">Privacy Policy for DDNetwork</h2>
                <p class="text-center" style="margin-bottom: 3rem;"><strong>Effective Date:</strong> 6 February 2026</p>
                <p>DDNetwork (we, our, us) respects your privacy and is committed to protecting your personal information. This Privacy Policy explains how we collect, use, store, and share data when you use our website (<strong>https://www.ddnet.my/</strong>) and our application <strong>ddnetwork-database</strong>.</p>
                <h3>1. Data We Collect</h3>
                <p>When you use our services, we may access the following Google user data:</p>
                <ul><li><strong>Basic Profile Information:</strong> Name, email address, profile picture</li><li><strong>Google Contacts (if applicable):</strong> To display or process information within the app</li><li><strong>Other Data:</strong> Any additional Google services requested by the app (if applicable)</li></ul>
                <p>We do <strong>not</strong> access data beyond what is needed to provide services of our app.</p>
                <h3>2. How We Use Your Data</h3>
                <p>We use your Google data only to provide, operate, and improve our application:</p>
                <ul><li>To personalize your experience in <strong>ddnetwork-database</strong></li><li>To enable app features that require Google data</li><li>To communicate with you about your account or updates</li></ul>
                <p>We do <strong>not sell, rent, or trade</strong> your Google data to third parties.</p>
                <h3>3. Data Storage and Security</h3>
                <ul><li>All collected data is stored securely on our servers or authorized cloud services.</li><li>We implement appropriate technical and organizational measures to protect your data against unauthorized access, disclosure, alteration, or destruction.</li><li>Access to your data is limited to authorized personnel only.</li></ul>
                <h3>4. Data Sharing</h3>
                <ul><li>We do not share your Google data with third parties except where required by law or to comply with Google API policies.</li><li>Any third-party services integrated with the app (e.g., analytics or hosting providers) only receive the minimal data necessary to provide their service.</li></ul>
                <h3>5. Your Rights</h3>
                <ul><li>You can request access to data we have collected about you.</li><li>You can request correction or deletion of your data by contacting us at details below.</li></ul>
                <h3>6. Changes to This Policy</h3>
                <p>We may update this Privacy Policy from time to time. We will notify you of any significant changes and update the <strong>effective date</strong> above.</p>
                <h3>7. Contact Us</h3>
                <p>If you have any questions about this Privacy Policy or your data, please contact us:</p>
                <p><strong>Email:</strong> <a href="mailto:support@ddnet.my">support@ddnet.my</a><br><strong>Website:</strong> <a href="https://www.ddnet.my" target="_blank">https://www.ddnet.my</a></p>
            </div>
        </section>

        <!-- PAGE: ABOUT COMPANY -->
        <section id="about-company" class="page-section">
            <div class="container about-section-wrapper">
                <div class="about-hero">
                    <h1 class="text-center">Simplicity in Digital</h1>
                    <p style="color: var(--text-secondary); max-width: 600px; margin: 0 auto 3rem;">We build digital tools that are clean, fast, and easy to use.</p>
                </div>
                <div class="about-narrative">
                    <p style="margin-bottom: 2rem;"><strong>DD Cloud Network</strong> is a registered digital agency based in Malaysia. We provide professional website design and cloud services to help businesses grow.</p>
                    <p style="margin-bottom: 2rem;">We operate <strong>DDNetwork</strong> as a specialized sub-brand focused on delivering modern web solutions. While DD Cloud Network handles the broader scope of digital services, DDNetwork focuses specifically on creating high-quality websites.</p>
                    <p style="margin-bottom: 2rem;">Our approach is simple. We prioritize <strong>speed</strong>, <strong>clean design</strong>, and <strong>smart functionality</strong>. We cut through the noise to deliver exactly what you need.</p>
                    <p style="margin-bottom: 3rem;">Founded by <strong>Danial Danish</strong>, our team partners with startups, local businesses, and individuals to turn ideas into reality.</p>
                    <div class="glass-card founder-card">
                        <i class="ri-eye-2-line" style="font-size: 2rem; color: var(--soft-black); margin-bottom: 1rem; display:block;"></i>
                        <h3 style="font-size: 1.5rem; margin-bottom: 1rem;">Our Vision</h3>
                        <p style="color: var(--text-secondary); margin: 0;">To build a digital ecosystem where technology serves people, not the other way around.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- PAGE: FAQ -->
        <section id="faq" class="page-section">
            <div class="container">
                <div class="text-center" style="margin-bottom: 3rem;"><h1>Frequently Asked Questions</h1><p style="color: var(--text-secondary);">Everything you need to know about our services.</p></div>
                <div class="faq-container">
                    <div class="faq-item"><div class="faq-question" onclick="toggleFaq(this)"><span>How long does it take to build a website?</span><i class="ri-arrow-down-s-line"></i></div><div class="faq-answer"><p>For a simple HTML static website, delivery typically takes 3-5 working days. For more complex interactive websites or AI integration, it usually takes between 2 to 4 weeks depending on the scope of features and content readiness.</p></div></div>
                    <div class="faq-item"><div class="faq-question" onclick="toggleFaq(this)"><span>Do I need to pay for hosting and domain?</span><i class="ri-arrow-down-s-line"></i></div><div class="faq-answer"><p>Yes, all websites require a domain name (e.g., .com) and hosting. We offer free hosting for the first year with selected packages. Domain costs vary depending on the extension (.com, .my, .net).</p></div></div>
                    <div class="faq-item"><div class="faq-question" onclick="toggleFaq(this)"><span>Can I update the website content myself?</span><i class="ri-arrow-down-s-line"></i></div><div class="faq-answer"><p>For our Internal Portal and Database solutions, yes, you will have a dashboard to manage content. For static HTML or front-end websites, minor updates might require our assistance, though we can integrate a CMS upon request.</p></div></div>
                    <div class="faq-item"><div class="faq-question" onclick="toggleFaq(this)"><span>What payment methods do you accept?</span><i class="ri-arrow-down-s-line"></i></div><div class="faq-answer"><p>We accept Razorpay (via Curlec), FPX, credit/debit cards, and e-wallets. Payment details will be provided upon checkout.</p></div></div>
                    <div class="faq-item"><div class="faq-question" onclick="toggleFaq(this)"><span>Do you provide SEO services?</span><i class="ri-arrow-down-s-line"></i></div><div class="faq-answer"><p>Basic SEO (Meta tags, sitemap, robots.txt) is included in all our packages. For advanced SEO ranking campaigns, please contact us for a custom quote.</p></div></div>
                </div>
            </div>
        </section>

        <!-- PAGE: TERMS -->
        <section id="terms" class="page-section">
            <div class="container">
                <div class="glass-card terms-content">
                    <h2 class="text-center">Terms & Conditions</h2>
                    <p class="text-center" style="margin-bottom: 2rem;">By accessing, engaging, or using any services provided by <strong>DDNetwork One</strong>, you acknowledge that you have read, understood, and agreed to be legally bound by these Terms & Conditions.</p>
                    <h3>Hosting Terms</h3>
                    <p>Hosting is provided based on customers own custom domain. For new customers, a free ddnet.my subdomain is included for the first year only. After the free period, renewal of the ddnet.my subdomain is chargeable at RM 55 per year.</p>
                    <p>Monthly subscription plans include hosting, server management, basic security updates, uptime monitoring, and technical support. One-time purchase plans include website development and deployment only. Ongoing maintenance, support, backups, updates, and content changes are not included and will be charged separately upon request. DDNetwork reserves the right to suspend hosting services in cases of non-payment, abuse, or violation of acceptable use policies.</p>
                    <h3>1. Scope of Services</h3><p>Services provided are limited to what is explicitly stated in selected package or written agreement.</p><p>Any work not listed (including additional pages, features, redesigns, or custom functions) is considered <strong>out of scope</strong> and will be quoted separately.</p>
                    <h3>2. One-Time Purchase Services</h3><p>One-time purchases include <strong>development and delivery only</strong>.</p><p>Updates, content changes, bug fixes, maintenance, and ongoing support are <strong>not included</strong>.</p><p>Any future changes will be charged separately.</p>
                    <h3>3. Subscription Services (Monthly)</h3><p>Subscription plans cover <strong>maintenance, monitoring, and technical support</strong> within agreed scope.</p><p>Subscriptions do <strong>not</strong> include major redesigns, new features, or scope expansion.</p><p>Requests beyond original scope will require an additional quotation.</p>
                    <h3>4. Setup Fees</h3><p>Setup fees are <strong>one-time, non-refundable</strong> payments.</p><p>Setup fees cover initial development, configuration, integrations, testing, and deployment.</p><p>Work will only begin after setup fee has been fully paid.</p>
                    <h3>5. Payments & Billing</h3><p>All prices are stated in <strong>RM (MYR)</strong> unless otherwise specified.</p><p>Monthly plans are billed in advance on a recurring basis.</p><p>Late payments may result in suspension of services until payment is received.</p>
                    <h3>6. Revisions & Changes</h3><p>Minor revisions may be provided at DDNetwork Ones discretion.</p><p>Repeated revisions, content rewrites, or design changes are not included unless stated.</p><p>Additional changes will be billed separately.</p>
                    <h3>7. Client Responsibilities</h3><p>Clients are responsible for providing accurate content, images, and information.</p><p>Delays caused by missing content or approvals may affect delivery timelines.</p><p>DDNetwork One is not responsible for issues caused by third-party services or client-provided materials.</p>
                    <h3>8. Delivery Timeline</h3><p>Estimated timelines are provided as guidelines only.</p><p>Delays caused by client-side feedback, content submission, or external dependencies are not responsibility of DDNetwork One.</p>
                    <h3>9. Intellectual Property</h3><p>Ownership of final website or system is transferred to client only after full payment is received.</p><p>DDNetwork One retains right to showcase completed projects for portfolio and promotional purposes unless otherwise agreed in writing.</p>
                    <h3>10. Termination</h3><p>DDNetwork One reserves right to terminate services if payments are overdue, terms are violated, or abusive behavior occurs.</p><p>No refunds will be issued for work already completed.</p>
                    <h3>11. Refund Policy</h3><p>All payments made are <strong>non-refundable</strong>, unless otherwise stated in writing.</p><p>Setup fees and completed work are strictly non-refundable.</p>
                    <h3>12. Limitation of Liability</h3><p>DDNetwork One shall not be held liable for loss of data, revenue, or business arising from use or inability to use services.</p><p>Clients are advised to maintain their own backups and business continuity plans.</p>
                    <h3>13. Changes to Terms</h3><p>DDNetwork One reserves right to update or modify these Terms & Conditions at any time.</p><p>Continued use of services constitutes acceptance of updated terms.</p>
                    <p style="margin-top: 3rem; font-weight: 700; text-align:center;">&copy; DDNetwork One. All rights reserved.</p>
                </div>
            </div>
        </section>

        <!-- PAGE: PROFILE -->
        <section id="profile" class="page-section">
            <div class="auth-container" style="max-width: 900px;">
                <div class="glass-card auth-card">
                    <i class="ri-user-settings-fill" style="font-size: 3rem; color: var(--soft-black); margin-bottom: 1rem;"></i>
                    <h2>My Profile</h2>
                    <p>View and update your personal details.</p>
                    <form onsubmit="handleProfileUpdate(event)">
                        <div class="profile-details-grid">
                            <div class="form-group"><label class="form-label">Full Name</label><input type="text" id="prof-name" class="form-input" placeholder="Loading..." required></div>
                            <div class="form-group"><label class="form-label">Email Address</label><input type="email" id="prof-email" class="form-input" placeholder="Loading..." readonly></div>
                            <div class="form-group"><label class="form-label">Phone Number</label><input type="tel" id="prof-phone" class="form-input" placeholder="Loading..." required></div>
                            <div class="form-group"><label class="form-label">Company Name <span style="font-weight:400; font-size: 0.7em; color:var(--text-tertiary);">(Optional)</span></label><input type="text" id="prof-company" class="form-input" placeholder="e.g. Acme Corp"></div>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">Update Profile</button>
                    </form>
                    <div id="profile-voucher-section" style="display: none; margin-top: 2rem; border-top: 1px solid var(--border-glass); padding-top: 2rem;">
                        <div class="glass-card" style="padding: 1.5rem; display:flex; justify-content:space-between; align-items:center; margin-bottom:0; border-color: rgba(30, 41, 59, 0.2);">
                            <div class="voucher-info">
                                <h4 id="profile-voucher-title" style="color:var(--text-main); font-size:1rem;">You have a Gift Voucher!</h4>
                                <p id="profile-voucher-text" style="color:var(--soft-black); font-weight:700; font-size:0.9rem;">Code: -</p>
                            </div>
                            <div id="profile-voucher-action"><button type="button" class="btn btn-danger" style="width: auto; padding: 0.6rem 1.2rem;" onclick="deletePersonalVoucher()">Delete</button></div>
                        </div>
                    </div>
                    <div style="margin-top: 1.5rem; border-top: 1px solid var(--border-glass); padding-top: 1.5rem;">
                        <button type="button" class="btn btn-glass" style="width: 100%;" onclick="navigateTo('/profile-website-describe')"><i class="ri-edit-2-fill" style="margin-right:8px;"></i> Describe Your Website Ideas</button>
                    </div>
                    <div id="profile-history-section" style="display: none; margin-top: 2rem; border-top: 1px solid var(--border-glass); padding-top: 2rem; text-align: left;">
                        <h3 style="font-size: 1.2rem; margin-bottom: 1rem; color: var(--text-main);">Purchase History</h3>
                        <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 1rem;">Track your previous orders and status. Syncs automatically.</p>
                        <div class="history-table-container">
                            <table class="history-table"><thead><tr><th>Date</th><th>Package</th><th>Total</th><th>Status</th></tr></thead><tbody id="order-history-body"></tbody></table>
                            <div id="no-orders-msg" class="text-center hidden" style="padding: 2rem; color: var(--text-tertiary);">No orders found.</div>
                        </div>
                    </div>
                    <div style="margin-top: 2rem; border-top: 1px solid var(--border-glass); padding-top: 1.5rem;">
                         <button type="button" class="btn btn-secondary" style="width: 100%;" onclick="handleProfileReset()"><i class="ri-lock-password-fill" style="margin-right: 8px;"></i> Reset Password</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- PAGE: WEBSITE DESCRIPTION -->
        <section id="profile-website-describe" class="page-section">
            <div class="auth-container" style="max-width: 800px;">
                <div class="glass-card auth-card" style="text-align: left;">
                    <div style="text-align: center; margin-bottom: 2rem;"><i class="ri-lightbulb-flash-fill" style="font-size: 3rem; color: #6366f1; margin-bottom: 1rem;"></i><h2>Describe Your Website</h2><p>Tell us your vision! We'll review your ideas and get back to you.</p></div>
                    <form id="website-idea-form" onsubmit="handleWebsiteIdeaSubmit(event)">
                        <div class="form-group"><label class="form-label">Your Name</label><input type="text" id="idea-name" class="form-input" placeholder="e.g. Ali Bin Abu" required></div>
                        <div class="form-group"><label class="form-label">Phone Number</label><input type="tel" id="idea-phone" class="form-input" placeholder="e.g. 0123456789" required></div>
                        <div class="form-group"><label class="form-label">Email Address</label><input type="email" id="idea-email" class="form-input" placeholder="hello@example.com" required></div>
                        <div class="form-group"><label class="form-label">Company Name <span style="font-weight:400; font-size: 0.7em; color:var(--text-tertiary);">(Optional)</span></label><input type="text" id="idea-company" class="form-input" placeholder="e.g. Acme Corp"></div>
                        <div class="form-group"><label class="form-label">Where did you hear about us?</label><select id="idea-source" class="form-select" required><option value="" disabled selected>Select an option...</option><option value="TikTok">TikTok</option><option value="Facebook">Facebook</option><option value="Instagram">Instagram</option><option value="YouTube">YouTube</option><option value="Google">Google</option><option value="ChatGPT">ChatGPT</option><option value="Grok">Grok</option><option value="Referral">Referral</option><option value="Other">Other</option></select></div>
                        <div class="form-group"><label class="form-label">Project Type</label><select id="idea-type" class="form-select" required><option value="" disabled selected>What are you looking for?</option><option value="New Website">New Website</option><option value="Redesign Existing Website">Redesign Existing Website</option><option value="Internal Portal / System">Internal Portal / System</option><option value="AI Integration">AI Integration</option><option value="Other">Other / Not Sure</option></select></div>
                        <div class="form-group"><label class="form-label">Describe Your Idea</label><textarea id="idea-message" class="form-input" rows="6" placeholder="Tell us about your business, target audience, features you need, or any specific design ideas..." required></textarea></div>
                        <div class="form-group"><label class="form-label">Reference Sites (Optional)</label><input type="text" id="idea-references" class="form-input" placeholder="Paste links of sites you like..."></div>
                        <button type="submit" id="btn-submit-idea" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Submit Idea</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- PAGE: LOGIN -->
        <section id="login" class="page-section">
            <div class="auth-container">
                <div class="glass-card auth-card">
                    <i class="ri-user-3-fill" style="font-size: 3rem; color: var(--soft-black); margin-bottom: 1rem;"></i>
                    <h2>Welcome Back</h2>
                    <p>Login to manage your orders.</p>
                    <form onsubmit="handleLogin(event)">
                        <div class="form-group"><label class="form-label">Email</label><input type="email" id="login-email" class="form-input" placeholder="hello@example.com" required></div>
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" id="login-password" class="form-input" placeholder="Required" required>
                            <div style="text-align: right; margin-top: 5px;"><span class="auth-link" style="font-size: 0.8rem;" onclick="navigateTo('/forgot-password')">Forgot Password?</span></div>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
                    </form>
                    <div style="margin: 1.5rem 0; display: flex; align-items: center; gap: 10px;"><div style="height: 1px; background: var(--border-glass); flex: 1;"></div><span style="color: var(--text-tertiary); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px;">Or</span><div style="height: 1px; background: var(--border-glass); flex: 1;"></div></div>
                    <button type="button" class="btn btn-google" style="width: 100%;" onclick="handleGoogleAuth()"><i class="ri-google-fill"></i> Continue with Google</button>
                    <div style="margin-top: 1.5rem; font-size: 0.9rem; color: var(--text-secondary);">Don't have an account? <span class="auth-link" onclick="navigateTo('/signup')">Sign Up</span></div>
                </div>
            </div>
        </section>

        <!-- PAGE: FORGOT PASSWORD -->
        <section id="forgot-password" class="page-section">
            <div class="auth-container">
                <div class="glass-card auth-card">
                    <i class="ri-lock-password-fill" style="font-size: 3rem; color: var(--accent-warn); margin-bottom: 1rem;"></i>
                    <h2>Reset Password</h2>
                    <p>Enter your email to receive a reset link.</p>
                    <form onsubmit="handleForgotPassword(event)">
                        <div class="form-group"><label class="form-label">Email Address</label><input type="email" id="reset-email" class="form-input" placeholder="hello@example.com" required></div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">Send Reset Link</button>
                    </form>
                    <div style="margin-top: 1.5rem; font-size: 0.9rem; color: var(--text-secondary);">Remember your password? <span class="auth-link" onclick="navigateTo('/login')">Back to Login</span></div>
                </div>
            </div>
        </section>

        <!-- PAGE: SIGNUP -->
        <section id="signup" class="page-section">
            <div class="auth-container">
                <div class="glass-card auth-card">
                    <h2>Create Account</h2>
                    <p>Join us to track your projects.</p>
                    <form onsubmit="handleSignup(event)">
                        <div class="form-group"><label class="form-label">Full Name</label><input type="text" id="signup-name" class="form-input" placeholder="e.g. Nurul Nabila" required></div>
                        <div class="form-group"><label class="form-label">Phone Number</label><input type="tel" id="signup-phone" class="form-input" placeholder="0123456789" required></div>
                        <div class="form-group"><label class="form-label">Email</label><input type="email" id="signup-email" class="form-input" placeholder="hello@example.com" required></div>
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" id="signup-password" class="form-input" placeholder="Create a password" required minlength="6" oninput="checkPasswordStrength()">
                            <div class="password-requirements">
                                <span id="req-upper" class="req-item"><i class="ri-close-circle-line"></i> Uppercase</span>
                                <span id="req-lower" class="req-item"><i class="ri-close-circle-line"></i> Lowercase</span>
                                <span id="req-num" class="req-item"><i class="ri-close-circle-line"></i> Number</span>
                                <span id="req-len" class="req-item"><i class="ri-close-circle-line"></i> Min 6 chars</span>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">Create Account</button>
                    </form>
                    <div style="margin: 1.5rem 0; display: flex; align-items: center; gap: 10px;"><div style="height: 1px; background: var(--border-glass); flex: 1;"></div><span style="color: var(--text-tertiary); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px;">Or</span><div style="height: 1px; background: var(--border-glass); flex: 1;"></div></div>
                    <button type="button" class="btn btn-google" style="width: 100%;" onclick="handleGoogleAuth()"><i class="ri-google-fill"></i> Sign up with Google</button>
                    <div style="margin-top: 1.5rem; font-size: 0.9rem; color: var(--text-secondary);">Already have an account? <span class="auth-link" onclick="navigateTo('/login')">Login</span></div>
                </div>
            </div>
        </section>

        <!-- PAGE: HELPDESK -->
        <section id="helpdesk" class="page-section">
            <div class="auth-container">
                <div class="glass-card auth-card">
                    <i class="ri-customer-service-2-fill" style="font-size: 3rem; color: var(--soft-black); margin-bottom: 1rem;"></i>
                    <h2>Helpdesk</h2>
                    <p>Submit a support ticket. We'll get back to you ASAP.</p>
                    <form onsubmit="handleTicketSubmit(event)">
                        <div class="profile-details-grid">
                            <div class="form-group"><label class="form-label">Full Name</label><input type="text" id="ticket-name" class="form-input" placeholder="e.g. Nurul Nabila" required></div>
                            <div class="form-group"><label class="form-label">Email Address</label><input type="email" id="ticket-email" class="form-input" placeholder="hello@example.com" required></div>
                        </div>
                        <div class="form-group"><label class="form-label">Issue Type</label><select id="ticket-type" class="form-select" required><option value="" disabled selected>Select an issue</option><option value="Cannot login">Cannot login</option><option value="Cannot change password">Cannot change password</option><option value="Forgot password">Forgot password</option><option value="Payment issue">Payment issue</option><option value="Website not loading">Website not loading</option><option value="Form not submitting">Form not submitting</option><option value="Update price / content">Update price / content</option><option value="Other issue">Other issue</option></select></div>
                        <div class="form-group"><label class="form-label">Message / Description</label><textarea id="ticket-message" class="form-input" placeholder="Describe your issue in detail..." required rows="5"></textarea></div>
                        <button type="submit" id="btn-submit-ticket" class="btn btn-primary" style="width: 100%;">Submit Ticket</button>
                        <div id="case-id-display" style="display:none; margin-top:1.5rem; padding:1.5rem; border:1px dashed var(--accent-success); background:#ecfdf5; border-radius:12px; text-align:center;">
                             <div style="font-size:0.85rem; color:var(--soft-black); font-weight:700; margin-bottom:0.5rem;">TICKET SUBMITTED</div>
                             <div id="display-case-id" style="font-size:1.5rem; font-weight:800; color:var(--text-main); margin-bottom:1rem; font-family:monospace;">#Ticket-0000</div>
                             <button class="btn btn-glass" style="padding:0.5rem 1rem; font-size:0.8rem;" onclick="copyTicketId()">Copy ID</button>
                        </div>
                    </form>
                    <div class="ticket-history-container" style="margin-top:2rem; border-top:1px solid var(--border-glass); padding-top:2rem;">
                        <h3 style="font-size: 1.2rem; margin-bottom: 1rem; color: var(--text-main);">Check Ticket Status</h3>
                        <p style="color: var(--text-secondary); font-size: 0.85rem; margin-bottom: 1rem;">Enter your unique Case ID to view ticket details.</p>
                        <div class="profile-details-grid">
                            <input type="text" id="history-search-id" class="form-input" placeholder="Enter Case ID (e.g. #Ticket-0001)">
                            <button type="button" class="btn btn-secondary" onclick="fetchTicketHistory()">Search</button>
                        </div>
                        <div id="ticket-list" class="ticket-list" style="margin-top:1rem; display:flex; flex-direction:column; gap:1rem;"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PAGE: SERVICES / PRICING -->
        <section id="services" class="page-section">
            <div style="padding-bottom: 4rem;">
                <div class="text-center" style="margin-bottom: 3rem;">
                    <h2 style="font-size: 1.8rem; margin-bottom: 0.5rem;">Pricing Packages</h2>
                    <p style="color: var(--text-secondary); font-size: 0.9rem;">Transparent pricing. Choose plan that fits your needs.</p>
                    <div class="pricing-toggle-container">
                        <span id="label-monthly" class="toggle-label" onclick="setBilling('monthly')">Monthly</span>
                        <label class="switch"><input type="checkbox" id="billing-toggle" onchange="toggleBilling()"><span class="slider"></span></label>
                        <span id="label-onetime" class="toggle-label" onclick="setBilling('onetime')">One-Time</span>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                    <!-- Package 1: Basic HTML Website -->
                    <div class="glass-card" style="text-align: center; display:flex; flex-direction:column;">
                        <div class="pkg-header">
                            <div class="pkg-icon"><i class="ri-file-list-3-fill"></i></div>
                            <h3 class="pkg-title">Basic HTML Website</h3>
                            <p class="pkg-desc">1 Static Landing Page.</p>
                            <div class="price-display-area"><span id="price-html" class="pkg-price">RM 249</span><span id="period-html" class="pkg-period">/one-time</span></div>
                            <div id="html-setup-display" class="setup-fee-tag hidden">Setup Fee: RM 100</div>
                        </div>
                        <ul class="pkg-features">
                            <li>1 Static Landing Page</li><li>Mobile Responsive Design</li><li>Basic SEO Tags</li><li>Contact Form</li><li>Hosting based on your custom domain</li>
                            <li>Free ddnet.my subdomain for 1 year (new customer)</li>
                            <li id="html-feat-sub" class="hidden">Maintenance and security updates included</li>
                            <li id="html-feat-content" class="hidden">Minor content changes included</li>
                            <li id="html-feat-no-support" class="maintenance-warning hidden">No maintenance or support included</li>
                            <li id="html-feat-content-charge" class="maintenance-warning hidden">Content changes are chargeable</li>
                        </ul>
                        <button class="btn btn-glass" style="width: 100%;" onclick="attemptSelectPackage('Basic HTML Website', 'html')">Select</button>
                    </div>
                    <!-- Package 2: Front-End Website -->
                    <div class="glass-card" style="text-align: center; display:flex; flex-direction:column; border-color:rgba(30, 41, 59, 0.2);">
                        <div class="bundle-tag">Most Popular</div>
                        <div class="pkg-header">
                            <div class="pkg-icon" style="background:var(--soft-black); color:white; border:none;"><i class="ri-layout-masonry-fill"></i></div>
                            <h3 class="pkg-title">Front-End Website</h3>
                            <p class="pkg-desc">Up to 5 Pages.</p>
                            <div class="setup-fee-tag" id="frontend-setup-display">Setup Fee: RM 200</div>
                            <div class="price-display-area"><span id="price-frontend" class="pkg-price">RM 99</span><span id="period-frontend" class="pkg-period">/month</span></div>
                        </div>
                        <ul class="pkg-features">
                            <li>Up to 5 Pages</li><li>Animations & Interactive UI</li><li>Contact Forms</li><li>WhatsApp Integration</li><li>Basic SEO Setup</li><li>Hosting based on your custom domain</li>
                            <li>Free ddnet.my subdomain for 1 year (new customer)</li>
                            <li id="frontend-feat-maint" class="hidden">Maintenance and security updates included</li>
                            <li id="frontend-feat-content" class="hidden">Content changes included (fair use)</li>
                            <li id="frontend-feat-no-support" class="maintenance-warning hidden">No maintenance or support included</li>
                            <li id="frontend-feat-content-charge" class="maintenance-warning hidden">Content changes are chargeable</li>
                        </ul>
                        <button class="btn btn-primary" style="width: 100%;" onclick="attemptSelectPackage('Front-End Website', 'frontend')">Select Front-End</button>
                    </div>
                    <!-- Package 3: Front-End + Portal -->
                    <div class="glass-card" style="text-align: center; display:flex; flex-direction:column; border-color:rgba(139, 92, 246, 0.3);">
                        <div class="bundle-tag" style="background: linear-gradient(45deg, #6366f1, #a855f7);">Best Value</div>
                        <div class="pkg-header">
                            <div class="pkg-icon" style="background: linear-gradient(135deg, #6366f1, #a855f7); border:none; color:white;"><i class="ri-database-2-fill"></i></div>
                            <h3 class="pkg-title">Front-End + Portal</h3>
                            <p class="pkg-desc">Full website & internal management.</p>
                            <div class="setup-fee-tag" id="bundle-setup-display">Setup Fee: RM 700</div>
                            <div class="price-display-area"><span id="price-bundle" class="pkg-price">RM 249</span><span id="period-bundle" class="pkg-period">/month</span></div>
                        </div>
                        <ul class="pkg-features">
                            <li style="color:var(--soft-black); font-weight:700;">Everything in Front-End Website</li>
                            <li>Multi-User Internal Portal Access</li><li>Website Integration and Database Management</li><li>Advanced Analytics</li><li>Custom Dashboards</li><li>Hosting based on your custom domain</li>
                            <li>Free ddnet.my subdomain for 1 year (new customer)</li>
                            <li id="bundle-feat-maint" class="hidden">Maintenance and priority support included</li>
                            <li id="bundle-feat-content" class="hidden">Content changes included (fair use)</li>
                            <li id="bundle-feat-no-support" class="maintenance-warning hidden">No maintenance or support included</li>
                            <li id="bundle-feat-content-charge" class="maintenance-warning hidden">Portal and content changes are chargeable</li>
                        </ul>
                        <button class="btn btn-glass" style="width: 100%; background: linear-gradient(45deg, #6366f1, #a855f7); border-color: transparent; color: white;" onclick="attemptSelectPackage('Front-End + Portal', 'bundle')">Select Bundle</button>
                    </div>
                    <!-- Package 4: AI Powered -->
                    <div class="glass-card" style="text-align: center; display:flex; flex-direction:column; border-color:rgba(245, 158, 11, 0.3);">
                        <div class="pkg-header">
                            <div class="pkg-icon"><i class="ri-brain-fill"></i></div>
                            <h3 class="pkg-title">AI Powered Website</h3>
                            <p class="pkg-desc">Advanced automation & chatbots.</p>
                            <div class="setup-fee-tag" id="ai-setup-display">Setup Fee: RM 400</div>
                            <div class="price-display-area"><span id="price-ai" class="pkg-price">RM 149</span><span id="period-ai" class="pkg-period">/month</span></div>
                        </div>
                        <ul class="pkg-features">
                             <li style="color:var(--soft-black); font-weight:700;">All Front-End Website Features</li>
                            <li>AI Chatbot Integration</li><li>Lead Auto-Response</li><li>Smart Analytics</li><li>Hosting based on your custom domain</li>
                            <li>Free ddnet.my subdomain for 1 year (new customer)</li>
                            <li id="ai-feat-maint" class="hidden">Maintenance and AI tuning included</li>
                            <li id="ai-feat-content" class="hidden">Content changes included (fair use)</li>
                            <li id="ai-feat-no-support" class="maintenance-warning hidden">No maintenance or AI tuning included</li>
                            <li id="ai-feat-content-charge" class="maintenance-warning hidden">Changes are chargeable</li>
                        </ul>
                        <button class="btn btn-glass" style="width: 100%;" onclick="openQuoteForm('AI Powered Website')">Request Quote</button>
                    </div>
                    <!-- Package 5: Portal Standalone -->
                    <div class="glass-card" style="text-align: center; display:flex; flex-direction:column;">
                        <div class="pkg-header">
                            <div class="pkg-icon"><i class="ri-server-fill"></i></div>
                            <h3 class="pkg-title">Portal Standalone</h3>
                            <p class="pkg-desc">Internal portal for existing sites.</p>
                            <div class="setup-fee-tag" id="portal-setup-display">Setup Fee: RM 700</div>
                            <div class="price-display-area"><span id="price-portal" class="pkg-price">RM 279</span><span id="period-portal" class="pkg-period">/month</span></div>
                        </div>
                        <ul class="pkg-features">
                            <li>Multi-User Internal Portal Access</li><li>Website Integration & Database Management</li><li>Advanced Analytics & Custom Dashboards</li><li>Business Process Integration</li><li>Hosting based on your custom domain</li>
                            <li>Free ddnet.my subdomain for 1 year (new customer)</li>
                            <li id="portal-feat-maint" class="hidden">Maintenance and monitoring included</li>
                            <li id="portal-feat-content" class="hidden">Content changes included (fair use)</li>
                            <li id="portal-feat-no-support" class="maintenance-warning hidden">No maintenance or support included</li>
                            <li id="portal-feat-content-charge" class="maintenance-warning hidden">Portal changes are chargeable</li>
                            <li id="portal-feat-ent" class="hidden">Enterprise-level technical support included</li>
                        </ul>
                        <button class="btn btn-glass" style="width: 100%;" onclick="openQuoteForm('Portal Standalone')">Request Quote</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- PAGE: CHECKOUT -->
        <section id="buynow" class="page-section">
            <div class="text-center" style="margin-bottom: 2rem;"><h2 style="font-size: 1.5rem; margin-bottom: 0.5rem;">Finalize Your Order</h2><p style="color: var(--text-secondary);">Secure your package and finalize details.</p></div>
            <div class="profile-details-grid" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap:2rem;">
                <!-- LEFT COLUMN -->
                <div class="glass-card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border-glass);"><h3 style="font-size: 1rem; color: var(--text-main);">Order Summary</h3><span class="auth-link" style="font-size:0.85rem;" onclick="navigateTo('/pricing')">Change Package</span></div>
                    <div style="background: rgba(241, 245, 249, 0.5); padding: 1.5rem; border-radius: 12px; border: 1px solid rgba(30, 41, 59, 0.1); margin-bottom: 1.5rem;">
                        <h4 id="summary-pkg-name" style="color: var(--soft-black); margin-bottom: 0.5rem;">Select a Package</h4>
                        <p id="summary-pkg-desc" style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 1rem;">Please select a package from Services page.</p>
                        <div id="dynamic-price-area"></div>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 0.8rem; margin-bottom: 2rem;">
                        <div style="display:flex; justify-content:space-between; font-size:0.95rem;"><span style="color: var(--text-secondary);">Setup Fee (One-time):</span><span id="summary-setup" style="color: var(--accent-warn); font-weight: 600;">RM 0</span></div>
                        <div style="display:flex; justify-content:space-between; font-size:0.95rem;"><span style="color: var(--text-secondary);">Recurring Price:</span><span id="summary-recurring" style="color: var(--text-main); font-weight: 600;">RM 0</span></div>
                        <div style="display:flex; justify-content:space-between; font-size:0.95rem;"><span style="color: var(--text-secondary);">Domain:</span><span id="summary-domain" style="color: var(--text-main); font-weight: 600;">RM 0</span></div>
                        <div style="display:flex; justify-content:space-between; font-size:0.95rem;"><span style="color: var(--text-secondary);">Maintenance:</span><span id="summary-maintenance" style="color: var(--text-main); font-weight: 600;">None</span></div>
                        <div id="row-discount" style="display:none; justify-content:space-between; font-size:0.95rem; color: var(--accent-success);"><span style="display:flex; align-items:center;">Discount: <strong id="summary-promo-code" style="margin: 0 5px;"></strong><i class="ri-close-circle-fill" style="margin-left:5px; cursor:pointer;" onclick="removeVoucher()"></i></span><span id="summary-discount-val">-RM 0</span></div>
                    </div>
                    <div style="display:flex; justify-content:space-between; font-size: 1.5rem; font-weight: 800; color: var(--text-main); border-top: 1px solid var(--border-glass); padding-top: 20px; margin-top: 20px;"><span>Total Due</span><span id="summary-final-total" style="color: var(--soft-black);">RM 0</span></div>
                    <div id="deposit-note-container" style="margin-top: 10px; text-align: right;">
                        <div id="deposit-note" style="font-size: 0.8rem; color: var(--accent-warn); margin-bottom: 5px; font-weight: 600; display:none;">Deposit Required (50%): RM 0</div>
                        <div class="payment-options" style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button type="button" class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.8rem;" id="btn-pay-full" onclick="setPaymentMode('full')">Pay Full</button>
                            <button type="button" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.8rem;" id="btn-pay-deposit" onclick="setPaymentMode('deposit')">Pay Deposit</button>
                        </div>
                    </div>
                </div>
                <!-- RIGHT COLUMN -->
                <div class="glass-card">
                    <h3 style="margin-bottom: 2rem; color: var(--text-main);">Configuration</h3>
                    <form id="checkoutForm" onsubmit="return false;">
                        <div class="form-group">
                            <label class="form-label">Personal Details <span id="auto-fill-label" style="font-size: 0.7rem; color: var(--soft-black); display: none;">(Auto-filled)</span></label>
                            <div class="profile-details-grid">
                                <input type="text" id="co-name" class="form-input" placeholder="Full Name" required>
                                <input type="tel" id="co-phone" class="form-input" placeholder="Phone Number" required>
                                <input type="email" id="co-email" class="form-input" placeholder="Email" required>
                                <input type="text" id="co-company" class="form-input" placeholder="Company Name (Optional)">
                            </div>
                        </div>
                        <div id="checkout-voucher-section" style="display: none; margin-bottom: 2rem;">
                            <div class="glass-card" style="padding: 1rem; margin-bottom:0; display:flex; justify-content:space-between; align-items:center; border-color: rgba(30, 41, 59, 0.2);">
                                <div class="voucher-info"><h4 id="checkout-voucher-title" style="color:var(--text-main); font-size:0.9rem; margin-bottom:2px;">Gift Voucher Available</h4><p id="checkout-voucher-text" style="color:var(--soft-black); font-weight:700; font-size:0.8rem;">-</p></div>
                                <button type="button" id="btn-apply-voucher" class="btn btn-primary" style="width: auto; padding: 0.6rem 1.5rem;" onclick="applyPersonalVoucher()">Apply</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Domain Choice</label>
                            <div class="radio-group">
                                <div class="radio-option selected" onclick="updateDomain('sub', this)"><input type="radio" name="domain_type" value="sub" checked> <span style="font-size: 0.95rem; color: var(--text-main);">DDNetwork Subdomain (Free 1st Year)</span></div>
                                <div class="radio-option" onclick="updateDomain('custom', this)"><input type="radio" name="domain_type" value="custom"> <span style="font-size: 0.95rem; color: var(--text-main);">I have my own domain</span></div>
                            </div>
                            <div id="input-subdomain" style="margin-top: 10px;"><input type="text" id="subdomain-text" class="form-input" placeholder="yourname" oninput="updateSummaryText()"><span style="font-size: 0.8rem; color: var(--text-tertiary); margin-top: 5px; display: block;">URL: <span id="url-preview" style="color: var(--soft-black); font-weight: 700;">.ddnet.my</span></span></div>
                            <div id="input-custom" style="display: none; margin-top: 10px;"><input type="text" id="custom-domain-text" class="form-input" placeholder="www.example.com" oninput="updateSummaryText()"></div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Maintenance Plan (Optional)</label>
                            <div class="radio-group">
                                <div class="radio-option selected" onclick="updateMaintenance('none', this)"><input type="radio" name="maint" value="none" checked> None</div>
                                <div class="radio-option" onclick="updateMaintenance('basic', this)"><input type="radio" name="maint" value="basic"> Basic (+RM 50/mo)</div>
                                <div class="radio-option" onclick="updateMaintenance('business', this)"><input type="radio" name="maint" value="business"> Business (+RM 100/mo)</div>
                            </div>
                        </div>
                        <div class="form-group" style="margin-top: 2rem;">
                            <label class="form-label">Promo Code (Optional)</label>
                            <div style="display: flex; gap: 10px;"><input type="text" id="promo-input" class="form-input" placeholder="e.g. PROMO10%" style="text-transform: uppercase;"><button type="button" class="btn btn-glass" onclick="applyPromo()" style="padding: 0 1.5rem; min-width: 70px;">Apply</button></div>
                            <p style="font-size: 0.7rem; color: var(--text-tertiary); margin-top: 5px;">*Promo codes are for logged-in users only.</p>
                        </div>
                        <div style="border: 0; border-top: 1px solid var(--border-glass); margin: 2rem 0;"></div>
                        <div class="form-group" style="background: rgba(255,255,255,0.8); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border-glass);">
                            <label style="display: flex; align-items: flex-start; gap: 12px; cursor: pointer; font-size: 0.9rem; line-height: 1.5;">
                                <input type="checkbox" id="terms-check" style="margin-top: 4px; width: 18px; height: 18px; accent-color: var(--soft-black);">
                                <span style="color: var(--text-secondary);">I have read and agreed to <span class="auth-link" onclick="openTermsModal()">Terms & Conditions</span>.</span>
                            </label>
                        </div>
                        <div class="form-group" style="margin-bottom: 1rem; font-size: 0.9rem; color: var(--text-secondary); background: #f8fafc; padding: 0.5rem; border-radius: 8px; border: 1px solid var(--border-glass);"><i class="ri-secure-payment-line" style="color: var(--accent-success);"></i> <strong>Secure Payment via Razorpay (Curlec)</strong></div>
                        <div id="checkout-actions"><button type="button" id="btn-pay-now" class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;" onclick="initiateRazorpayPayment()"><i class="ri-credit-card-2-fill" style="margin-right:8px;"></i> Pay Now</button></div>
                        <div id="manual-confirm-section">
                            <i class="ri-checkbox-circle-fill manual-confirm-icon"></i>
                            <h3 style="margin-bottom: 0.5rem; color: var(--soft-black);">Payment Window Opened</h3>
                            <p style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 1.5rem;">Please complete your payment in the Razorpay window. Once done, click the button below to finalize your order.</p>
                            <button type="button" class="btn btn-primary" style="width: 100%; font-size: 1.1rem; padding: 1rem;" onclick="handleManualConfirmation()">I have made payment</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- PAGE: THANK YOU -->
        <section id="thank-you" class="page-section">
            <div class="auth-container">
                <div class="glass-card auth-card">
                    <div style="width: 80px; height: 80px; background: #ecfdf5; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 2rem;"><i class="ri-check-line" style="font-size: 3rem; color: var(--accent-success);"></i></div>
                    <h2 style="margin-bottom: 1rem;">Order Placed Successfully!</h2>
                    <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: 2rem; line-height: 1.6;">Thank you for choosing DDNetwork One. We have received your order and payment details.<br>Our team will review your order and contact you via WhatsApp/Email within 24 hours.</p>
                    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;"><button class="btn btn-primary" onclick="navigateTo('/')">Return Home</button><button class="btn btn-glass" onclick="navigateTo('/profile')">My Profile</button></div>
                </div>
            </div>
        </section>

        <!-- PAGE: CLIENTS -->
        <section id="clients" class="page-section">
            <div class="text-center" style="margin-bottom: 3rem;"><h2 style="font-size: 1.8rem; margin-bottom: 0.5rem;">Portfolio</h2><p style="color: var(--text-secondary);">Trusted by forward-thinking businesses.</p></div>
            <div id="portfolio-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;"><div class="text-center" style="grid-column: 1/-1; color: var(--text-tertiary);">Loading portfolio...</div></div>
        </section>

        <!-- PAGE: CONTACT -->
        <section id="contact" class="page-section">
            <div class="container" style="max-width: 800px;">
                <div class="glass-card auth-card">
                    <i class="ri-mail-send-fill" style="font-size: 3rem; color: var(--soft-black); margin-bottom: 1rem;"></i>
                    <h2 style="margin-bottom: 1rem;">Get In Touch</h2>
                    <p style="color: var(--text-secondary); margin-bottom: 2rem;">Have a custom project in mind? Send us a direct message.</p>
                    <form style="text-align: left;" onsubmit="handleContactSubmit(event)">
                        <div class="form-group"><label class="form-label">Name</label><input type="text" id="contact-name" class="form-input" placeholder="Your Name"></div>
                        <div class="form-group"><label class="form-label">Email</label><input type="email" id="contact-email" class="form-input" placeholder="hello@example.com"></div>
                        <div class="form-group"><label class="form-label">Message</label><textarea id="contact-message" rows="4" class="form-input" placeholder="Tell us about your project..."></textarea></div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">Send Message</button>
                    </form>
                    <div style="margin-top: 3rem; border-top: 1px solid var(--border-glass); padding-top: 2rem;"><p style="color: var(--text-main); font-weight: 700; margin-bottom: 0.5rem;">Email Us</p><a href="mailto:sales@ddnet.my" style="color: var(--soft-black); font-size: 1.2rem;">sales@ddnet.my</a></div>
                </div>
            </div>
        </section>

        <!-- PAGE: FOUNDER -->
        <section id="founder" class="page-section">
            <div class="glass-card" style="display: flex; flex-direction: column; align-items: center; text-align: center; padding: 3rem 1.5rem;">
                <img src="https://raw.githubusercontent.com/ddnetwork-ent/DDN-One/refs/heads/main/DD.JPG" alt="Danial Danish" style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 4px solid white; margin-bottom: 1.5rem;">
                <h2 style="margin-bottom: 0.5rem;">Danial Danish</h2>
                <p style="color: var(--soft-black); font-weight: 700; letter-spacing: 1px; text-transform: uppercase; font-size: 0.8rem; margin-bottom: 1.5rem;">Founder & Lead Developer</p>
                <p style="color: var(--text-secondary); max-width: 600px; line-height: 1.7; margin-bottom: 1.5rem;">"My journey began with a curiosity for code. What started as late-night experiments grew into DD Cloud Network, a company built on simplicity, speed, and thoughtful digital design.<br><br>Through DD Cloud Network, I created DDNetwork as a dedicated brand to help local businesses build a strong, modern presence in the digital world."</p>
                <div style="display: flex; gap: 1rem;">
                    <a href="https://www.linkedin.com/in/muhammad-danial-danish-217bb82ba/" style="width: 40px; height: 40px; background: var(--bg-surface); border-radius: 50%; display: flex; align-items: center; justify-content: center; border:1px solid var(--border-glass);"><i class="ri-linkedin-fill"></i></a>
                    <a href="https://www.instagram.com/danialddanish/" style="width: 40px; height: 40px; background: var(--bg-surface); border-radius: 50%; display: flex; align-items: center; justify-content: center; border:1px solid var(--border-glass);"><i class="ri-instagram-line"></i></a>
                </div>
            </div>
        </section>

        <!-- PAGE: UPDATES -->
        <section id="updates" class="page-section">
            <div class="auth-container" style="max-width: 800px;">
                <div class="glass-card auth-card" style="text-align: left;">
                    <div style="text-align: center; margin-bottom: 2rem;"><i class="ri-edit-circle-fill" style="font-size: 3rem; color: var(--soft-black); margin-bottom: 1rem;"></i><h2>Customer Requests</h2><p>Need to update content, upgrade, renew, or remove features? Submit your request here.</p></div>
                    <form onsubmit="handleRequestSubmit(event)">
                        <div class="form-group">
                            <label class="form-label">Personal Details</label>
                            <div class="profile-details-grid">
                                <input type="text" id="req-name" class="form-input" placeholder="Full Name" required>
                                <input type="tel" id="req-phone" class="form-input" placeholder="Phone Number" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Request Type</label>
                            <div class="radio-group">
                                <div class="radio-option" onclick="handleUpdateTypeChange('content', this)"><input type="radio" name="req_type" value="content" checked><div><div style="font-weight: 700; color: var(--text-main);">Update Content</div><div style="font-size: 0.8rem; color: var(--text-secondary);">Change text, images, or add new info.</div></div></div>
                                <div class="radio-option" onclick="handleUpdateTypeChange('upgrade', this)"><input type="radio" name="req_type" value="upgrade"><div><div style="font-weight: 700; color: var(--text-main);">Upgrade Plan</div><div style="font-size: 0.8rem; color: var(--text-secondary);">Move to a higher tier package.</div></div></div>
                                <div class="radio-option" onclick="handleUpdateTypeChange('renew', this)"><input type="radio" name="req_type" value="renew"><div><div style="font-weight: 700; color: var(--text-main);">Renew Plan</div><div style="font-size: 0.8rem; color: var(--text-secondary);">Extend your current subscription.</div></div></div>
                                <div class="radio-option" onclick="handleUpdateTypeChange('remove', this)"><input type="radio" name="req_type" value="remove"><div><div style="font-weight: 700; color: var(--text-main);">Remove Content</div><div style="font-size: 0.8rem; color: var(--text-secondary);">Delete specific pages or features.</div></div></div>
                            </div>
                        </div>
                        <div id="dynamic-fields-container">
                            <div id="field-content">
                                <div class="form-group"><label class="form-label">Describe Changes</label><textarea id="req-desc-content" class="form-input" rows="4" placeholder="e.g. Change phone number..."></textarea></div>
                                <div style="padding: 1rem; background: rgba(241, 245, 249, 0.5); border: 1px dashed var(--soft-black); border-radius: 8px; color: var(--soft-black); font-size: 0.85rem; line-height: 1.5;"><i class="ri-whatsapp-line"></i> <strong>Important:</strong> Please send any images or files via WhatsApp after submitting.</div>
                            </div>
                            <div id="field-upgrade" class="hidden">
                                <div class="profile-details-grid">
                                    <div class="form-group"><label class="form-label">Current Plan</label><select id="req-current-plan" class="form-select"><option value="Basic HTML Website">Basic HTML Website</option><option value="Front-End Website">Front-End Website</option><option value="AI Powered Website">AI Powered Website</option><option value="Front-End + Portal">Front-End + Portal</option><option value="Portal Standalone">Portal Standalone</option></select></div>
                                    <div class="form-group"><label class="form-label">Desired Plan</label><select id="req-new-plan" class="form-select"><option value="Basic HTML Website">Basic HTML Website</option><option value="Front-End Website">Front-End Website</option><option value="AI Powered Website">AI Powered Website</option><option value="Front-End + Portal">Front-End + Portal</option><option value="Portal Standalone">Portal Standalone</option></select></div>
                                </div>
                                <div class="form-group"><label class="form-label">Additional Notes</label><textarea id="req-desc-upgrade" class="form-input" rows="3"></textarea></div>
                            </div>
                            <div id="field-renew" class="hidden">
                                <div class="form-group"><label class="form-label">Plan to Renew</label><select id="req-renew-plan" class="form-select"><option value="Basic HTML Website">Basic HTML Website</option><option value="Front-End Website">Front-End Website</option><option value="AI Powered Website">AI Powered Website</option><option value="Maintenance Only">Maintenance Only</option></select></div>
                            </div>
                            <div id="field-remove" class="hidden">
                                <div class="form-group" style="background: #fef2f2; padding: 1rem; border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3);"><label class="form-label" style="color: #ef4444;">What to Remove?</label><textarea id="req-desc-remove" class="form-input" rows="3"></textarea></div>
                            </div>
                        </div>
                        <button type="submit" id="btn-submit-request" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Submit Request</button>
                    </form>
                </div>
            </div>
        </section>

    </main>

    <!-- FOOTER -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col footer-brand">
                    <a href="/" onclick="routeLink(event, '/')" style="cursor: pointer;"><span class="company-name">DDNetwork<span style="color:var(--text-tertiary)">One</span></span></a>
                    <p>Designed in Malaysia.<br> Built for the world.</p>
                </div>
                <div class="footer-col">
                    <h4>Support</h4>
                    <ul class="footer-links">
                        <li><a href="#" onclick="navigateTo('/helpdesk')">Contact Support</a></li>
                        <li><a href="#" onclick="navigateTo('/reviews')">Customer Reviews</a></li>
                        <li><a href="#" onclick="navigateTo('/updates')">Customer Updates</a></li>
                        <li><a href="#" onclick="navigateTo('/terms')">Terms & Conditions</a></li>
                        <li><a href="#" onclick="navigateTo('/privacy')">Privacy Policy</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Contact</h4>
                    <div class="footer-contact-item"><i class="ri-mail-send-fill"></i><span>sales@ddnet.my</span></div>
                    <div class="footer-contact-item"><i class="ri-whatsapp-line"></i><span>Not yet Available</span></div>
                </div>
            </div>
            <div class="footer-bottom">
                <p class="copyright">&copy; 20252026 DD Cloud Network  DDNetwork One  Reg. No. 202603040752 (MA0342542-K)</p>
                <div class="mac-dock">
                    <a href="https://www.linkedin.com/in/muhammad-danial-danish-217bb82ba/" target="_blank" class="dock-icon"><i class="ri-linkedin-fill"></i></a>
                    <a href="https://www.instagram.com/ddnet.my/" target="_blank" class="dock-icon"><i class="ri-instagram-line"></i></a>
                    <a href="https://tiktok.com/@danialddanish/" target="_blank" class="dock-icon"><i class="ri-tiktok-fill"></i></a>
                    <a href="https://x.com" target="_blank" class="dock-icon"><i class="ri-twitter-x-fill"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- TERMS MODAL -->
    <div id="termsModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeTermsModal()">&times;</span>
            <h2>Terms & Conditions</h2>
            <div class="modal-text">
                <p style="text-align:center; margin-bottom:2rem;">By accessing, engaging, or using any services provided by <strong>DDNetwork One</strong>, you acknowledge that you have read, understood, and agreed to be legally bound by these Terms & Conditions.</p>
                <h3>Hosting Terms</h3><p>Hosting is provided based on customers own custom domain. For new customers, a free ddnet.my subdomain is included for the first year only. After the free period, renewal of the ddnet.my subdomain is chargeable at RM 55 per year.</p>
                <p>Monthly subscription plans include hosting, server management, basic security updates, uptime monitoring, and technical support. One-time purchase plans include website development and deployment only. Ongoing maintenance, support, backups, updates, and content changes are not included and will be charged separately upon request. DDNetwork reserves the right to suspend hosting services in cases of non-payment, abuse, or violation of acceptable use policies.</p>
                <h3>1. Scope of Services</h3><p>Services provided are limited to what is explicitly stated in selected package or written agreement.</p><p>Any work not listed (including additional pages, features, redesigns, or custom functions) is considered <strong>out of scope</strong> and will be quoted separately.</p>
                <h3>11. Refund Policy</h3><p>All payments made are <strong>non-refundable</strong>, unless otherwise stated in writing.</p><p>Setup fees and completed work are strictly non-refundable.</p>
                <p style="margin-top: 3rem; font-weight: 700; text-align:center;">&copy; 20252026 DD Cloud Network  DDNetwork</p>
            </div>
        </div>
    </div>

    <!-- CHAT WIDGET SCRIPT -->
    <script src="https://app.livechatai.com/embed.js" data-id="cmlas1njr0001jj04hi5ygd18" async defer></script>
</body>
</html>

<!-- JAVASCRIPT -->
<script>
    // Preloader Removal
    window.addEventListener('load', () => {
        const preloader = document.getElementById('preloader');
        preloader.style.opacity = '0';
        setTimeout(() => { preloader.style.display = 'none'; }, 600);
    });

    // ==========================================
    // SEO TITLES CONFIGURATION
    // ==========================================
    const PAGE_TITLES = {
        '/': 'DDNetwork by DD Cloud Network',
        '/home': 'DDNetwork',
        '/pricing': 'Pricing Packages',
        '/reviews': 'Client Reviews',
        '/order': 'Secure Checkout',
        '/clients': 'Portfolio & Clients',
        '/founder-danialdanish': 'Danial Danish  Founder',
        '/login': 'Login',
        '/signup': 'Sign Up',
        '/profile': 'User Profile',
        '/profile-website-describe': 'Describe Website Idea',
        '/helpdesk': 'Support Helpdesk @ DDNetwork',
        '/contact': 'Contact Us @ DDNetwork',
        '/forgot-password': 'Reset Password',
        '/thank-you': 'Order Successful - DDNetwork',
        '/updates': 'Customer Requests',
        '/about-company': 'About Company',
        '/terms': 'Terms & Conditions',
        '/faq': 'Frequently Asked Questions',
        '/privacy': 'Privacy Policy - DDNetwork'
    };

    function updatePageTitle(path) {
        const title = PAGE_TITLES[path] || 'DDNetwork One';
        document.title = title;
    }

    // ==========================================
    // UPDATED NOTIFICATION SYSTEM (CENTERED POPUP)
    // ==========================================
    
    function showToast(message, type = 'info') {
        let title = "Notice";
        if (type === 'success') title = "Success";
        if (type === 'error') title = "Error";
        if (type === 'warning') title = "Warning";
        
        showGlassModal(title, message, type);
    }

    const modalOverlay = document.getElementById('glass-modal-overlay');
    const modalTitle = document.getElementById('glass-modal-title');
    const modalDesc = document.getElementById('glass-modal-desc');
    const modalBtn = document.getElementById('glass-modal-btn');
    const modalContainer = document.querySelector('.animated-notification-container');

    function showGlassModal(title, message, type = 'warning', btnText = 'Dismiss', btnCallback = null) {
        modalTitle.innerText = title;
        modalDesc.innerText = message;
        
        // Generate SVG Content
        let iconHTML = '';
        if (type === 'success') {
            iconHTML = `
                <div class="notif-icon-wrapper">
                    <svg class="checkmark-circle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                        <circle cx="50" cy="50" r="45"/>
                        <path class="checkmark-check" d="M30 50 L45 65 L70 35"/>
                    </svg>
                </div>`;
        } else if (type === 'error') {
                        iconHTML = `
                <div class="notif-icon-wrapper shake-wrapper">
                    <svg class="error-circle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                        <circle cx="50" cy="50" r="45"/>
                        <path class="error-x left" d="M35 35 L65 65"/>
                        <path class="error-x right" d="M65 35 L35 65"/>
                    </svg>
                </div>`;
        } else {
            // Default / Warning
            iconHTML = `<div class="warning-pulse"><i class="ri-information-line"></i></div>`;
        }

        // Clean up previous icons if any
        const existingIcon = modalContainer.querySelector('.notif-icon-wrapper, .warning-pulse');
        if (existingIcon) existingIcon.remove();

        // Insert new icon before title
        modalContainer.insertAdjacentHTML('afterbegin', iconHTML);

        // Display Logic
        modalOverlay.style.display = 'flex';
        // Trigger reflow for animation
        void modalOverlay.offsetWidth; 
        modalOverlay.classList.add('active');

        // Auto-Close Logic (3 Seconds)
        clearTimeout(window.modalTimer);
        window.modalTimer = setTimeout(() => {
            closeModal();
        }, 3000);

        // Manual Close Handler
        modalBtn.onclick = () => {
            clearTimeout(window.modalTimer);
            closeModal();
            if (btnCallback) btnCallback();
        };

        function closeModal() {
            modalOverlay.classList.remove('active');
            setTimeout(() => {
                modalOverlay.style.display = 'none';
                // Cleanup SVG
                const wrapper = modalContainer.querySelector('.notif-icon-wrapper, .warning-pulse');
                if(wrapper) wrapper.remove();
            }, 400); // Match CSS transition
        }
    }

    // ==========================================
    // PASSWORD VALIDATION FUNCTION
    // ==========================================
    function checkPasswordStrength() {
        const password = document.getElementById('signup-password').value;
        const reqUpper = document.getElementById('req-upper');
        const reqLower = document.getElementById('req-lower');
        const reqNum = document.getElementById('req-num');
        const reqLen = document.getElementById('req-len');

        if (/[A-Z]/.test(password)) { reqUpper.classList.add('valid'); reqUpper.innerHTML = '<i class="ri-checkbox-circle-fill"></i> Uppercase'; } 
        else { reqUpper.classList.remove('valid'); reqUpper.innerHTML = '<i class="ri-close-circle-line"></i> Uppercase'; }

        if (/[a-z]/.test(password)) { reqLower.classList.add('valid'); reqLower.innerHTML = '<i class="ri-checkbox-circle-fill"></i> Lowercase'; } 
        else { reqLower.classList.remove('valid'); reqLower.innerHTML = '<i class="ri-close-circle-line"></i> Lowercase'; }

        if (/[0-9]/.test(password)) { reqNum.classList.add('valid'); reqNum.innerHTML = '<i class="ri-checkbox-circle-fill"></i> Number'; } 
        else { reqNum.classList.remove('valid'); reqNum.innerHTML = '<i class="ri-close-circle-line"></i> Number'; }

        if (password.length >= 6) { reqLen.classList.add('valid'); reqLen.innerHTML = '<i class="ri-checkbox-circle-fill"></i> Min 6 chars'; } 
        else { reqLen.classList.remove('valid'); reqLen.innerHTML = '<i class="ri-close-circle-line"></i> Min 6 chars'; }
    }

    // ==========================================
    // WEBSITE IDEA SUCCESS MODAL LOGIC
    // ==========================================
    function closeIdeaSuccessModal() {
        const modal = document.getElementById('idea-success-modal');
        modal.classList.remove('active');
        setTimeout(() => { modal.style.display = 'none'; navigateTo('/'); }, 300);
    }

    // ==========================================
    // FAQ ACCORDION LOGIC
    // ==========================================
    function toggleFaq(element) {
        const item = element.parentElement;
        const answer = item.querySelector('.faq-answer');
        item.classList.toggle('active');
        if (item.classList.contains('active')) { answer.style.maxHeight = (answer.scrollHeight + 50) + "px"; } 
        else { answer.style.maxHeight = null; }
    }

    // ==========================================
    // PRICING DATA & TOGGLE LOGIC
    // ==========================================
    let PRICING_DATA = {
        html: { oneTime: 249, monthly: 39, setupFee: 100, desc: "1 Static Landing Page. Mobile Responsive. Basic SEO." },
        frontend: { oneTime: 1399, monthly: 99, setupFee: 200, desc: "Up to 5 Pages. Animations & Interactive UI." },
        bundle: { oneTime: 3499, monthly: 249, setupFee: 700, desc: "Full website & internal management." },
        ai: { oneTime: 2499, monthly: 149, setupFee: 400, desc: "Advanced automation & chatbots." },
        portal: { oneTime: 3999, monthly: 279, setupFee: 700, desc: "Internal portal for existing sites." }
    };

    let billingCycle = 'monthly'; 

    function setBilling(cycle) {
        billingCycle = cycle;
        const toggle = document.getElementById('billing-toggle');
        if(cycle === 'onetime') toggle.checked = true; else toggle.checked = false;
        updatePricingUI();
        if(state.domainType === 'sub') updateDomain('sub', document.querySelector('input[name="domain_type"][value="sub"]').parentElement);
    }

    function toggleBilling() {
        const toggle = document.getElementById('billing-toggle');
        billingCycle = toggle.checked ? 'onetime' : 'monthly';
        updatePricingUI();
        if(state.domainType === 'sub') updateDomain('sub', document.querySelector('input[name="domain_type"][value="sub"]').parentElement);
    }

    function updatePricingUI() {
        const labelMonthly = document.getElementById('label-monthly');
        const labelOnetime = document.getElementById('label-onetime');
        if(billingCycle === 'monthly') { labelMonthly.classList.add('active'); labelOnetime.classList.remove('active'); } 
        else { labelMonthly.classList.remove('active'); labelOnetime.classList.add('active'); }

        const keys = ['html', 'frontend', 'bundle', 'ai', 'portal'];
        keys.forEach(key => {
            const priceEl = document.getElementById(`price-${key}`);
            const periodEl = document.getElementById(`period-${key}`);
            const setupEl = document.getElementById(`${key}-setup-display`);
            const featMaint = document.getElementById(`${key}-feat-maint`);
            const featContent = document.getElementById(`${key}-feat-content`);
            const featNoSupport = document.getElementById(`${key}-feat-no-support`);
            const featContentCharge = document.getElementById(`${key}-feat-content-charge`);

            if(priceEl && periodEl) {
                if (billingCycle === 'onetime') {
                    priceEl.innerText = `RM ${PRICING_DATA[key].oneTime}`;
                    periodEl.innerText = '/one-time';
                    if(setupEl) setupEl.classList.add('hidden');
                    if(featMaint) featMaint.classList.add('hidden');
                    if(featContent) featContent.classList.add('hidden');
                    if(featNoSupport) featNoSupport.classList.remove('hidden');
                    if(featContentCharge) featContentCharge.classList.remove('hidden');
                } else {
                    priceEl.innerText = `RM ${PRICING_DATA[key].monthly}`;
                    periodEl.innerText = '/month';
                    if(setupEl) setupEl.classList.remove('hidden');
                    if(featMaint) featMaint.classList.remove('hidden');
                    if(featContent) featContent.classList.remove('hidden');
                    if(featNoSupport) featNoSupport.classList.add('hidden');
                    if(featContentCharge) featContentCharge.classList.add('hidden');
                }
            }
        });
    }

    // ==========================================
    // FRONTEND ROUTING
    // ==========================================
    const routes = {
        '/': 'home', '/home': 'home', '/pricing': 'services', '/reviews': 'reviews', '/order': 'buynow', '/clients': 'clients',
        '/founder-danialdanish': 'founder', '/login': 'login', '/signup': 'signup', '/profile': 'profile',
        '/helpdesk': 'helpdesk', '/contact': 'contact', '/forgot-password': 'forgot-password',
        '/thank-you': 'thank-you', '/updates': 'updates', '/profile-website-describe': 'profile-website-describe',
        '/about-company': 'about-company', '/terms': 'terms', '/faq': 'faq', '/privacy': 'privacy'
    };

    function routeLink(event, path) { event.preventDefault(); navigateTo(path); }

    function navigateTo(path) {
        const sectionId = routes[path];
        if (!sectionId) return;
        window.history.pushState({ path: path }, "", path);
        updatePageTitle(path);
        performTransition(sectionId);
    }

    window.addEventListener('popstate', (event) => {
        if (event.state && event.state.path) {
            performTransition(routes[event.state.path]);
            updatePageTitle(event.state.path);
        } else {
            const path = window.location.pathname;
            performTransition(routes[path] || 'home');
            updatePageTitle(path);
        }
    });

    function handleInitialRoute() {
        const path = window.location.pathname;
        const target = routes[path] || 'home'; 
        performTransition(target, true);
        updatePageTitle(path);
    }

    let isTransitioning = false;

    function performTransition(targetSectionId, isInstant = false) {
        if (isTransitioning) return;
        isTransitioning = true;

        const currentSection = document.querySelector('.page-section.active');
        const targetSection = document.getElementById(targetSectionId);

        if (currentSection === targetSection) {
            isTransitioning = false;
            return;
        }

        if(currentSection && currentSection.id === 'home') {
            if (animationId) { cancelAnimationFrame(animationId); animationId = null; }
        }

        const transitionDuration = 400; 

        const showNewSection = () => {
            if (currentSection) {
                currentSection.classList.remove('active');
                currentSection.classList.remove('leaving');
                currentSection.style.display = 'none';
            }

            window.scrollTo(0, 0);

            targetSection.style.display = 'block';
            void targetSection.offsetWidth;
            targetSection.classList.add('active');

            // Logic Hooks
            if(targetSectionId === 'profile') loadProfilePageData();
            if(targetSectionId === 'reviews') loadReviewsMarquee();
            if(targetSectionId === 'buynow' && auth && auth.currentUser) fetchAndSyncUserData(auth.currentUser.uid);
            if(targetSectionId === 'updates' && auth && auth.currentUser) fetchAndSyncUserData(auth.currentUser.uid);
            if(targetSectionId === 'home') { startGlobeAnimation(); loadHomePortfolio(); }
            if(targetSectionId === 'clients') loadPortfolio();

            isTransitioning = false;
        };

        if (isInstant) {
            showNewSection();
        } else {
            if (currentSection) {
                currentSection.classList.add('leaving');
            }
            setTimeout(showNewSection, transitionDuration);
        }
    }
    
    setTimeout(handleInitialRoute, 100);

    // ==========================================
    // FIREBASE & APP LOGIC
    // ==========================================
    const firebaseConfig = {
        apiKey: "AIzaSyAwf31b-wpYQwPbd-3DxnqGVRw8g3xq938",
        authDomain: "ddnetwork-database.firebaseapp.com",
        projectId: "ddnetwork-database",
        storageBucket: "ddnetwork-database.firebasestorage.app",
        messagingSenderId: "699127560990",
        appId: "1:699127560990:web:vg8k3pcvhkomoeb99tr333960v6ohj5m."
    };

    let db, auth;
    let ADMIN_EMAIL = "ddnetwork.one@outlook.com";
    let currentUserPersonalVoucher = null;
    
    const RAZORPAY_KEY_ID = "rzp_live_SEL3cH71UlI5YI"; 
    const RAZORPAY_CURRENCY = "MYR";

    let siteConfig = { maintenance_active: false, payment_methods: [], packageDetails: {} };
    let currentUserRole = 'user'; 
    
    try {
        if(firebaseConfig.apiKey !== "YOUR_API_KEY_HERE") {
            firebase.initializeApp(firebaseConfig);
            db = firebase.firestore();
            auth = firebase.auth();
        }
    } catch(e) { console.error("Firebase init error:", e); }

    async function initializeDatabase() {
        if(!db) return;
        const configRef = db.collection("config").doc("site_settings");
        const doc = await configRef.get();
        if (!doc.exists) {
            await configRef.set({ maintenance_active: false, payment_methods: [] });
        }
    }

    function listenToConfig() {
        if(!db) return;
        db.collection("config").doc("site_settings").onSnapshot((doc) => {
            if (doc.exists) {
                const data = doc.data();
                if(data.maintenance_active) document.getElementById('maintenance-overlay').classList.add('active');
                else document.getElementById('maintenance-overlay').classList.remove('active');
            }
        });
    }

    function loadPortfolio() {
        if(!db) return;
        const container = document.getElementById('portfolio-grid');
        db.collection("clients_portfolio").where("status", "==", true).onSnapshot((snapshot) => {
            container.innerHTML = ''; 
            if (snapshot.empty) {
                container.innerHTML = '<div class="text-center" style="grid-column:1/-1; padding: 2rem; color: var(--text-tertiary);">No portfolio items available.</div>';
                return;
            }
            snapshot.forEach((doc) => {
                const data = doc.data();
                const cardHTML = `
                    <div class="glass-card" style="padding: 0; overflow: hidden;">
                        <div style="height: 200px; overflow: hidden;">
                            <img src="${data.img}" alt="${data.name}" style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                        </div>
                        <div style="padding: 1.5rem;">
                            <h4 style="margin-bottom: 0.5rem;">${data.name}</h4>
                            <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">Visit Website</p>
                            <a href="${data.link}" target="_blank" class="btn btn-glass" style="width: 100%; font-size: 0.8rem;">Visit Live Site</a>
                        </div>
                    </div>`;
                container.innerHTML += cardHTML;
            });
        });
    }

    let PROMO_CODES = {}; 
    if(db) {
        db.collection("config").doc("site_settings").onSnapshot((doc) => {
            if(doc.exists) siteConfig = { ...siteConfig, ...doc.data() };
            if(siteConfig.maintenance_active) document.getElementById('maintenance-overlay').classList.add('active');
            else document.getElementById('maintenance-overlay').classList.remove('active');
        });
        db.collection("promo_codes").onSnapshot((snapshot) => {
            PROMO_CODES = {};
            snapshot.forEach(doc => PROMO_CODES[doc.id] = doc.data().discount);
        });
        listenToConfig();
        loadPortfolio();
    }

    const ADMIN_PHONE_NO = "60122600969"; 
    
    let state = {
        packageType: null, packagePrice: 0, setupFee: 0, domainPrice: 0, maintenancePrice: 0,
        discountRate: 0, discountFixed: 0, discountType: 'percent', discountCode: '',
        domainType: 'sub', domainName: '', domainNameValid: false, billingCycle: 'monthly',
        isOneTime: false, paymentMode: 'full'
    };

    // ==========================================
    // REVIEWS LOGIC
    // ==========================================
    let selectedRating = 0;
    let reviewsCache = []; 

    const DUMMY_REVIEWS = [
        { rating: 5, userName: 'PNE Arena Enterprise', comment: 'Excellent service! The team was very professional and delivery was faster than expected.', timestamp: null },
    ];

    function setupStarRating() {
        const stars = document.querySelectorAll('.star-icon');
        const container = document.getElementById('star-input-container');
        const hiddenInput = document.getElementById('rating-value');

        stars.forEach(star => {
            star.addEventListener('mouseover', function() {
                const val = parseInt(this.getAttribute('data-val'));
                highlightStars(val);
            });
            
            star.addEventListener('click', function() {
                selectedRating = parseInt(this.getAttribute('data-val'));
                hiddenInput.value = selectedRating;
                highlightStars(selectedRating);
                document.getElementById('rating-error').style.display = 'none';
            });
        });

        container.addEventListener('mouseleave', function() {
            highlightStars(selectedRating);
        });
    }

    function highlightStars(count) {
        const stars = document.querySelectorAll('.star-icon');
        stars.forEach(star => {
            const val = parseInt(star.getAttribute('data-val'));
            if (val <= count) star.classList.add('selected');
            else star.classList.remove('selected');
        });
    }

    function listenToReviews() {
        if(!db) return;
        db.collection("customer_reviews").orderBy("timestamp", "desc").limit(20)
            .onSnapshot((snapshot) => {
                reviewsCache = []; 
                snapshot.forEach(doc => reviewsCache.push(doc.data()));
                loadReviewsMarquee();
            }, (error) => console.error("Error syncing reviews:", error));
    }

    function loadReviewsMarquee() {
        const row1 = document.getElementById('reviews-marquee-row-1');
        const row2 = document.getElementById('reviews-marquee-row-2');
        
        let allReviews = [...DUMMY_REVIEWS, ...reviewsCache];
        
        if (allReviews.length === 0) {
            row1.innerHTML = '<div class="review-marquee-item">No reviews yet.</div>';
            row2.innerHTML = '';
            return;
        }

        const createMarqueeHTML = (list) => list.map(data => {
            let starsHtml = '';
            for(let i=1; i<=5; i++) starsHtml += `<i class="${i <= data.rating ? 'ri-star-fill' : 'ri-star-line'}" style="color:${i<=data.rating?'var(--accent-star)':'#cbd5e1'}"></i>`;
            return `
                <div class="review-marquee-item">
                    <div class="rm-rating">${starsHtml}</div>
                    <div class="rm-text">"${data.comment.substring(0, 100)}${data.comment.length > 100 ? '...' : ''}"</div>
                    <div class="rm-author">- ${data.userName || 'User'}</div>
                </div>`;
        }).join('');

        const mid = Math.ceil(allReviews.length / 2);
        const list1 = allReviews.slice(0, mid);
        const list2 = allReviews.slice(mid);

        row1.innerHTML = createMarqueeHTML(list1) + createMarqueeHTML(list1);
        row2.innerHTML = createMarqueeHTML(list2) + createMarqueeHTML(list2);
    }

    function toggleFullReviews() {
        const list = document.getElementById('reviews-list');
        const btn = event.target;
        
        if (list.classList.contains('hidden')) {
            list.innerHTML = '';
            let allReviews = reviewsCache.length > 0 ? reviewsCache : DUMMY_REVIEWS;
            if(allReviews.length > 0) {
                allReviews.forEach(data => {
                    const date = data.timestamp ? new Date(data.timestamp.seconds * 1000).toLocaleDateString() : 'Recently';
                    const initials = (data.userName || 'User').substring(0, 2).toUpperCase();
                    let starsHtml = '';
                    for(let i=1; i<=5; i++) starsHtml += `<i class="${i <= data.rating ? 'ri-star-fill' : 'ri-star-line'}" style="color:${i<=data.rating?'var(--accent-star)':'#cbd5e1'}"></i>`;
                    const html = `
                        <div class="review-card">
                            <div class="review-header">
                                <div class="review-avatar">${initials}</div>
                                <div class="review-info"><h4>${data.userName || 'Anonymous'}</h4><div class="review-date">${date}</div></div>
                            </div>
                            <div class="review-stars">${starsHtml}</div>
                            <p class="review-text">"${data.comment}"</p>
                        </div>`;
                    list.innerHTML += html;
                });
            } else list.innerHTML = '<div class="text-center" style="grid-column: 1/-1;">No reviews found.</div>';
            list.classList.remove('hidden');
            btn.innerText = "Hide Reviews";
        } else {
            list.classList.add('hidden');
            btn.innerText = "View All Reviews";
        }
    }

    function handleReviewSubmit(e) {
        e.preventDefault();
        if(!auth || !auth.currentUser) return showGlassModal("Login Required", "You must be logged in to submit a review.", "warning", "Login", () => navigateTo('/login'));

        if(selectedRating === 0) return showGlassModal("Rating Missing", "Please select a star rating.", "warning");

        const comment = document.getElementById('review-comment').value;
        const user = auth.currentUser;
        let displayName = user.email.split('@')[0];
        
        db.collection("users").doc(user.uid).get().then(doc => {
            if(doc.exists && doc.data().name) displayName = doc.data().name;
            const reviewData = { userId: user.uid, userName: displayName, userEmail: user.email, rating: selectedRating, comment: comment, timestamp: firebase.firestore.FieldValue.serverTimestamp(), status: 'approved' };
            return db.collection("customer_reviews").add(reviewData);
        }).then(() => {
            showGlassModal("Success", "Review submitted successfully!", "success");
            document.getElementById('review-form').reset();
            selectedRating = 0;
            highlightStars(0);
        }).catch(err => {
            console.error(err);
            showGlassModal("Error", "Failed to submit review.", "error");
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        setupStarRating();
        listenToReviews();
    });

    // ==========================================
    // AUTH & USER DATA
    // ==========================================
    
    // --- HYPERPACE LOGIN ANIMATION LOGIC (BLACK & WHITE) ---
    let warpAnimationId = null;
    const warpCanvas = document.getElementById('warp-canvas');
    const warpCtx = warpCanvas ? warpCanvas.getContext('2d') : null;
    let warpStars = [];
    let warpSpeed = 0;
    let isWarping = false;

    function initWarpStars() {
        if(!warpCanvas) return;
        warpCanvas.width = window.innerWidth;
        warpCanvas.height = window.innerHeight;
        warpStars = [];
        for(let i=0; i<800; i++){
            warpStars.push({
                x: (Math.random()-0.5)*warpCanvas.width,
                y: (Math.random()-0.5)*warpCanvas.height,
                z: Math.random()*warpCanvas.width
            });
        }
    }

    function animateWarp() {
        if(!warpCtx) return;
        const cx = warpCanvas.width / 2;
        const cy = warpCanvas.height / 2;
        
        // Black Background
        warpCtx.fillStyle = "#000000"; 
        warpCtx.fillRect(0, 0, warpCanvas.width, warpCanvas.height);

        for(let star of warpStars){
            star.z -= warpSpeed;
            if(star.z <= 0){
                star.z = warpCanvas.width;
                star.x = (Math.random()-0.5)*warpCanvas.width;
                star.y = (Math.random()-0.5)*warpCanvas.height;
            }
            let k = 128.0 / star.z;
            let px = star.x * k + cx;
            let py = star.y * k + cy;
            let size = (1 - star.z/warpCanvas.width) * 3.5;
            
            // White Stars
            warpCtx.fillStyle = "#ffffff"; 
            warpCtx.fillRect(px, py, size, size);

            if(isWarping && warpSpeed > 5){
                // White Trail
                const gradient = warpCtx.createLinearGradient(px, py, px - star.x*0.03, py - star.y*0.03);
                gradient.addColorStop(0, "rgba(255,255,255,0.8)"); 
                gradient.addColorStop(1, "rgba(255,255,255,0)");
                warpCtx.strokeStyle = gradient;
                warpCtx.lineWidth = size * 0.8;
                warpCtx.beginPath();
                warpCtx.moveTo(px, py);
                warpCtx.lineTo(px - star.x*0.05, py - star.y*0.05);
                warpCtx.stroke();
            }
        }
        warpAnimationId = requestAnimationFrame(animateWarp);
    }

    function triggerLoginSuccessAnimation(onCompleteCallback, userName) {
        const overlay = document.getElementById('warp-transition-overlay');
        const flash = document.getElementById('warp-flash');
        const welcomeText = document.getElementById('warp-welcome-text');
        
        if(!overlay) {
            if(onCompleteCallback) onCompleteCallback();
            return;
        }

        const displayName = userName || 'Traveler';
        welcomeText.innerHTML = `Welcome <span>${displayName}</span>`;
        
        warpSpeed = 0;
        isWarping = false;
        initWarpStars();
        
        if(warpAnimationId) cancelAnimationFrame(warpAnimationId);
        animateWarp();
        overlay.classList.add('active');

        isWarping = true;
        
        // 1. Accelerate (0s - 2s)
        let accelerate = setInterval(()=>{
            warpSpeed += 3; 
            if (warpSpeed >= 80){
                clearInterval(accelerate);
            }
        }, 30);
        
        // 2. Show Welcome Text (at 1.5s)
        setTimeout(() => {
            welcomeText.style.opacity = "1";
        }, 1500);
        
        // 3. Flash & Decelerate (at 4s)
        setTimeout(() => {
            // White Flash
            flash.style.opacity = "1";
            welcomeText.style.opacity = "0"; 
            
            clearInterval(accelerate);
            
            let decelerate = setInterval(() => {
                warpSpeed -= 10;
                if (warpSpeed <= 0) {
                    warpSpeed = 0;
                    clearInterval(decelerate);
                }
            }, 20);

        }, 4000); 

        // 4. End (at 5s)
        setTimeout(()=>{
            flash.style.opacity = "0";
            overlay.classList.remove('active');
            
            if(warpAnimationId) cancelAnimationFrame(warpAnimationId);
            warpAnimationId = null;
            isWarping = false;

            if(onCompleteCallback) onCompleteCallback();
        }, 5000); 
    }

    // --- Friendly Error Messages ---
    function getFirebaseErrorMessage(error) {
        switch (error.code) {
            case 'auth/user-not-found': return "No account found with this email address.";
            case 'auth/wrong-password': return "Incorrect password. Please try again.";
            case 'auth/invalid-login-credentials': return "Invalid email or password. Please try again.";
            case 'auth/invalid-credential': return "The provided credentials are invalid.";
            case 'auth/email-already-in-use': return "This email is already registered. Please login.";
            case 'auth/weak-password': return "Password should be at least 6 characters.";
            case 'auth/invalid-email': return "Please enter a valid email address.";
            case 'auth/too-many-requests': return "Access temporarily disabled due to many failed attempts. Reset password or try later.";
            case 'auth/user-disabled': return "This account has been disabled. Contact support.";
            case 'auth/popup-closed-by-user': return "Sign-in process was cancelled.";
            case 'auth/network-request-failed': return "Network error. Please check your connection.";
            default: return "An unexpected error occurred. Please try again.";
        }
    }

    function handleGoogleAuth() {
        if(!auth) return showGlassModal("Error", "Auth not initialized", "error");
        const provider = new firebase.auth.GoogleAuthProvider();
        auth.signInWithPopup(provider).then((result) => {
            const user = result.user;
            db.collection("users").doc(user.uid).get().then((doc) => {
                if (!doc.exists) {
                    return db.collection("users").doc(user.uid).set({
                        name: user.displayName || 'Google User', email: user.email, phone: '', role: 'user',
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                }
            }).then(() => {
                const name = user.displayName || user.email.split('@')[0];
                triggerLoginSuccessAnimation(() => {
                    navigateTo('/');
                }, name);
            });
        }).catch((error) => {
            console.error(error);
            const friendlyMsg = getFirebaseErrorMessage(error);
            showGlassModal("Error", friendlyMsg, "error");
        });
    }

    if(auth) {
        auth.onAuthStateChanged((user) => {
            if (user) {
                db.collection("users").doc(user.uid).get().then((doc) => {
                    if (doc.exists) {
                        const data = doc.data();
                        currentUserRole = data.role || 'user'; 
                        updateHeaderForUser(user); 
                        if(data.personalVoucher) { currentUserPersonalVoucher = data.personalVoucher; showVoucherCard(data.personalVoucher); } 
                        else { currentUserPersonalVoucher = null; hideVoucherCard(); }
                        fetchAndSyncUserData(user.uid);
                        if(!data.phone) {
                            showGlassModal("Profile Incomplete", "Please complete your profile (Phone Number).", "warning");
                            if(window.location.pathname !== '/profile') setTimeout(() => navigateTo('/profile'), 1000);
                        }
                    }
                });
            } else {
                updateHeaderForGuest(); clearUserData(); hideVoucherCard();
            }
        });
    }

    function loadProfilePageData() {
        if(!auth || !auth.currentUser) return;
        const profFields = ['prof-name', 'prof-phone', 'prof-email', 'prof-company'];
        profFields.forEach(id => document.getElementById(id).value = "Loading...");
        db.collection("users").doc(auth.currentUser.uid).get().then((doc) => {
            if (doc.exists) {
                const data = doc.data();
                if(data.name) document.getElementById('prof-name').value = data.name;
                if(data.phone) document.getElementById('prof-phone').value = data.phone;
                if(data.email) document.getElementById('prof-email').value = data.email || auth.currentUser.email;
                if(data.company) document.getElementById('prof-company').value = data.company;
                if(data.personalVoucher) showVoucherCard(data.personalVoucher); else hideVoucherCard();
                loadOrderHistory(auth.currentUser.uid);
            }
        }).catch((error) => showGlassModal("Error", "Error loading profile data.", "error"));
    }

    function loadOrderHistory(uid) {
        if(!db) return;
        const tbody = document.getElementById('order-history-body');
        const container = document.getElementById('profile-history-section');
        const noMsg = document.getElementById('no-orders-msg');
        
        container.style.display = 'block';
        tbody.innerHTML = '<tr><td colspan="4" style="text-align:center;">Loading...</td></tr>';

        db.collection("orders").where("userId", "==", uid).orderBy("timestamp", "desc").limit(10)
            .onSnapshot((snapshot) => {
                tbody.innerHTML = '';
                if (snapshot.empty) {
                    noMsg.classList.remove('hidden');
                    tbody.parentElement.style.display = 'none';
                } else {
                    noMsg.classList.add('hidden');
                    tbody.parentElement.style.display = 'table';
                    snapshot.forEach((doc) => {
                        const data = doc.data();
                        const date = data.timestamp ? new Date(data.timestamp.seconds * 1000).toLocaleDateString() : '-';
                        const total = data.total || 'RM 0';
                        const pkg = data.package || 'Unknown Package';
                        const status = data.status || 'Pending';
                        let statusClass = 'status-pending';
                        if(status === 'Paid') statusClass = 'status-paid';
                        if(status === 'Completed') statusClass = 'status-completed';
                        if(status === 'Cancelled') statusClass = 'status-cancelled';
                        
                        const row = `<tr><td>${date}</td><td style="font-weight:600; color:var(--text-main);">${pkg}</td><td>${total}</td><td><span class="status-badge ${statusClass}">${status}</span></td></tr>`;
                        tbody.innerHTML += row;
                    });
                }
            });
    }

    function fetchAndSyncUserData(uid) {
        if(!db) return;
        db.collection("users").doc(uid).get().then((doc) => {
            if (doc.exists) {
                const data = doc.data();
                const coFields = ['co-name', 'co-phone', 'co-email', 'co-company', 'req-name', 'req-phone'];
                const map = { 'co-name':'name', 'co-phone':'phone', 'co-email':'email', 'co-company':'company', 'req-name':'name', 'req-phone':'phone' };
                coFields.forEach(id => { if(data[map[id]]) document.getElementById(id).value = data[map[id]]; });
                const autoFillLabel = document.getElementById('auto-fill-label');
                if(data.name && data.phone && data.email && autoFillLabel) autoFillLabel.style.display = 'inline';
                if(data.personalVoucher) { currentUserPersonalVoucher = data.personalVoucher; showCheckoutVoucher(data.personalVoucher); } 
                else { hideCheckoutVoucher(); }
            }
        });
    }

    function showVoucherCard(voucher) {
        const section = document.getElementById('profile-voucher-section');
        const text = document.getElementById('profile-voucher-text');
        const actionBtn = document.getElementById('profile-voucher-action');
        section.style.display = 'block';
        const displayVal = voucher.type === 'fixed' ? `RM ${voucher.value}` : `${voucher.value * 100}%`;
        let expiryText = voucher.expiryDate ? ` | Exp: ${voucher.expiryDate.toDate().toLocaleDateString()}` : "";
        text.innerText = `Code: ${voucher.code} | Value: ${displayVal}${expiryText}`;
        if (voucher.status === 'redeemed') {
            document.getElementById('profile-voucher-title').innerText = "Voucher Redeemed";
            text.style.textDecoration = 'line-through';
            actionBtn.innerHTML = '<span style="color:var(--accent-success); font-weight:700; border:1px solid var(--accent-success); padding:4px 12px; border-radius:20px; font-size:0.8rem;">USED</span>';
        } else {
            document.getElementById('profile-voucher-title').innerText = "You have a Gift Voucher!";
            actionBtn.innerHTML = '<button type="button" class="btn btn-danger" style="width: auto; padding: 0.6rem 1.2rem;" onclick="deletePersonalVoucher()">Delete</button>';
        }
    }

    function showCheckoutVoucher(voucher) {
        const section = document.getElementById('checkout-voucher-section');
        const text = document.getElementById('checkout-voucher-text');
        const applyBtn = document.getElementById('btn-apply-voucher');
        const displayVal = voucher.type === 'fixed' ? `RM ${voucher.value}` : `${voucher.value * 100}%`;
        let expiryText = voucher.expiryDate ? ` | Exp: ${voucher.expiryDate.toDate().toLocaleDateString()}` : "";
        text.innerText = `${voucher.code} (-${displayVal})${expiryText}`;
        section.style.display = 'block';
        const isApplied = (state.discountCode === voucher.code);
        if (voucher.status === 'redeemed') {
            document.getElementById('checkout-voucher-title').innerText = "Voucher Redeemed";
            text.style.textDecoration = 'line-through';
            applyBtn.disabled = true; applyBtn.innerText = "Redeemed"; applyBtn.classList.replace('btn-primary', 'btn-secondary');
        } else {
            document.getElementById('checkout-voucher-title').innerText = "Gift Voucher Available";
            if(isApplied) { applyBtn.disabled = true; applyBtn.innerText = "Applied"; applyBtn.classList.replace('btn-secondary', 'btn-success'); }
            else { applyBtn.disabled = false; applyBtn.innerText = "Apply"; applyBtn.classList.replace('btn-secondary', 'btn-primary'); }
        }
    }

    function hideVoucherCard() {
        document.getElementById('profile-voucher-section').style.display = 'none';
        document.getElementById('checkout-voucher-section').style.display = 'none';
    }

    function handleLogin(e) {
        e.preventDefault();
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;
        if(!auth) return showGlassModal("Error", "Firebase not configured", "error");
        
        auth.signInWithEmailAndPassword(email, password).then(() => {
            const user = auth.currentUser;
            const name = user.displayName || user.email.split('@')[0];
            triggerLoginSuccessAnimation(() => {
                navigateTo('/');
            }, name);
        }).catch((error) => {
            const friendlyMsg = getFirebaseErrorMessage(error);
            showGlassModal("Login Failed", friendlyMsg, "error");
        });
    }

    function handleSignup(e) {
        e.preventDefault();
        const name = document.getElementById('signup-name').value;
        const phone = document.getElementById('signup-phone').value;
        const email = document.getElementById('signup-email').value;
        const password = document.getElementById('signup-password').value;
        if(!auth) return showGlassModal("Error", "Firebase not configured", "error");
        
        auth.createUserWithEmailAndPassword(email, password).then((userCredential) => {
            return db.collection("users").doc(userCredential.user.uid).set({ name: name, phone: phone, email: email, role: 'user', createdAt: firebase.firestore.FieldValue.serverTimestamp() });
        }).then(() => {
            triggerLoginSuccessAnimation(() => {
                navigateTo('/');
            }, name);
        }).catch((error) => {
            const friendlyMsg = getFirebaseErrorMessage(error);
            showGlassModal("Signup Failed", friendlyMsg, "error");
        });
    }

    function handleProfileUpdate(e) {
        e.preventDefault();
        if(!auth || !auth.currentUser) return;
        const name = document.getElementById('prof-name').value;
        const phone = document.getElementById('prof-phone').value;
        const company = document.getElementById('prof-company').value;
        db.collection("users").doc(auth.currentUser.uid).update({ name: name, phone: phone, company: company })
        .then(() => {
            showGlassModal("Success", "Profile Updated Successfully!", "success");
            fetchAndSyncUserData(auth.currentUser.uid);
        }).catch((error) => showGlassModal("Error", error.message, "error"));
    }

    function clearUserData() {
        const inputs = ['prof-name', 'prof-phone', 'prof-email', 'prof-company', 'co-name', 'co-phone', 'co-email', 'co-company', 'req-name', 'req-phone'];
        inputs.forEach(id => { const el = document.getElementById(id); if(el) el.value = ''; });
        const label = document.getElementById('auto-fill-label'); if(label) label.style.display = 'none';
    }

    function handleLogout() {
        if(auth) { currentUserPersonalVoucher = null; auth.signOut().then(() => { showGlassModal("Success", "Logged out", "success"); navigateTo('/'); }); }
    }

    function updateHeaderForUser(user) {
        const isAdmin = currentUserRole === 'admin';
        const deskAuth = document.getElementById('desktopAuthLinks');
        if(deskAuth) {
            let userControls = `<a href="/profile" onclick="routeLink(event, '/profile')" class="btn-glass" style="padding: 0.6rem 1.2rem; border-radius: 50px; background: white; color: var(--text-main); border:1px solid var(--border-glass);"><i class="ri-user-smile-fill"></i> Profile</a><span class="logout-btn" onclick="handleLogout()">Logout</span>`;
            if (isAdmin) userControls = `<a href="admin.html" target="_blank" class="admin-link" title="Admin Portal"><i class="ri-shield-user-fill"></i></a><span style="color:var(--text-tertiary); margin: 0 10px;">|</span>${userControls}`;
            deskAuth.innerHTML = userControls;
        }
        
        const mobAuth = document.getElementById('mobileAuthLinksContainer');
        if(mobAuth) {
            let authButtons = `<a href="/profile" onclick="routeLink(event, '/profile'); toggleDrawer()" class="mobile-nav-link" style="justify-content: flex-start; border-top:1px solid var(--border-glass);"><i class="ri-user-fill" style="margin-right:15px;"></i> Profile</a>`;
            if (isAdmin) authButtons += `<a href="admin.html" target="_blank" onclick="toggleDrawer()" class="mobile-nav-link" style="justify-content: flex-start;"><i class="ri-shield-user-fill" style="margin-right:15px; color:var(--accent-warn);"></i> Admin</a>`;
            authButtons += `<a href="#" onclick="handleLogout(); toggleDrawer()" class="mobile-nav-link" style="justify-content: flex-start; color: var(--accent-warn);"><i class="ri-logout-box-r-fill" style="margin-right:15px;"></i> Logout</a>`;
            mobAuth.innerHTML = authButtons;
        }
    }

    function updateHeaderForGuest() {
        const deskAuth = document.getElementById('desktopAuthLinks');
        if(deskAuth) deskAuth.innerHTML = `<a href="/login" onclick="routeLink(event, '/login')" class="btn-glass" style="padding: 0.6rem 1.2rem; border-radius: 50px; background: white; color: var(--text-main); border:1px solid var(--border-glass);"><i class="ri-login-circle-fill"></i> Login</a>`;
        const mobAuth = document.getElementById('mobileAuthLinksContainer');
        if(mobAuth) mobAuth.innerHTML = `<a href="/login" onclick="routeLink(event, '/login'); toggleDrawer()" class="mobile-nav-link" style="justify-content: flex-start; border-top:1px solid var(--border-glass);"><i class="ri-login-circle-fill" style="margin-right:15px;"></i> Login</a><a href="/signup" onclick="routeLink(event, '/signup'); toggleDrawer()" class="mobile-nav-link" style="justify-content: flex-start;"><i class="ri-user-add-fill" style="margin-right:15px;"></i> Sign Up</a>`;
    }

    function handleProfileReset() {
        if(!auth || !auth.currentUser) return;
        document.getElementById('reset-email').value = auth.currentUser.email;
        navigateTo('/forgot-password');
        showGlassModal("Info", "Email pre-filled. Please check spam folder.", "warning");
    }

    function handleForgotPassword(e) {
        e.preventDefault();
        const email = document.getElementById('reset-email').value;
        if(!auth) return showGlassModal("Error", "Firebase not configured", "error");
        auth.sendPasswordResetEmail(email).then(() => {
            showGlassModal("Success", "Reset email sent. Please check your spam folder.", "success");
            setTimeout(() => navigateTo('/login'), 3000);
        }).catch((error) => {
            const friendlyMsg = getFirebaseErrorMessage(error);
            showGlassModal("Error", friendlyMsg, "error");
        });
    }

    // --- TICKET SUBMISSION & HISTORY ---
    async function generateSmartTicketId() {
        if(!db) return `#Ticket-${Math.floor(1000 + Math.random() * 9000)}`;
        try {
            const snapshot = await db.collection("tickets").where("ticketId", "!=", null).orderBy("ticketId", "desc").limit(1).get();
            let nextNumber =1;
            if (!snapshot.empty) {
                const lastTicket = snapshot.docs[0].data();
                const parts = lastTicket.ticketId.split('-');
                const lastNum = parseInt(parts[1]);
                if (!isNaN(lastNum)) nextNumber = lastNum + 1;
            }
            const idString = String(nextNumber).padStart(4, '0');
            return `#Ticket-${idString}`;
        } catch (error) { return `#Ticket-${Math.floor(1000 + Math.random() * 9000)}`; }
    }

    async function handleTicketSubmit(e) {
        e.preventDefault();
        if(!db) return showGlassModal("Error", "Database offline", "error");
        const btn = document.getElementById('btn-submit-ticket');
        const name = document.getElementById('ticket-name').value;
        const email = document.getElementById('ticket-email').value;
        const type = document.getElementById('ticket-type').value;
        const message = document.getElementById('ticket-message').value;
        if(!name || !email || !type || !message) return showGlassModal("Error", "Please fill in all fields.", "error");

        btn.disabled = true;
        const originalText = btn.innerText;
        btn.innerHTML = '<i class="ri-loader-4-line ri-spin"></i> Generating ID...';

        try {
            const smartId = await generateSmartTicketId();
            const ticketData = {
                ticketId: smartId, name: name, email: email, type: type, message: message, status: "Open",
                timestamp: firebase.firestore.FieldValue.serverTimestamp(), userId: auth.currentUser ? auth.currentUser.uid : null
            };
            await db.collection("tickets").add(ticketData);
            document.getElementById('display-case-id').innerText = smartId;
            document.getElementById('case-id-display').style.display = 'block';
            e.target.reset();
            showGlassModal("Success", `Ticket Submitted! ID: ${smartId}`, "success");
            setTimeout(() => {
                let notifyMsg = `Hi Admin,\n*New Ticket Received.*\n\n*Case ID:* ${smartId}\n*Name:* ${name}\n*Type:* ${type}`;
                window.open(`https://wa.me/${ADMIN_PHONE_NO}?text=${encodeURIComponent(notifyMsg)}`, '_blank');
            }, 1000);
        } catch (error) {
            console.error(error); showGlassModal("Error", "Failed to submit ticket. Try again.", "error");
        } finally {
            btn.disabled = false; btn.innerText = originalText;
        }
    }

    function copyTicketId() {
        const idText = document.getElementById('display-case-id').innerText;
        navigator.clipboard.writeText(idText).then(() => showGlassModal("Success", "ID copied to clipboard!", "success")).catch(err => showGlassModal("Error", "Failed to copy", "error"));
    }

    function fetchTicketHistory() {
        if(!db) return;
        const caseId = document.getElementById('history-search-id').value.trim();
        if(!caseId) return showGlassModal("Error", "Please enter a Case ID.", "error");
        const listContainer = document.getElementById('ticket-list');
        listContainer.innerHTML = '<div style="text-align:center; color: var(--text-secondary);">Searching...</div>';
        db.collection("tickets").where("ticketId", "==", caseId).get()
            .then((snapshot) => {
                listContainer.innerHTML = ''; 
                if (snapshot.empty) { listContainer.innerHTML = '<div style="text-align:center; color: #ef4444; padding: 1rem;">No ticket found with that Case ID.</div>'; return; }
                snapshot.forEach((doc) => {
                    const data = doc.data();
                    const date = data.timestamp ? new Date(data.timestamp.seconds * 1000).toLocaleDateString() : '-';
                    const item = document.createElement('div');
                    item.className = 'glass-card'; item.style.padding = '1rem'; 
                    item.style.marginBottom = '1rem'; item.style.display = 'grid'; item.style.gridTemplateColumns = '1fr 1fr 1fr'; item.style.alignItems = 'center';
                    item.innerHTML = `<div><div style="color:var(--text-main); font-weight:600;">${data.type}</div><div style="font-size:0.75rem; color:var(--text-tertiary);">${date}</div></div><div class="ticket-id">${data.ticketId || doc.id}</div><div style="text-align:right;"><span style="background:${data.status==='Open'?'#fffbeb':'#ecfdf5'}; color:${data.status==='Open'?'var(--accent-warn)':'var(--accent-success)'}; padding:2px 8px; border-radius:4px; font-size:0.75rem; font-weight:700;">${data.status}</span></div></div>`;
                    listContainer.appendChild(item);
                });
            }).catch((error) => { console.error(error); listContainer.innerHTML = '<div style="text-align:center; color: #ef4444;">Error loading ticket.</div>'; });
    }

    function toggleDrawer() {
        const drawer = document.getElementById('mobileDrawer');
        const overlay = document.getElementById('mobileDrawerOverlay');
        const toggle = document.querySelector('.mobile-toggle');
        const icon = toggle.querySelector('i');
        drawer.classList.toggle('open');
        toggle.classList.toggle('open');
        overlay.classList.toggle('active');
        if(drawer.classList.contains('open')) { icon.classList.remove('ri-menu-4-line'); icon.classList.add('ri-close-line'); } 
        else { icon.classList.add('ri-menu-4-line'); icon.classList.remove('ri-close-line'); }
    }

    function toggleMobileSub(element) {
        const submenu = element.nextElementSibling;
        submenu.classList.toggle('open');
        element.classList.toggle('active');
    }

    // ==========================================
    // CHECKOUT & QUOTE LOGIC
    // ==========================================
    
    function openQuoteForm(packageName) {
        state.packageType = packageName;
        state.packagePrice = 0;
        state.setupFee = 0;
        if(auth && auth.currentUser) fetchAndSyncUserData(auth.currentUser.uid);
        document.getElementById('quote-package').value = packageName;
        navigateTo('/quote-form');
    }

    function attemptSelectPackage(name, type) {
        if (type === 'ai' || type === 'portal') {
            openQuoteForm(name);
            return;
        }
        if (typeof auth === 'undefined' || auth === null) { showGlassModal("Error", "Authentication system initializing...", "error"); return; }
        if (auth.currentUser) { selectPackage(name, type); } 
        else { showGlassModal("Login Required", "Please login or sign up to make a purchase.", "warning", "Login", () => navigateTo('/login')); }
    }

    function selectPackage(name, type) {
        state.packageType = type;
        state.packagePrice = 0;
        state.setupFee = 0;
        state.billingCycle = billingCycle;
        state.isOneTime = (billingCycle === 'onetime');
        state.paymentMode = 'full';

        document.getElementById('summary-pkg-name').innerText = name;
        const priceArea = document.getElementById('dynamic-price-area');
        priceArea.innerHTML = ''; 

        let basePrice = 0;
        let desc = "";
        let setupFee = 0;

        if(PRICING_DATA[type]) {
            if (state.isOneTime) {
                basePrice = PRICING_DATA[type].oneTime;
                desc = "One-time purchase. No support.";
                setupFee = 0; 
            } else {
                basePrice = PRICING_DATA[type].monthly;
                setupFee = PRICING_DATA[type].setupFee;
                desc = PRICING_DATA[type].desc;
            }
        }
        state.packagePrice = basePrice;
        state.setupFee = setupFee;

        document.getElementById('summary-pkg-desc').innerText = desc;
        let priceHTML = '';
        if (state.isOneTime) priceHTML = `<div style="text-align:right; font-weight:700; color:var(--soft-black);">Price: RM ${basePrice}</div>`;
        else priceHTML = `<div style="text-align:right; font-weight:700; color:var(--soft-black);">Price: RM ${basePrice} (Monthly)</div>`;
        priceArea.innerHTML = priceHTML;

        state.domainType = 'sub'; 
        state.domainName = ''; 
        state.domainNameValid = false; 
        document.getElementById('subdomain-text').value = ''; 
        document.getElementById('custom-domain-text').value = ''; 
        updateDomain('sub', document.querySelector('input[name="domain_type"][value="sub"]').parentElement); 
        state.maintenancePrice = 0;
        state.discountRate = 0; state.discountFixed = 0; state.discountType = 'percent'; state.discountCode = ''; state.paymentMethodId = null; 
        document.getElementById('terms-check').checked = false;
        
        document.getElementById('checkout-actions').style.display = 'block';
        document.getElementById('manual-confirm-section').style.display = 'none';

        if(auth && auth.currentUser) fetchAndSyncUserData(auth.currentUser.uid);
        else { document.getElementById('auto-fill-label').style.display = 'none'; hideVoucherCard(); }
        updateSummaryText(); updateUI(); 
        updateTotal();

        const clientName = document.getElementById('co-name').value || 'Client';
        const packageSlug = name.replace(/\s+/g, '-').toLowerCase();
        const customPath = `/${packageSlug}/payment-checkout%${encodeURIComponent(clientName)}`;
        window.history.pushState({ path: customPath }, "", customPath);
        performTransition('buynow');
    }

    function updateDomain(type, element) {
        state.domainType = type;
        if(element) {
            const options = element.parentElement.querySelectorAll('.radio-option');
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
        }
        
        if(type === 'sub') {
            document.getElementById('input-subdomain').style.display = 'block';
            document.getElementById('input-custom').style.display = 'none';
            state.domainPrice = 0; 
        } else {
            document.getElementById('input-subdomain').style.display = 'none';
            document.getElementById('input-custom').style.display = 'block';
            state.domainPrice = 0; 
        }
        updateSummaryText(); updateTotal();
    }

    function updateSummaryText() {
        if(state.domainType === 'sub') {
            const val = document.getElementById('subdomain-text').value.trim();
            state.domainName = val ? `${val}.ddnet.my` : '';
            document.getElementById('url-preview').innerText = state.domainName || '.ddnet.my';
            document.getElementById('summary-domain').innerText = "Free (1st Year)";
            state.domainNameValid = (val.length > 0);
        } 
        else {
            const val = document.getElementById('custom-domain-text').value.trim();
            state.domainName = val;
            document.getElementById('summary-domain').innerText = val ? 'User Provided' : 'RM 0';
            state.domainNameValid = (val.length > 0);
        }
    }

    document.getElementById('subdomain-text').addEventListener('input', () => {
        updateSummaryText();
        const val = document.getElementById('subdomain-text').value.trim();
        state.domainNameValid = (val.length > 0);
    });

    document.getElementById('custom-domain-text').addEventListener('input', () => {
        updateSummaryText();
        const val = document.getElementById('custom-domain-text').value.trim();
        state.domainNameValid = (val.length > 0);
    });

    function setPaymentMode(mode) {
        state.paymentMode = mode;
        const btnFull = document.getElementById('btn-pay-full');
        const btnDep = document.getElementById('btn-pay-deposit');
        const depNote = document.getElementById('deposit-note');

        if (mode === 'full') {
            btnFull.classList.remove('btn-secondary'); btnFull.classList.add('btn-primary');
            btnDep.classList.remove('btn-primary'); btnDep.classList.add('btn-secondary');
            depNote.style.display = 'none';
        } else {
            btnFull.classList.remove('btn-primary'); btnFull.classList.add('btn-secondary');
            btnDep.classList.remove('btn-secondary'); btnDep.classList.add('btn-primary');
            depNote.style.display = 'block';
        }
        updateTotal();
    }

    function updateMaintenance(plan, element) {
        const options = element.parentElement.querySelectorAll('.radio-option');
        options.forEach(opt => opt.classList.remove('selected'));
        element.classList.add('selected');
        if(plan === 'none') state.maintenancePrice = 0;
        if(plan === 'basic') state.maintenancePrice = 50;
        if(plan === 'business') state.maintenancePrice = 100;
        const label = plan === 'none' ? 'None' : (plan === 'basic' ? 'Basic (RM 50/mo)' : 'Business (RM 100/mo)');
        document.getElementById('summary-maintenance').innerText = label;
        updateTotal();
    }

    function applyPromo() {
        if(!auth || !auth.currentUser) return showGlassModal("Error", "Please login to use Promo Codes.", "error");
        const input = document.getElementById('promo-input');
        const code = input.value.trim().toUpperCase();
        
        if(!code || code === "") {
            showGlassModal("Error", "Please enter a voucher code first.", "error");
            input.focus(); 
            return;
        }
        
        if(PROMO_CODES.hasOwnProperty(code)) {
            state.discountType = 'percent';
            state.discountRate = PROMO_CODES[code];
            state.discountCode = code;
            showGlassModal("Success", `Promo Applied: ${code}`, "success");
            document.getElementById('row-discount').style.display = 'flex';
            document.getElementById('summary-promo-code').innerText = code;
            document.getElementById('summary-discount-val').innerText = `-${state.discountRate * 100}%`;
            updateTotal();
        } else {
            showGlassModal("Error", "Invalid code. Please check and try again.", "error");
        }
    }

    function applyPersonalVoucher() {
        if(!currentUserPersonalVoucher) return; 
        if(currentUserPersonalVoucher.status === 'redeemed') return showGlassModal("Error", "This voucher has already been used.", "error");
        if(currentUserPersonalVoucher.expiryDate) {
            const now = new Date();
            const expiry = currentUserPersonalVoucher.expiryDate.toDate();
            if(now > expiry) return showGlassModal("Error", "This voucher has expired.", "error");
        }
        state.discountType = currentUserPersonalVoucher.type;
        state.discountCode = currentUserPersonalVoucher.code;
        if(state.discountType === 'fixed') { state.discountFixed = currentUserPersonalVoucher.value; state.discountRate = 0; } 
        else { state.discountRate = currentUserPersonalVoucher.value; state.discountFixed = 0; }
        showGlassModal("Success", `Voucher ${state.discountCode} Applied!`, "success");
        document.getElementById('row-discount').style.display = 'flex';
        document.getElementById('summary-promo-code').innerText = state.discountCode;
        const displayVal = state.discountType === 'fixed' ? `RM ${state.discountFixed}` : `${state.discountRate * 100}%`;
        document.getElementById('summary-discount-val').innerText = `-${displayVal}`;
        showCheckoutVoucher(currentUserPersonalVoucher);
        updateTotal();
    }

    function deletePersonalVoucher() {
        if(!auth || !auth.currentUser) return;
        if(confirm("Are you sure you want to remove this voucher?")) {
            db.collection("users").doc(auth.currentUser.uid).update({ personalVoucher: firebase.firestore.FieldValue.delete() }).then(() => {
                currentUserPersonalVoucher = null;
                loadProfilePageData();
                fetchAndSyncUserData(auth.currentUser.uid);
                showGlassModal("Success", "Voucher removed from account.", "success");
            });
        }
    }

    function removeVoucher() {
        state.discountCode = ''; state.discountRate = 0; state.discountFixed = 0;
        document.getElementById('row-discount').style.display = 'none';
        showGlassModal("Info", "Voucher removed", "warning");
        updateTotal();
        if(currentUserPersonalVoucher) showCheckoutVoucher(currentUserPersonalVoucher);
    }

    function updateTotal() {
        let subtotal = state.packagePrice + state.setupFee + state.maintenancePrice;
        if(state.domainType === 'sub') subtotal += state.domainPrice; 
        
        let discountAmt = 0;
        if(state.discountType === 'fixed') discountAmt = state.discountFixed;
        else discountAmt = subtotal * state.discountRate;
        
        const finalTotal = Math.max(0, Math.round(subtotal - discountAmt));
        let paymentDue = finalTotal;
        if(state.paymentMode === 'deposit') paymentDue = Math.round(finalTotal * 0.5);

        document.getElementById('summary-final-total').innerText = `RM ${paymentDue}`;
        document.getElementById('summary-recurring').innerText = `RM ${state.packagePrice} / ${state.isOneTime ? 'one-time' : 'month'}`;
        document.getElementById('summary-setup').innerText = state.setupFee > 0 ? `RM ${state.setupFee}` : 'RM 0';
        document.getElementById('deposit-note').innerText = `Deposit Required (50%): RM ${paymentDue}`;
    }

    function updateUI() {
        document.querySelectorAll('.radio-option').forEach(opt => opt.classList.remove('selected'));
        const subOpt = document.querySelector('input[name="domain_type"][value="sub"]').parentElement;
        const noneOpt = document.querySelector('input[name="maint"][value="none"]').parentElement;
        if(subOpt) subOpt.classList.add('selected');
        if(noneOpt) noneOpt.classList.add('selected');
        updateSummaryText(); updateTotal();
        setPaymentMode('full');
    }

    // ==========================================
    // RAZORPAY INTEGRATION LOGIC
    // ==========================================
    function initiateRazorpayPayment() {
        const termsCheck = document.getElementById('terms-check');
        if(!termsCheck.checked) {
            showGlassModal("Action Required", "Please agree to Terms & Conditions to proceed.", "warning", "I Agree", () => { document.getElementById('terms-check').checked = true; });
            return;
        }

        if(!state.domainNameValid) {
            if(state.domainType === 'sub') {
                showGlassModal("Missing Input", "Please fill in your Subdomain Name.", "warning");
                document.getElementById('subdomain-text').focus();
            } else {
                showGlassModal("Missing Input", "Please fill in your Custom Domain Name.", "warning");
                document.getElementById('custom-domain-text').focus();
            }
            return;
        }

        const name = document.getElementById('co-name').value;
        const phone = document.getElementById('co-phone').value;
        const email = document.getElementById('co-email').value;
        const company = document.getElementById('co-company').value;
        if(!name || !phone || !email) return showGlassModal("Error", "Please enter Name, Phone, and Email.", "error");

        const totalText = document.getElementById('summary-final-total').innerText;
        const amountNumeric = parseFloat(totalText.replace('RM ', ''));
        const amountInSubunits = Math.round(amountNumeric * 100);

        const pendingOrder = {
            userId: auth.currentUser ? auth.currentUser.uid : null,
            name: name, phone: phone, email: email, company: company,
            package: document.getElementById('summary-pkg-name').innerText,
            domainType: state.domainType, domainName: state.domainName, domainPrice: state.domainPrice,
            packagePrice: state.packagePrice, setupFee: state.setupFee, maintenancePrice: state.maintenancePrice,
            total: `RM ${amountNumeric}`, 
            discountCode: state.discountCode || null, paymentMethod: 'Razorpay (Curlec)',
            paymentMode: state.paymentMode, billingCycle: state.isOneTime ? 'One-Time' : 'Monthly',
            status: 'Paid', timestamp: firebase.firestore.FieldValue.serverTimestamp()
        };

        localStorage.setItem('pendingOrder', JSON.stringify(pendingOrder));

        const options = {
            "key": RAZORPAY_KEY_ID, "amount": amountInSubunits, "currency": RAZORPAY_CURRENCY, 
            "name": "DDNetwork One",
            "description": document.getElementById('summary-pkg-name').innerText + (state.paymentMode === 'deposit' ? " (Deposit)" : ""),
            "image": "https://raw.githubusercontent.com/ddnetwork-one/ddnetwork-store/refs/heads/main/crop_ddnlogo.png",
            "redirect": false, 
            "callback": function(response){ console.log("Payment Successful ID:", response.razorpay_payment_id); },
            "modal": { "ondismiss": function(){ console.log('Checkout form closed'); } },
            "prefill": { "name": name, "email": email, "contact": phone },
            "notes": { "address": company || "Malaysia", "package": state.packageType, "domain": state.domainName, "payment_mode": state.paymentMode },
            "theme": { "color": "#1e293b" }
        };

        try {
            const rzp1 = new Razorpay(options);
            rzp1.open(); 
            document.getElementById('checkout-actions').style.display = 'none';
            document.getElementById('manual-confirm-section').style.display = 'block';
        } catch (error) {
            console.error("Razorpay Error:", error);
            showGlassModal("Error", "Payment Gateway Error. Please contact support.", "error");
        }
    }

    function handleManualConfirmation() {
        const pendingOrderStr = localStorage.getItem('pendingOrder');
        if(!pendingOrderStr) {
            showGlassModal("Error", "Order data missing. Please start over.", "error");
            navigateTo('/pricing');
            return;
        }

        const orderData = JSON.parse(pendingOrderStr);
        
        const overlay = document.getElementById('processing-overlay');
        const msgEl = document.getElementById('process-message');
        overlay.style.display = 'flex';
        msgEl.innerHTML = `<div style="font-size:1.5rem; margin-bottom:1rem;"><i class="ri-loader-4-line ri-spin"></i></div> Finalizing Order...`;

        let voucherUpdatePromise = Promise.resolve();
        if (orderData.discountCode && auth.currentUser && auth.currentUser.uid) {
            voucherUpdatePromise = db.collection("users").doc(auth.currentUser.uid).update({
                "personalVoucher.status": "redeemed"
            }).then(() => {
                console.log("Voucher status updated to redeemed.");
                if(currentUserPersonalVoucher) currentUserPersonalVoucher.status = 'redeemed';
            }).catch(err => console.error("Failed to update voucher status", err));
        }

        voucherUpdatePromise.then(() => {
            const firebaseOrderData = {
                adminNote: "OWN COMPANY CREATED", companyName: orderData.company || "DDNetwork One",
                customerEmail: orderData.email, customerName: orderData.name, customerPhone: orderData.phone,
                domain: orderData.domainName, internalNotes: "",
                maintenance: orderData.maintenancePrice > 0 ? (orderData.maintenancePrice === 50 ? "Basic" : "Business") : "None",
                package: orderData.package, paymentMethod: "Razorpay (Curlec)", promo: orderData.discountCode || "",
                salesRepIds: [], salesTeamIds: [], salesTeamNames: [], status: "Pending",
                timestamp: firebase.firestore.FieldValue.serverTimestamp(), total: orderData.total, userId: orderData.userId || ""
            };
            return db.collection("orders").add(firebaseOrderData);
        }).then(() => {
            localStorage.removeItem('pendingOrder');
            showGlassModal("Success", "Order Submitted Successfully!", "success");
            navigateTo('/thank-you');
        }).catch((error) => {
            console.error("Order Error:", error);
            msgEl.innerText = "Error submitting order. Please screenshot your details and contact support.";
            showGlassModal("Error", "Failed to submit order. Please contact support.", "error");
        });
    }

    // ==========================================
    // REQUEST & UPDATES LOGIC
    // ==========================================
    function handleUpdateTypeChange(type, element) {
        const options = element.parentElement.querySelectorAll('.radio-option');
        options.forEach(opt => opt.classList.remove('selected'));
        element.classList.add('selected');
        document.querySelectorAll('.req-type-fields, #field-content, #field-upgrade, #field-renew, #field-remove').forEach(el => el.classList.add('hidden'));
        if(type === 'content') document.getElementById('field-content').classList.remove('hidden');
        if(type === 'upgrade') document.getElementById('field-upgrade').classList.remove('hidden');
        if(type === 'renew') document.getElementById('field-renew').classList.remove('hidden');
        if(type === 'remove') document.getElementById('field-remove').classList.remove('hidden');
    }

    function handleRequestSubmit(e) {
        e.preventDefault();
        if(!db) return showGlassModal("Error", "Database offline", "error");
        const btn = document.getElementById('btn-submit-request');
        const originalText = btn.innerText;
        btn.disabled = true;
        btn.innerHTML = '<i class="ri-loader-4-line ri-spin"></i> Processing...';

        const name = document.getElementById('req-name').value;
        const phone = document.getElementById('req-phone').value;
        const typeInput = document.querySelector('input[name="req_type"]:checked');
        if(!typeInput) { showGlassModal("Error", "Please select a request type.", "error"); btn.disabled = false; btn.innerText = originalText; return; }
        const type = typeInput.value;

        let requestData = { name: name, phone: phone, type: type, status: 'Pending', timestamp: firebase.firestore.FieldValue.serverTimestamp(), userId: auth.currentUser ? auth.currentUser.uid : null };

        try {
            if (type === 'content') { requestData.details = document.getElementById('req-desc-content').value; } 
            else if (type === 'upgrade') {
                requestData.currentPlan = document.getElementById('req-current-plan').value;
                requestData.newPlan = document.getElementById('req-new-plan').value;
                requestData.details = document.getElementById('req-desc-upgrade').value;
            } else if (type === 'renew') {
                requestData.plan = document.getElementById('req-renew-plan').value;
                requestData.duration = "1 Year"; 
            } else if (type === 'remove') { requestData.details = document.getElementById('req-desc-remove').value; }

            db.collection("customer_requests").add(requestData).then(() => {
                showGlassModal("Success", "Request Submitted Successfully!", "success");
                e.target.reset();
                handleUpdateTypeChange('content', document.querySelector('input[value="content"]').parentElement);
                let waMsg = `Hi Admin,\n*New Customer Request*\n\n*Name:* ${name}\n*Phone:* ${phone}\n*Type:* ${type}`;
                if(type === 'upgrade') waMsg += `\nFrom: ${requestData.currentPlan} To: ${requestData.newPlan}`;
                if(requestData.details) waMsg += `\n*Details:* ${requestData.details}`;
                setTimeout(() => { window.open(`https://wa.me/${ADMIN_PHONE_NO}?text=${encodeURIComponent(waMsg)}`, '_blank'); }, 1000);
            }).catch((err) => { console.error(err); showGlassModal("Error", "Error submitting request.", "error"); });
        } catch (error) { console.error(error); showGlassModal("Error", "Invalid form data.", "error"); } 
        finally { btn.disabled = false; btn.innerText = originalText; }
    }

    // ==========================================
    // WEBSITE IDEA SUBMISSION
    // ==========================================
    function handleWebsiteIdeaSubmit(event) {
        event.preventDefault(); 
        
        const form = document.getElementById('website-idea-form');
        const name = document.getElementById('idea-name').value;
        const phone = document.getElementById('idea-phone').value;
        const email = document.getElementById('idea-email').value;
        const company = document.getElementById('idea-company').value;
        const source = document.getElementById('idea-source').value;
        const type = document.getElementById('idea-type').value;
        const message = document.getElementById('idea-message').value;
        const references = document.getElementById('idea-references').value;

        if(!name || !phone || !email || !message) return showGlassModal("Error", "Please fill in Name, Phone, Email and Description.", "error");

        const btn = document.getElementById('btn-submit-idea');
        const originalText = btn.innerText;
        btn.disabled = true;
        btn.innerHTML = '<i class="ri-loader-4-line ri-spin"></i> Saving...';

        const requestData = {
            name: name, phone: phone, email: email, company: company || '', source: source || '',
            type: type || 'New Website', details: message, references: references || '', status: 'Pending',
            timestamp: firebase.firestore.FieldValue.serverTimestamp(),
            userId: auth.currentUser ? auth.currentUser.uid : null, source: 'Website Description Form'
        };

        if(db) {
            db.collection("customer_requests").add(requestData)
                .then(() => {
                    form.reset();
                    const successModal = document.getElementById('idea-success-modal');
                    if(successModal) {
                        successModal.style.display = 'flex';
                        requestAnimationFrame(() => { successModal.classList.add('active'); });
                    }
                })
                .catch((error) => {
                    console.error("Firebase Save Error:", error);
                    showGlassModal("Error", "Failed to save idea. Please try again.", "error");
                })
                .finally(() => {
                    btn.disabled = false;
                    btn.innerText = originalText;
                });
        } else {
            showGlassModal("Error", "Database connection error.", "error");
            btn.disabled = false;
            btn.innerText = originalText;
        }
    }

    // ==========================================
    // CONTACT PAGE FORM SUBMISSION
    // ==========================================
    function handleContactSubmit(e) {
        e.preventDefault();
        const name = document.getElementById('contact-name').value;
        const email = document.getElementById('contact-email').value;
        const message = document.getElementById('contact-message').value;
        if(!name || !email || !message) return showGlassModal("Error", "Please fill in all fields.", "error");

        const btn = e.target.querySelector('button');
        const originalText = btn.innerText;
        btn.disabled = true;
        btn.innerHTML = '<i class="ri-loader-4-line ri-spin"></i> Sending...';

        const data = {
            name: name, email: email, message: message, type: 'Contact Inquiry', status: 'Pending',
            timestamp: firebase.firestore.FieldValue.serverTimestamp(),
            userId: auth.currentUser ? auth.currentUser.uid : null, source: 'Contact Page Form'
        };

        if(db) {
            db.collection("customer_requests").add(data)
                .then(() => {
                    showGlassModal("Success", "Thank you for your interest!", "success");
                    e.target.reset();
                })
                .catch((error) => {
                    console.error(error);
                    showGlassModal("Error", "Failed to send message. Please try again.", "error");
                })
                .finally(() => {
                    btn.disabled = false;
                    btn.innerText = originalText;
                });
        } else {
            showGlassModal("Error", "System offline. Please try again later.", "error");
            btn.disabled = false;
            btn.innerText = originalText;
        }
    }

    function loadHomePortfolio() {
        if(!db) return;
        const container = document.getElementById('home-portfolio-grid');
        db.collection("clients_portfolio").where("status", "==", true).limit(3).onSnapshot((snapshot) => {
            container.innerHTML = ''; 
            if (snapshot.empty) {
                container.innerHTML = '<div class="text-center" style="grid-column:1/-1;">No portfolio items.</div>';
                return;
            }
            snapshot.forEach((doc) => {
                const data = doc.data();
                const html = `
                    <div class="portfolio-item">
                        <div class="portfolio-img-wrapper"><img src="${data.img}" alt="${data.name}"></div>
                        <div class="portfolio-info"><h4>${data.name}</h4><p>${data.desc || 'View our work'}</p></div>
                    </div>`;
                container.innerHTML += html;
            });
        });
    }

    // ==========================================
    // EARTH + METEOR BACKGROUND ANIMATION
    // ==========================================
    const canvas = document.getElementById('globe-canvas');
    const ctx = canvas.getContext('2d');
    let dots = [];
    let meteors = [];
    const DOT_COUNT_DESKTOP = 700; 
    const DOT_COUNT_MOBILE = 350;  
    let DOT_COUNT = window.innerWidth < 768 ? DOT_COUNT_MOBILE : DOT_COUNT_DESKTOP;
    const GLOBE_RADIUS = 380; 
    let rotation = 0;
    let animationId;

    function initDots() {
        dots = [];
        for(let i=0; i<DOT_COUNT; i++) {
            const phi = Math.acos(-1 + (2 * i) / DOT_COUNT);
            const theta = Math.sqrt(DOT_COUNT * Math.PI) * phi;
            dots.push({ x: GLOBE_RADIUS * Math.cos(theta) * Math.sin(phi), y: GLOBE_RADIUS * Math.sin(theta) * Math.sin(phi), z: GLOBE_RADIUS * Math.cos(phi) });
        }
    }

    class Meteor {
        constructor() { this.reset(); }
        reset() { this.x = Math.random() * 1200; this.y = -100; this.len = Math.random() * 80 + 20; this.speed = Math.random() * 5 + 5; this.size = Math.random() * 2 + 0.5; this.active = false; }
        spawn() { this.reset(); this.active = true; this.x = 800 + Math.random() * 400; this.y = -50 - Math.random() * 100; }
        update() { if(!this.active) return; this.x -= this.speed * 1.5; this.y += this.speed; if(this.y > 800 || this.x < -200) this.active = false; }
        draw() {
            if(!this.active) return;
            const gradient = ctx.createLinearGradient(this.x, this.y, this.x + this.len, this.y - this.len);
            gradient.addColorStop(0, "rgba(99, 102, 241, 0.8)"); gradient.addColorStop(1, "rgba(99, 102, 241, 0)");
            ctx.beginPath(); ctx.strokeStyle = gradient; ctx.lineWidth = this.size;
            ctx.moveTo(this.x, this.y); ctx.lineTo(this.x + this.len, this.y - this.len); ctx.stroke();
        }
    }

    for(let i=0; i<5; i++) meteors.push(new Meteor());

    function animate() {
        const homeSection = document.getElementById('home');
        if(!homeSection || !homeSection.classList.contains('active')) { return; }
        ctx.clearRect(0,0, 1200, 1200); 

        ctx.fillStyle = "rgba(99, 102, 241, 0.2)"; 
        for(let i=0; i<50; i++) {
            const sx = (Math.sin(i * 132 + 1) * 43758.5453) % 1200;
            const sy = (Math.cos(i * 53 + 1) * 43758.5453) % 1200;
            const finalX = sx < 0 ? -sx : sx; const finalY = sy < 0 ? -sy : sy;
            ctx.beginPath(); ctx.arc(finalX, finalY, Math.random() * 1.5, 0, Math.PI *2); ctx.fill();
        }

        if(Math.random() < 0.02) { 
            const inactiveMeteor = meteors.find(m => !m.active);
            if(inactiveMeteor) inactiveMeteor.spawn();
        }
        meteors.forEach(m => { m.update(); m.draw(); });

        rotation +=0.002;
        dots.forEach(dot => {
            const rotX = dot.x * Math.cos(rotation) - dot.z * Math.sin(rotation);
            const rotZ = dot.z * Math.cos(rotation) + dot.x * Math.sin(rotation);
            const alpha = (rotZ + GLOBE_RADIUS) / (2 * GLOBE_RADIUS);
            if(alpha > 0) {
                const scale = 800 / (800 + rotZ); 
                const x = 600 + rotX * scale; const y = 600 + dot.y * scale;
                ctx.beginPath(); ctx.arc(x, y, 1.5 * scale, 0, Math.PI *2);
                ctx.fillStyle = `rgba(99, 102, 241, ${alpha})`; ctx.fill();
            }
        });
        animationId = requestAnimationFrame(animate);
    }

    function startGlobeAnimation() {
        if (animationId) cancelAnimationFrame(animationId);
        animate();
    }

    window.addEventListener('resize', () => {
        const newCount = window.innerWidth < 768 ? DOT_COUNT_MOBILE : DOT_COUNT_DESKTOP;
        if(newCount !== DOT_COUNT) {
            DOT_COUNT = newCount;
            initDots();
        }
    });

    initDots();
    animate();

    window.addEventListener('scroll', () => {
        const header = document.getElementById('mainHeader');
        if(window.scrollY > 50) header.classList.add('scrolled');
        else header.classList.remove('scrolled');
    });

    function openTermsModal() { document.getElementById('termsModal').classList.add('open'); }
    function closeTermsModal() { document.getElementById('termsModal').classList.remove('open'); }

    initializeDatabase();
    
</script>
<!-- UPDATED CHAT WIDGET SCRIPT -->
<script src="https://app.livechatai.com/embed.js" data-id="cmlas1njr0001jj04hi5ygd18" async defer>
</script>
</body>
</html>
