<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- CORE SEO META TAGS -->
    <title>DDNex | Cheap & Professional Website Services Malaysia</title>
    <meta name="description" content="DDNex offers professional web design, AI integration, and digital solutions in Malaysia. Trusted by local businesses. Fast delivery, mobile-first design.">
    <meta name="keywords" content="cheap website services Malaysia, Website Development, AI Integration, Custom Website, DDNex, DDNex Cloud, Digital Agency Malaysia">
    <meta name="author" content="Danial Danish">
    <meta name="robots" content="index, follow">
    
    <!-- FAVICON & APPLE TOUCH ICON -->
    <link rel="icon" type="image/png" href="https://i.ibb.co/Y7yLkm5j/IMG-3157.png">
    <link rel="apple-touch-icon" href="https://i.ibb.co/Y7yLkm5j/IMG-3157.png">
    
    <!-- OPEN GRAPH / FACEBOOK / WHATSAPP -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ddnex.my/">
    <meta property="og:title" content="DDNex | Cheap & Professional Website Services Malaysia">
    <meta property="og:description" content="Designed in Malaysia. Built for the world. Professional web design and AI solutions for modern businesses.">
    <meta property="og:image" content="https://i.ibb.co/Y7yLkm5j/IMG-3157.png">
    
    <!-- TWITTER -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://ddnex.my/">
    <meta name="twitter:title" content="DDNex | Cheap & Professional Website Services Malaysia">
    <meta name="twitter:description" content="Designed in Malaysia. Built for the world. Professional web design and AI solutions.">
    <meta name="twitter:image" content="https://i.ibb.co/Y7yLkm5j/IMG-3157.png">

    <!-- CANONICAL URL -->
    <link rel="canonical" href="https://ddnex.my/" />

    <!-- STRUCTURED DATA: ORGANIZATION -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "DDNex",
        "alternateName": "DDNex Cloud",
        "url": "https://ddnex.my",
        "logo": "https://i.ibb.co/Y7yLkm5j/IMG-3157.png",
        "sameAs": [
            "https://www.linkedin.com/in/muhammad-danial-danish-217bb82ba/",
            "https://www.instagram.com/danialddanish/"
        ],
        "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "+60-12-260-0969",
            "contactType": "sales",
            "areaServed": "MY",
            "availableLanguage": "Malay,English"
        }
    }
    </script>

    <!-- Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Icons: RemixIcon -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        primary: '#10B981', // Emerald
                        secondary: '#059669',
                        accent: '#34D399',
                        surface: '#0A0A0A',
                        muted: '#64748b',
                        star: '#fbbf24',
                        dark: '#0A0A0A',
                        card: '#141414'
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'marquee': 'marquee 40s linear infinite',
                        'slide-up': 'slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'fade-in': 'fadeIn 0.6s ease-out forwards',
                        'scale-in': 'scaleIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        // TRANSITION KEYFRAMES (OPTIMIZED)
                        'page-enter': 'pageEnter 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'page-exit': 'pageExit 0.4s cubic-bezier(0.4, 0, 1, 1) forwards',
                    },
                    keyframes: {
                        float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-20px)' } },
                        marquee: { '0%': { transform: 'translateX(0)' }, '100%': { transform: 'translateX(-50%)' } },
                        slideUp: { '0%': { opacity: 0, transform: 'translateY(40px)' }, '100%': { opacity: 1, transform: 'translateY(0)' } },
                        fadeIn: { '0%': { opacity: 0 }, '100%': { opacity: 1 } },
                        scaleIn: { '0%': { opacity: 0, transform: 'scale(0.95)' }, '100%': { opacity: 1, transform: 'scale(1)' } },
                        // SPECIFIC TRANSITION ANIMATIONS
                        pageEnter: {
                            '0%': { opacity: 0, transform: 'translateY(15px)' },
                            '100%': { opacity: 1, transform: 'translateY(0)' }
                        },
                        pageExit: {
                            '0%': { opacity: 1, transform: 'translateY(0)' },
                            '100%': { opacity: 0, transform: 'translateY(-15px)' }
                        }
                    }
                }
            }
        }
    </script>

    <!-- Leaflet CSS (For Map) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>

    <!-- RAZORPAY CHECKOUT SCRIPT -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <!-- MAILCHIMP CONNECTION SCRIPT -->
    <script id="mcjs">!function(c,h,i,m,p){m=c.createElement(h),p=c.getElementsByTagName(h)[0],m.async=1,m.src=i,p.parentNode.insertBefore(m,p)}(document,"script","https://chimpstatic.com/mcjs-connected/js/users/384c79298eab3ae51990362dd/f88802037986932b3e513bf05.js");</script>

    <style>
        /* Base Reset & Scroll */
        * { 
            scroll-behavior: smooth; 
            -webkit-tap-highlight-color: transparent; 
            box-sizing: border-box;
        }
        
        html, body { 
            height: 100%; 
            width: 100%; 
            overflow-x: hidden; 
            overscroll-behavior-y: none; 
        }
        
        body { 
            font-family: 'Inter', sans-serif; 
            background: #0A0A0A; 
            color: #FFFFFF; 
            display: flex; 
            flex-direction: column; 
            position: relative;
        }
        
        main { flex: 1; width: 100%; position: relative; }
        
        /* Glassmorphism - Dark Mode Optimized */
        .glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .glass-strong {
            background: rgba(20, 20, 20, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2);
        }
        
        .text-gradient {
            background: linear-gradient(135deg, #FFFFFF 0%, #10B981 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .bg-mesh {
            background-color: #0A0A0A;
            background-image: 
                radial-gradient(at 0% 0%, rgba(16, 185, 129, 0.15) 0, transparent 50%), 
                radial-gradient(at 100% 0%, rgba(20, 20, 20, 0.1) 0, transparent 50%), 
                radial-gradient(at 100% 100%, rgba(16, 185, 129, 0.1) 0, transparent 50%),
                radial-gradient(at 0% 100%, rgba(20, 20, 20, 0.05) 0, transparent 50%);
        }
        
        /* ==========================================
           PAGE TRANSITION SYSTEM (OPTIMIZED)
           ========================================== */
        .page { 
            display: none; 
            opacity: 0; 
            min-height: 100%;
            width: 100%;
            position: absolute; 
            top: 0;
            left: 0;
            z-index: 10;
            background: #0A0A0A; 
        }
        
        .page.active { 
            display: block; 
            opacity: 1; 
            position: relative; 
            z-index: 20;
            animation: pageEnter 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        /* Exit animation class */
        .page.anim-exit {
            animation: pageExit 0.4s cubic-bezier(0.4, 0, 1, 1) forwards !important;
            pointer-events: none; /* Prevent clicks during exit */
            z-index: 5;
            position: absolute; /* Ensure it doesn't push layout */
            will-change: transform, opacity; /* Hardware accel */
        }

        /* Interactions */
        .hover-lift { 
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s ease; 
            will-change: transform; 
        }
        .hover-lift:hover { 
            transform: translateY(-8px); 
            box-shadow: 0 20px 40px -15px rgba(16, 185, 129, 0.2); 
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            touch-action: manipulation; 
        }
        .btn-primary:before {
            content: '';
            position: absolute; top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        .btn-primary:hover:before { left: 100%; }
        .btn-primary:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 10px 30px -10px rgba(16, 185, 129, 0.5); 
        }
        
        .input-field {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            color: white;
        }
        .input-field:focus {
            border-color: #10B981;
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
            outline: none;
        }
        .input-field::placeholder { color: rgba(255,255,255,0.4); }
        
        .nav-link { position: relative; cursor: pointer; }
        .nav-link:after {
            content: '';
            position: absolute; bottom: -4px; left: 0;
            width: 0; height: 2px;
            background: linear-gradient(90deg, #10B981, #34D399);
            transition: width 0.3s ease;
        }
        .nav-link:hover:after, .nav-link.active:after { width: 100%; }
        
        .blob {
            position: absolute; filter: blur(80px); opacity: 0.2;
            animation: float 10s ease-in-out infinite;
            will-change: transform;
            z-index: 0;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0A0A0A; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #10B981; }

        /* CUSTOM NOTIFICATION MODAL */
        .notification-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            z-index: 100005; 
            display: none; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.3s;
        }
        .notification-modal.active { display: flex; opacity: 1; }
        .notification-content {
            background: #141414;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 24px;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            transform: scale(0.9);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .notification-modal.active .notification-content { transform: scale(1); }
        
        .notif-icon-box {
            width: 64px; height: 64px; border-radius: 50%;
            margin: 0 auto 1.5rem;
            display: flex; align-items: center; justify-content: center;
        }
        .notif-success { background: rgba(16, 185, 129, 0.1); color: #10B981; }
        .notif-error { background: rgba(239, 68, 68, 0.1); color: #EF4444; }
        .notif-warning { background: rgba(245, 158, 11, 0.1); color: #F59E0B; }
        .notif-info { background: rgba(59, 130, 246, 0.1); color: #3B82F6; }

        /* Processing overlay */
        #processing-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px);
            z-index: 100002; display: none;
            flex-direction: column; justify-content: center; align-items: center;
        }
        
        /* Modal styles */
        .modal-overlay {
            position: fixed; inset: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            z-index: 100001;
            display: none; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.3s;
        }
        .modal-overlay.active { display: flex; opacity: 1; }
        .modal-content {
            background: #141414;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 24px;
            padding: 2.5rem;
            max-width: 450px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            animation: scaleIn 0.4s ease;
        }

        /* Mobile menu */
        #mobile-menu { 
            display: none; 
            position: fixed; 
            top: 80px; 
            left: 0; 
            width: 100%; 
            height: calc(100vh - 80px);
            background: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(20px);
            z-index: 40; 
            overflow-y: auto;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        #mobile-menu.active { display: block; animation: slideDown 0.3s ease; }

        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        /* Password requirements */
        .password-requirements {
            margin-top: 0.5rem;
            font-size: 0.75rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }
        .req-item {
            color: #94a3b8;
            display: flex; align-items: center; gap: 6px;
            transition: all 0.3s ease;
        }
        .req-item.valid { color: #10B981; font-weight: 600; }

        /* Star rating */
        .star-icon { 
            font-size: 1.5rem; 
            color: #334155; 
            cursor: pointer; 
            transition: color 0.2s, transform 0.2s;
            pointer-events: auto;
        }
        .star-icon:hover { transform: scale(1.2); }
        .star-icon.hovered, .star-icon.selected { color: #fbbf24; }

        /* Package cards */
        .package-popular {
            border: 2px solid #10B981;
            transform: scale(1.02);
            position: relative;
        }
        .package-popular::before {
            content: 'Most Popular';
            position: absolute; top: -12px; left: 50%; transform: translateX(-50%);
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            padding: 4px 16px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        /* Radio options */
        .radio-option {
            border: 1px solid rgba(255,255,255,0.1);
            padding: 1rem 1.2rem;
            border-radius: 12px;
            display: flex; align-items: center; gap: 12px;
            cursor: pointer; transition: all 0.2s;
            background: rgba(255,255,255,0.02);
        }
        .radio-option:hover { border-color: rgba(16,185,129,0.5); background: rgba(255,255,255,0.04); }
        .radio-option.selected {
            border-color: #10B981;
            background: rgba(16, 185, 129, 0.1);
            box-shadow: 0 0 0 1px rgba(16, 185, 129, 0.2);
        }

        /* FAQ accordion */
        .faq-item { border-bottom: 1px solid rgba(255,255,255,0.1); }
        .faq-question {
            padding: 1.5rem;
            font-weight: 600;
            cursor: pointer;
            display: flex; justify-content: space-between; align-items: center;
        }
        .faq-answer {
            max-height: 0; overflow: hidden;
            transition: max-height 0.4s ease, padding 0.4s;
            padding: 0 1.5rem;
        }
        .faq-item.active .faq-answer {
            max-height: 500px;
            padding: 0 1.5rem 1.5rem;
        }

        /* Status badges */
        .status-badge { padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 700; }
        .status-pending { background: rgba(245, 158, 11, 0.1); color: #F59E0B; }
        .status-paid { background: rgba(59, 130, 246, 0.1); color: #3B82F6; }
        .status-completed { background: rgba(16, 185, 129, 0.1); color: #10B981; }
        .status-cancelled { background: rgba(239, 68, 68, 0.1); color: #EF4444; }
        .status-open { background: rgba(245, 158, 11, 0.1); color: #F59E0B; }

        /* Globe Canvas (Decoration) */
        #globe-canvas {
            position: absolute;
            right: -100px;
            top: 50%;
            transform: translateY(-50%);
            width: 600px;
            height: 600px;
            opacity: 0.8;
            pointer-events: none;
            z-index: 1;
        }
        
        /* Marquee */
        .marquee-container {
            overflow: hidden;
            white-space: nowrap;
            display: flex;
            width: 100%;
        }
        
        .marquee-content {
            display: inline-flex;
            width: max-content; 
            animation: marquee 40s linear infinite;
        }
        
        .marquee-content:hover { animation-play-state: paused; }

        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        /* ==========================================
           LEADERSHIP STYLES (NEW)
           ========================================== */
        .leader-card {
            background: #141414;
            border-radius: 1.5rem;
            overflow: hidden;
            box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            border: 1px solid rgba(255,255,255,0.05);
        }
        
        .leader-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
            background: linear-gradient(90deg, #10B981, #059669);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.4s ease;
        }
        
        .leader-card:hover::before { transform: scaleX(1); }

        .leader-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px -10px rgba(16, 185, 129, 0.2);
        }

        .leader-img-wrapper {
            position: relative;
            padding-top: 120%; /* Aspect Ratio */
            overflow: hidden;
            background-color: #1a1a1a;
        }

        .leader-img {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover;
            transition: transform 0.6s ease;
            filter: grayscale(50%);
        }

        .leader-card:hover .leader-img {
            transform: scale(1.05);
            filter: grayscale(0%);
        }

        .leader-content {
            padding: 2rem;
            text-align: center;
            position: relative;
            z-index: 2;
            background: #141414;
        }

        .leader-role {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: rgba(16, 185, 129, 0.1);
            color: #34D399;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .leader-name {
            font-size: 1.5rem;
            font-weight: 800;
            color: #FFFFFF;
            margin-bottom: 0.5rem;
        }

        .leader-bio {
            color: #94a3b8;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* ==========================================
           AGGRESSIVE MOBILE RESPONSIVE OPTIMIZATION
           ========================================== */
        @media (max-width: 768px) {
            .blob { display: none; }
            .package-popular { transform: scale(1); }
            #globe-canvas { display: none; }
            
            body {
                font-size: 14px;
                min-height: 100vh;
                min-height: -webkit-fill-available;
            }
            
            html { height: -webkit-fill-available; }
            
            section { padding-top: 3rem !important; padding-bottom: 3rem !important; }
            .py-24 { padding-top: 3rem !important; padding-bottom: 3rem !important; }
            
            h1 { font-size: 2rem !important; line-height: 1.2 !important; }
            h2 { font-size: 1.75rem !important; }
            h3 { font-size: 1.4rem !important; }
            .text-5xl { font-size: 2rem !important; }
            .text-7xl { font-size: 2.5rem !important; }
            
            .grid-cols-3, .grid-cols-4, .grid-cols-2 { grid-template-columns: 1fr !important; gap: 1.5rem !important; }
            .lg\:col-span-2, .lg\:col-span-1 { grid-column: span 1 !important; }
            
            .modal-content, .notification-content { 
                padding: 1.5rem; 
                width: 95%; 
                margin: 0.5rem;
                max-height: 85vh;
                border-radius: 16px;
            }
            
            #map { height: 300px !important; }
            .input-field { font-size: 16px !important; }
            
            #mobile-menu a {
                padding: 1rem;
                display: block;
                font-size: 1.1rem;
                border-bottom: 1px solid rgba(255,255,255,0.05);
                color: #FFFFFF;
            }
            #mobile-menu a:active { background: rgba(255,255,255,0.05); }
            
            .order-summary-mobile {
                order: -1;
                margin-bottom: 2rem;
            }

            footer .grid { grid-template-columns: 1fr; gap: 2rem; text-align: center; }
            footer .flex { justify-content: center !important; }
            
            .hero-badge { font-size: 0.8rem !important; padding: 0.25rem 0.75rem; }
            .btn-primary { padding: 0.75rem 1.5rem; font-size: 1rem; }
            
            .max-w-7xl {
                padding-left: 1rem !important;
                padding-right: 1rem !important;
            }
            
            #desktopAuthLinks { display: none !important; }
            .page { position: absolute; width: 100%; left: 0; }
            .leader-card { margin-bottom: 1rem; }
        }
        
        @keyframes scaleIn {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        /* Map Styles Dark Mode */
        #global-map-section .leaflet-popup-content-wrapper {
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            background: #141414;
            border: 1px solid rgba(255,255,255,0.1);
        }
        #global-map-section .leaflet-popup-content {
            margin: 12px;
            font-family: 'Inter', sans-serif;
            color: white;
        }
        .custom-marker { background: none; border: none; }
        .pulse-ring {
            width: 36px; height: 36px; border-radius: 50%;
            background: rgba(16, 185, 129, 0.25);
            animation: pulse-ring 2.5s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
        }
        .marker-pin {
            width: 24px; height: 24px; border-radius: 50% 50% 50% 0;
            background: #10B981;
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
        }
        .marker-pin::after {
            content: ''; width: 12px; height: 12px; margin: 6px 0 0 6px;
            background: #fff; position: absolute; border-radius: 50%;
        }
        .popup-content { min-width: 220px; }
        .popup-title { font-weight: bold; font-size: 1.1em; color: #FFFFFF; margin-bottom: 0.5em; }
        .popup-stats { font-size: 0.9em; color: #94a3b8; margin-bottom: 0.8em; line-height: 1.4; }
        .popup-link {
            display: inline-block; background-color: #10B981; color: white;
            padding: 6px 12px; border-radius: 6px; text-decoration: none;
            font-size: 0.9em; font-weight: 500; transition: background 0.3s;
        }
        .popup-link:hover { background-color: #059669; }
        
        @keyframes pulse-ring {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.8); opacity: 0.4; }
            100% { transform: translate(-50%, -50%) scale(2.5); opacity: 0; }
        }
        
        /* Review Cards Dark */
        .review-card { display: flex; flex-direction: column; gap: 1rem; }
        .review-header { display: flex; align-items: center; gap: 0.75rem; }
        .review-avatar {
            width: 40px; height: 40px; border-radius: 50%;
            background: linear-gradient(135deg, #1e293b, #334155);
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; color: #FFFFFF; font-size: 0.875rem; text-transform: uppercase;
        }
        .review-info h4 { font-weight: 600; font-size: 0.95rem; color: #FFFFFF; }
        .review-date { font-size: 0.75rem; color: #64748b; }
        .review-stars { display: flex; gap: 2px; margin-bottom: 0.25rem; }
        .review-text { font-size: 0.9rem; color: #cbd5e1; line-height: 1.5; font-style: italic; }
        
        /* Product Cards Dark */
        .product-card {
            display: flex; flex-direction: column;
            background: #141414; border-radius: 1rem; overflow: hidden;
            border: 1px solid rgba(255,255,255,0.05);
            transition: all 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .product-image {
            height: 200px; width: 100%; object-fit: cover;
            background-color: #1a1a1a;
        }
        .product-body {
            padding: 1.5rem; flex: 1; display: flex; flex-direction: column;
        }
        .product-price {
            font-size: 1.25rem; font-weight: 700; color: #10B981; margin-top: 0.5rem;
        }

        /* Checkout Dark */
        .checkout-container { max-width: 800px; margin: 0 auto; width: 100%; }
        .step-indicator {
            display: flex; justify-content: space-between; margin-bottom: 2rem; position: relative;
        }
        .step-indicator::before {
            content: ''; position: absolute; top: 50%; left: 0; width: 100%; height: 2px;
            background: rgba(255,255,255,0.1); z-index: 0; transform: translateY(-50%);
        }
        .step-dot {
            width: 32px; height: 32px; border-radius: 50%;
            background: rgba(255,255,255,0.1); color: #94a3b8;
            display: flex; align-items: center; justify-content: center;
            font-weight: 600; font-size: 0.9rem; position: relative; z-index: 1;
            transition: all 0.3s ease;
        }
        .step-dot.active {
            background: #10B981; color: white;
            box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.2);
        }
        .step-dot.completed { background: #059669; color: white; }
        .step-content { display: none; animation: fadeIn 0.4s ease; }
        .step-content.active { display: block; }

        .domain-preview-box {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px; padding: 0.75rem 1rem;
            font-family: 'Courier New', monospace; color: #FFFFFF;
            margin-top: 0.5rem; display: inline-block; font-weight: 600;
        }
        .domain-highlight { color: #10B981; }

        .feature-list-check li {
            display: flex; align-items: flex-start; gap: 0.75rem;
            margin-bottom: 0.75rem; color: #cbd5e1;
        }
        .feature-list-check i { color: #10B981; margin-top: 4px; }

        .summary-card {
            background: rgba(255,255,255,0.03); border-radius: 1rem;
            padding: 1.5rem; border: 1px solid rgba(255,255,255,0.08);
        }
        .summary-row {
            display: flex; justify-content: space-between; margin-bottom: 0.75rem;
            font-size: 0.95rem; color: #94a3b8;
        }
        .summary-row.total {
            border-top: 2px solid rgba(255,255,255,0.1);
            padding-top: 1rem; margin-top: 1rem; margin-bottom: 0;
            font-weight: 700; font-size: 1.2rem; color: #FFFFFF;
        }
    </style>
</head>
<body class="bg-dark antialiased">

    <!-- CUSTOM NOTIFICATION MODAL -->
    <div id="notification-modal" class="notification-modal">
        <div class="notification-content">
            <div id="notif-icon-box" class="notif-icon-box notif-info">
                <i id="notif-icon" class="ri-information-fill text-3xl"></i>
            </div>
            <h3 id="notif-title" class="text-xl font-bold text-white mb-2">Notice</h3>
            <p id="notif-message" class="text-slate-400 mb-6">Notification message goes here.</p>
            <button onclick="closeNotification()" class="w-full py-3 rounded-lg btn-primary text-white font-semibold">Okay</button>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="auth-modal" class="modal-overlay">
        <div class="modal-content text-center">
            <i class="ri-user-unfollow-fill text-5xl text-slate-300 mb-4"></i>
            <h2 class="text-2xl font-bold text-white mb-2">Login Required</h2>
            <p class="text-slate-400 mb-6">You need an account to proceed with your purchase. Please sign in or create one.</p>
            <div class="space-y-3">
                <button onclick="navigateTo('login'); closeAuthModal()" class="w-full py-3 rounded-lg btn-primary text-white font-semibold">Sign In</button>
                <button onclick="navigateTo('signup'); closeAuthModal()" class="w-full py-3 rounded-lg border border-slate-700 text-slate-300 font-semibold hover:bg-slate-800">Create Account</button>
            </div>
            <button onclick="closeAuthModal()" class="mt-4 text-slate-500 hover:text-slate-300 text-sm">Cancel</button>
        </div>
    </div>

    <!-- Demo Modal -->
    <div id="demo-modal" class="modal-overlay">
        <div class="modal-content max-w-3xl">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-white">Watch Our Process</h3>
                <button onclick="document.getElementById('demo-modal').classList.remove('active')" class="text-slate-400 hover:text-slate-300">
                    <i class="ri-close-line text-2xl"></i>
                </button>
            </div>
            <div class="aspect-video bg-slate-900 rounded-xl overflow-hidden border border-slate-800">
                 <iframe class="w-full h-full" src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="Demo Video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>
    
    <!-- Success Modal -->
    <div id="success-modal" class="modal-overlay">
        <div class="modal-content text-center">
            <div class="w-20 h-20 rounded-full bg-emerald-900/30 flex items-center justify-center mx-auto mb-4">
                <i class="ri-check-line text-4xl text-emerald-400"></i>
            </div>
            <h3 class="text-2xl font-bold text-white mb-2" id="success-title">Success!</h3>
            <p class="text-slate-400 mb-6" id="success-message">Operation completed successfully.</p>
            <button onclick="document.getElementById('success-modal').classList.remove('active')" class="w-full py-3 rounded-lg btn-primary text-white font-semibold">Okay</button>
        </div>
    </div>

    <!-- Quick Terms Read Modal -->
    <div id="terms-quick-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-white">Quick Terms & Privacy Read</h3>
                <button onclick="document.getElementById('terms-quick-modal').classList.remove('active')" class="text-slate-400 hover:text-slate-300">
                    <i class="ri-close-line text-2xl"></i>
                </button>
            </div>
            <div class="h-64 overflow-y-auto pr-2 text-sm text-slate-400 space-y-3">
                <p><strong>1. Hosting:</strong> Free subdomain for 1st year only. Renewal chargeable at RM 55/yr.</p>
                <p><strong>2. Payments:</strong> Setup fees are non-refundable. Monthly plans billed in advance.</p>
                <p><strong>3. Delivery:</strong> Timelines are estimates. Delays due to client feedback are not DDNex responsibility.</p>
                <p><strong>4. Privacy:</strong> We collect basic profile info (Name, Email, Phone) to process orders and provide support. We do not sell your data.</p>
                <p><strong>5. Refund:</strong> All payments are non-refundable unless explicitly stated in writing.</p>
                <p class="text-xs text-slate-600 mt-4">By proceeding, you agree to the full Terms & Conditions available on the website.</p>
            </div>
            <button onclick="document.getElementById('terms-quick-modal').classList.remove('active')" class="w-full mt-4 py-2 rounded-lg bg-slate-800 text-slate-300 font-medium hover:bg-slate-700">Close</button>
        </div>
    </div>

    <!-- Processing Overlay -->
    <div id="processing-overlay">
        <div class="w-16 h-16 border-4 border-slate-700 border-t-emerald-500 rounded-full animate-spin mb-6"></div>
        <div id="process-message" class="text-xl text-white font-medium">Processing...</div>
        <div class="mt-4 p-4 bg-emerald-900/20 border border-emerald-700/30 rounded-lg text-emerald-300 text-sm max-w-md text-center">
            <i class="ri-refresh-line mr-2"></i>
            <strong>Note:</strong> Do not close this page. If stuck, check your email for confirmation.
        </div>
    </div>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 glass-strong border-b border-slate-800 transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <a href="#" onclick="event.preventDefault(); navigateTo('home')" class="flex items-center gap-3 group">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-600 to-emerald-800 flex items-center justify-center transform group-hover:rotate-12 transition-transform duration-300 shadow-lg">
                        <img src="https://i.ibb.co/5gtxDtKd/blacklogo-dd.png" alt="DDNex" class="w-6 h-6 object-contain invert">
                    </div>
                    <span class="text-2xl font-bold tracking-tight text-white">DD<span class="text-gradient">Nex</span></span>
                </a>

                <div class="hidden md:flex items-center gap-6">
                    <a href="#" onclick="event.preventDefault(); navigateTo('home')" class="nav-link text-sm font-medium text-slate-300 hover:text-white transition-colors">Home</a>
                    <a href="#" onclick="event.preventDefault(); navigateTo('services')" class="nav-link text-sm font-medium text-slate-300 hover:text-white transition-colors">Services</a>
                    <a href="#" onclick="event.preventDefault(); navigateTo('products')" class="nav-link text-sm font-medium text-slate-300 hover:text-white transition-colors"> Our Products</a>
                    <a href="#" onclick="event.preventDefault(); navigateTo('pricing')" class="nav-link text-sm font-medium text-slate-300 hover:text-white transition-colors">Pricing</a>
                    <a href="#" onclick="event.preventDefault(); navigateTo('reviews')" class="nav-link text-sm font-medium text-slate-300 hover:text-white transition-colors">Reviews</a>
                    <a href="#" onclick="event.preventDefault(); navigateTo('clients')" class="nav-link text-sm font-medium text-slate-300 hover:text-white transition-colors">Portfolio</a>
                    <a href="#" onclick="event.preventDefault(); navigateTo('leadership')" class="nav-link text-sm font-medium text-slate-300 hover:text-white transition-colors">Leadership</a>
                    <a href="#" onclick="event.preventDefault(); navigateTo('contact')" class="nav-link text-sm font-medium text-slate-300 hover:text-white transition-colors">Contact</a>
                </div>

                <div class="flex items-center gap-4 hidden md:flex" id="desktopAuthLinks"></div>
                
                <button class="md:hidden text-slate-300 p-2 ml-4 z-50 relative" onclick="toggleMobileMenu()">
                    <i id="mobile-menu-icon" class="ri-menu-4-line text-2xl"></i>
                </button>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu">
            <div class="px-4 py-2 bg-dark/95 h-full">
                <a href="#" onclick="event.preventDefault(); navigateTo('home'); toggleMobileMenu()" class="block text-slate-300 hover:text-white py-4 font-medium border-b border-slate-800">Home</a>
                <a href="#" onclick="event.preventDefault(); navigateTo('services'); toggleMobileMenu()" class="block text-slate-300 hover:text-white py-4 font-medium border-b border-slate-800">Services</a>
                <a href="#" onclick="event.preventDefault(); navigateTo('products'); toggleMobileMenu()" class="block text-slate-300 hover:text-white py-4 font-medium border-b border-slate-800">Products</a>
                <a href="#" onclick="event.preventDefault(); navigateTo('pricing'); toggleMobileMenu()" class="block text-slate-300 hover:text-white py-4 font-medium border-b border-slate-800">Pricing</a>
                <a href="#" onclick="event.preventDefault(); navigateTo('reviews'); toggleMobileMenu()" class="block text-slate-300 hover:text-white py-4 font-medium border-b border-slate-800">Reviews</a>
                <a href="#" onclick="event.preventDefault(); navigateTo('clients'); toggleMobileMenu()" class="block text-slate-300 hover:text-white py-4 font-medium border-b border-slate-800">Portfolio</a>
                <a href="#" onclick="event.preventDefault(); navigateTo('leadership'); toggleMobileMenu()" class="block text-slate-300 hover:text-white py-4 font-medium border-b border-slate-800">Leadership</a>
                <a href="#" onclick="event.preventDefault(); navigateTo('contact'); toggleMobileMenu()" class="block text-slate-300 hover:text-white py-4 font-medium border-b border-slate-800">Contact</a>
                <div id="mobileAuthLinksContainer" class="pt-4 mt-4 border-t border-slate-800 flex flex-col gap-3"></div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="">

        <!-- HOME PAGE -->
        <section id="page-home" class="page active">
            <!-- Hero -->
            <div class="relative min-h-[90vh] md:min-h-screen flex items-center bg-mesh overflow-hidden pt-20">
                <div class="blob bg-emerald-500 w-96 h-96 rounded-full top-0 left:0 -translate-x-1/2 -translate-y-1/2"></div>
                <div class="blob bg-emerald-600 w-96 h-96 rounded-full bottom-0 right-0 translate-x-1/2 translate-y-1/2" style="animation-delay: -5s;"></div>
                <canvas id="globe-canvas"></canvas>
                
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 w-full pb-12 md:pb-0">
                    <div class="grid lg:grid-cols-2 gap-12 items-center">
                        <div class="animate-slide-up">
                            <div class="hero-badge inline-flex items-center gap-2 px-4 py-2 rounded-full glass mb-6 border border-emerald-900/50">
                                <span class="flex h-2 w-2 rounded-full bg-emerald-500 animate-pulse"></span>
                                <span class="text-sm font-medium text-slate-300">Malaysia's #1 Web Solutions</span>
                            </div>
                            <h1 class="text-4xl md:text-5xl lg:text-7xl font-bold leading-[1.1] mb-6">
                                <span class="block text-white mb-2">Custom Websites for</span>
                                <span class="text-gradient">Malaysian Businesses</span>
                            </h1>
                            <p class="text-lg md:text-xl text-slate-400 mb-8 max-w-lg leading-relaxed">
                                Designed in Malaysia. Built for the world. Professional web design and AI solutions for modern businesses by DDNex.
                            </p>
                            <div class="flex flex-wrap gap-4 mb-12">
                                <button onclick="navigateTo('pricing')" class="px-8 py-4 rounded-full btn-primary text-white font-bold text-lg flex items-center gap-2 shadow-xl shadow-emerald-900/20">
                                    View Pricing
                                    <i class="ri-arrow-right-line"></i>
                                </button>
                                <button onclick="document.getElementById('demo-modal').classList.add('active')" class="px-8 py-4 rounded-full glass text-slate-200 font-semibold text-lg hover:bg-white/10 transition-all flex items-center gap-2">
                                    <i class="ri-play-circle-line"></i>
                                    Watch Demo
                                </button>
                            </div>
                            
                            <!-- Stats -->
                            <div class="grid grid-cols-3 gap-6 max-w-md">
                                <div>
                                    <div class="text-3xl font-bold text-white">99.9%</div>
                                    <div class="text-sm text-slate-500">Uptime SLA</div>
                                </div>
                                <div>
                                    <div class="text-3xl font-bold text-white">10+</div>
                                    <div class="text-sm text-slate-500">Happy Clients</div>
                                </div>
                                <div>
                                    <div class="text-3xl font-bold text-white">24/7</div>
                                    <div class="text-sm text-slate-500">Support</div>
                                </div>
                            </div>
                        </div>

                        <!-- Dashboard Preview -->
                        <div class="relative animate-scale-in hidden lg:block">
                            <div class="absolute -inset-4 bg-gradient-to-r from-emerald-900/20 to-slate-900/20 rounded-3xl blur-2xl"></div>
                            <div class="relative glass rounded-2xl p-2 shadow-2xl border border-slate-800">
                                <div class="bg-dark rounded-xl overflow-hidden border border-slate-800">
                                    <div class="flex items-center gap-2 px-4 py-3 bg-slate-900/50 border-b border-slate-800">
                                        <div class="flex gap-1.5">
                                            <div class="w-3 h-3 rounded-full bg-red-500"></div>
                                            <div class="w-3 h-3 rounded-full bg-amber-500"></div>
                                            <div class="w-3 h-3 rounded-full bg-green-500"></div>
                                        </div>
                                        <div class="flex-1 text-center text-xs text-slate-500 font-mono">DDNex Dashboard</div>
                                    </div>
                                    <div class="p-6 space-y-4">
                                        <div class="flex items-center justify-between mb-6">
                                            <div class="flex items-center gap-3">
                                                <div class="w-10 h-10 rounded-lg bg-emerald-900/50 flex items-center justify-center">
                                                    <i class="ri-server-line text-emerald-400 text-xl"></i>
                                                </div>
                                                <div>
                                                    <div class="text-sm font-semibold text-white">Active Projects</div>
                                                    <div class="text-xs text-emerald-400 flex items-center gap-1">
                                                        <span class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></span>
                                                        5 Live Sites
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="grid grid-cols-3 gap-3">
                                            <div class="glass rounded-lg p-3 text-center">
                                                <div class="text-xs text-slate-500 mb-1">HTML Sites</div>
                                                <div class="text-lg font-bold text-emerald-400">3</div>
                                            </div>
                                            <div class="glass rounded-lg p-3 text-center">
                                                <div class="text-xs text-slate-500 mb-1">Interactive</div>
                                                <div class="text-lg font-bold text-emerald-300">1</div>
                                            </div>
                                            <div class="glass rounded-lg p-3 text-center">
                                                <div class="text-xs text-slate-500 mb-1">AI Powered</div>
                                                <div class="text-lg font-bold text-emerald-200">1</div>
                                            </div>
                                        </div>

                                        <div class="glass rounded-lg p-4">
                                            <div class="flex justify-between text-xs text-slate-500 mb-3">
                                                <span>Project Delivery Status</span>
                                                <span class="text-emerald-400">â†‘ 85% On Time</span>
                                            </div>
                                            <div class="flex items-end gap-1 h-16">
                                                <div class="flex-1 bg-emerald-900/30 rounded-t hover:bg-emerald-800/30 transition-colors" style="height: 60%"></div>
                                                <div class="flex-1 bg-emerald-900/30 rounded-t hover:bg-emerald-800/30 transition-colors" style="height: 80%"></div>
                                                <div class="flex-1 bg-emerald-900/30 rounded-t hover:bg-emerald-800/30 transition-colors" style="height: 45%"></div>
                                                <div class="flex-1 bg-emerald-800/40 rounded-t hover:bg-emerald-700/40 transition-colors" style="height: 90%"></div>
                                                <div class="flex-1 bg-emerald-900/30 rounded-t hover:bg-emerald-800/30 transition-colors" style="height: 70%"></div>
                                                <div class="flex-1 bg-emerald-700/50 rounded-t hover:bg-emerald-600/50 transition-colors" style="height: 100%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Trust Strip (Marquee) -->
            <div class="py-8 md:py-12 border-y border-slate-800 bg-slate-900/30 overflow-hidden">
                <div class="marquee-container">
                    <div class="marquee-content">
                        <!-- First Set -->
                        <div class="flex gap-8 md:gap-16 px-8 items-center">
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-check-double-line text-emerald-500 text-xl"></i>Trusted by 10+ Clients</div>
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-global-line text-emerald-500 text-xl"></i>Global Standard Hosting</div>
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-rocket-line text-emerald-500 text-xl"></i>Fast Delivery Guaranteed</div>
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-shield-check-line text-emerald-500 text-xl"></i>Secure Payment Gateway</div>
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-customer-service-2-line text-emerald-500 text-xl"></i>24/7 Technical Support</div>
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-star-s-fill text-emerald-500 text-xl"></i>5-Star Rated Services</div>
                        </div>
                        <!-- Second Set -->
                        <div class="flex gap-8 md:gap-16 px-8 items-center">
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-check-double-line text-emerald-500 text-xl"></i>Trusted by 10+ Clients</div>
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-global-line text-emerald-500 text-xl"></i>Global Standard Hosting</div>
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-rocket-line text-emerald-500 text-xl"></i>Fast Delivery Guaranteed</div>
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-shield-check-line text-emerald-500 text-xl"></i>Secure Payment Gateway</div>
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-customer-service-2-line text-emerald-500 text-xl"></i>24/7 Technical Support</div>
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-star-s-fill text-emerald-500 text-xl"></i>5-Star Rated Services</div>
                        </div>
                        <!-- Third Set -->
                        <div class="flex gap-8 md:gap-16 px-8 items-center">
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-check-double-line text-emerald-500 text-xl"></i>Trusted by 10+ Clients</div>
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-global-line text-emerald-500 text-xl"></i>Global Standard Hosting</div>
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-rocket-line text-emerald-500 text-xl"></i>Fast Delivery Guaranteed</div>
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-shield-check-line text-emerald-500 text-xl"></i>Secure Payment Gateway</div>
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-customer-service-2-line text-emerald-500 text-xl"></i>24/7 Technical Support</div>
                            <div class="flex items-center gap-2 text-slate-300 font-semibold whitespace-nowrap text-sm md:text-base"><i class="ri-star-s-fill text-emerald-500 text-xl"></i>5-Star Rated Services</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Services Grid -->
            <div class="py-12 md:py-24 bg-dark relative">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-12 md:mb-16 animate-fade-in">
                        <h2 class="text-3xl md:text-5xl font-bold mb-4 text-white">Our <span class="text-gradient">Solutions</span></h2>
                        <p class="text-slate-400 text-lg max-w-2xl mx-auto">Designed in Malaysia. Built for the world. Choose the perfect package for your business needs.</p>
                    </div>

                    <div class="grid md:grid-cols-3 gap-8">
                        <!-- Static Website -->
                        <div class="group glass rounded-2xl p-6 md:p-8 hover-lift cursor-pointer border border-slate-800" onclick="selectPackage('Basic HTML Website', 'html')">
                            <div class="w-14 h-14 rounded-2xl bg-emerald-900/50 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                                <i class="ri-file-list-3-line text-2xl text-emerald-400"></i>
                            </div>
                            <h3 class="text-xl font-bold text-white mb-3">Static Website</h3>
                            <p class="text-slate-400 leading-relaxed mb-4">Perfect for portfolios and small businesses. Fast loading and cost-effective with clean HTML/CSS.</p>
                            <ul class="space-y-2 text-sm text-slate-500 mb-6">
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>1 Landing Page</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Mobile Responsive</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Basic SEO</li>
                            </ul>
                            <div class="flex items-center text-emerald-400 font-semibold text-sm cursor-pointer" onclick="event.stopPropagation(); navigateTo('services')">
                                Learn more <i class="ri-arrow-right-line ml-2"></i>
                            </div>
                        </div>

                        <!-- Interactive Website -->
                        <div class="group glass rounded-2xl p-6 md:p-8 hover-lift cursor-pointer border border-slate-800" onclick="selectPackage('Front-End Website', 'frontend')">
                            <div class="w-14 h-14 rounded-2xl bg-emerald-900/50 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                                <i class="ri-layout-masonry-line text-2xl text-emerald-400"></i>
                            </div>
                            <h3 class="text-xl font-bold text-white mb-3">Interactive Website</h3>
                            <p class="text-slate-400 leading-relaxed mb-4">Dynamic, engaging websites with animations and user interactions. Up to 5 pages included.</p>
                            <ul class="space-y-2 text-sm text-slate-500 mb-6">
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Up to 5 Pages</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Animations & UI</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>WhatsApp Integration</li>
                            </ul>
                            <div class="flex items-center text-emerald-400 font-semibold text-sm cursor-pointer" onclick="event.stopPropagation(); navigateTo('services')">
                                Learn more <i class="ri-arrow-right-line ml-2"></i>
                            </div>
                        </div>

                        <!-- AI Powered -->
                        <div class="group glass rounded-2xl p-6 md:p-8 hover-lift cursor-pointer border border-slate-800" onclick="selectPackage('AI Powered Website', 'ai')">
                            <div class="w-14 h-14 rounded-2xl bg-emerald-900/50 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                                <i class="ri-brain-line text-2xl text-emerald-400"></i>
                            </div>
                            <h3 class="text-xl font-bold text-white mb-3">AI-Powered Solutions</h3>
                            <p class="text-slate-400 leading-relaxed mb-4">Integrate ChatGPT chatbots and automation to save time and costs. Future-proof your business.</p>
                            <ul class="space-y-2 text-sm text-slate-500 mb-6">
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>AI Chatbot</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Auto-Response</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Smart Analytics</li>
                            </ul>
                            <div class="flex items-center text-emerald-400 font-semibold text-sm cursor-pointer" onclick="event.stopPropagation(); navigateTo('services')">
                                Learn more <i class="ri-arrow-right-line ml-2"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Portfolio Preview (Home) -->
            <div class="py-12 md:py-24 bg-slate-900/20">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl md:text-5xl font-bold mb-4 text-white">Recent <span class="text-gradient">Work</span></h2>
                        <p class="text-slate-400 text-lg">Check out some of our latest completed projects.</p>
                    </div>
                    <div id="home-portfolio-grid" class="grid md:grid-cols-3 gap-8">
                        <!-- JS will inject items here -->
                    </div>
                    <div class="text-center mt-12">
                        <button onclick="navigateTo('clients')" class="px-8 py-4 rounded-full btn-primary text-white font-bold">View All Projects</button>
                    </div>
                </div>
            </div>

            <!-- GLOBAL CLIENT MAP SECTION -->
            <section id="global-map-section" class="py-12 md:py-24 bg-dark relative overflow-hidden">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                    <h2 class="text-4xl md:text-5xl font-bold mb-4 text-white">Global Client <span class="text-gradient">Reach</span></h2>
                    <p class="text-xl text-slate-400 max-w-3xl mx-auto mb-12">
                        Interactive map of live websites â€“ zoom, pan & click pins for details & direct visits.
                    </p>

                    <div id="map" class="w-full h-[500px] rounded-2xl shadow-lg border border-slate-800 mb-16 z-10 relative bg-slate-900"></div>

                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8 max-w-5xl mx-auto">
                        <div class="text-center">
                            <div class="text-4xl md:text-5xl font-bold text-white mb-2">142</div>
                            <div class="text-sm md:text-lg text-slate-400 font-medium">Websites Live</div>
                        </div>
                        <div class="text-center">
                            <div class="text-4xl md:text-5xl font-bold text-white mb-2">11</div>
                            <div class="text-sm md:text-lg text-slate-400 font-medium">Active Regions</div>
                        </div>
                        <div class="text-center">
                            <div class="text-4xl md:text-5xl font-bold text-white mb-2">17</div>
                            <div class="text-sm md:text-lg text-slate-400 font-medium">Countries Served</div>
                        </div>
                        <div class="text-center">
                            <div class="text-4xl md:text-5xl font-bold text-white mb-2">6+</div>
                            <div class="text-sm md:text-lg text-slate-400 font-medium">Years of Excellence</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Why Choose Us -->
            <div class="py-12 md:py-24 bg-slate-900/20">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-12 md:mb-16">
                        <h2 class="text-3xl md:text-5xl font-bold mb-4 text-white">Why Choose <span class="text-gradient">Us?</span></h2>
                        <p class="text-slate-400 text-lg max-w-2xl mx-auto">We combine technical expertise with a deep understanding of the local market.</p>
                    </div>

                    <div class="grid md:grid-cols-4 gap-8">
                        <div class="text-center p-6">
                            <div class="w-16 h-16 rounded-2xl bg-emerald-900/50 flex items-center justify-center mx-auto mb-4">
                                <i class="ri-rocket-2-line text-3xl text-emerald-400"></i>
                            </div>
                            <h4 class="text-lg font-bold text-white mb-2">Fast Delivery</h4>
                            <p class="text-sm text-slate-400">3-5 days for static sites, 2-4 weeks for complex projects.</p>
                        </div>
                        <div class="text-center p-6">
                            <div class="w-16 h-16 rounded-2xl bg-emerald-900/50 flex items-center justify-center mx-auto mb-4">
                                <i class="ri-smartphone-line text-3xl text-emerald-400"></i>
                            </div>
                            <h4 class="text-lg font-bold text-white mb-2">Mobile-First</h4>
                            <p class="text-sm text-slate-400">Perfectly responsive on all devices from day one.</p>
                        </div>
                        <div class="text-center p-6">
                            <div class="w-16 h-16 rounded-2xl bg-emerald-900/50 flex items-center justify-center mx-auto mb-4">
                                <i class="ri-bar-chart-box-line text-3xl text-emerald-400"></i>
                            </div>
                            <h4 class="text-lg font-bold text-white mb-2">SEO & Analytics</h4>
                            <p class="text-sm text-slate-400">Built-in tools to help you rank higher on Google.</p>
                        </div>
                        <div class="text-center p-6">
                            <div class="w-16 h-16 rounded-2xl bg-emerald-900/50 flex items-center justify-center mx-auto mb-4">
                                <i class="ri-robot-2-line text-3xl text-emerald-400"></i>
                            </div>
                            <h4 class="text-lg font-bold text-white mb-2">AI Integration</h4>
                            <p class="text-sm text-slate-400">Future-proof your business with cutting-edge AI.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Newsletter -->
            <div class="py-12 md:py-24 bg-slate-900/20">
                <div class="max-w-4xl mx-auto px-4 text-center">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4 text-white">Stay Updated</h2>
                    <p class="text-slate-400 mb-8">Subscribe to our newsletter for the latest news, tips, and exclusive offers.</p>
                    
                    <!-- Newsletter Form Container -->
                    <div id="newsletter-wrapper">
                        <form id="newsletter-form" onsubmit="handleNewsletterSubmit(event)" class="max-w-md mx-auto">
                            <div class="flex gap-3">
                                <input type="email" name="EMAIL" required placeholder="your@email.com" class="flex-1 input-field px-4 py-3 rounded-lg">
                                <button type="submit" id="newsletter-btn" class="px-6 py-3 rounded-lg btn-primary text-white font-semibold">Subscribe</button>
                            </div>
                            <p class="text-xs text-slate-500 mt-3">Join 500+ Malaysian business owners. No spam, unsubscribe anytime.</p>
                        </form>

                        <!-- Success Message (Hidden by default) -->
                        <div id="newsletter-success" class="hidden animate-fade-in">
                            <div class="w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="ri-mail-send-fill text-3xl text-emerald-400"></i>
                            </div>
                            <h3 class="text-xl font-bold text-white mb-2">Thanks for subscribing!</h3>
                            <p class="text-slate-400">Weâ€™re glad to have you with us.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CTA -->
            <div class="py-12 md:py-24 bg-mesh relative overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-r from-emerald-900/20 to-slate-900/20"></div>
                <div class="max-w-4xl mx-auto px-4 text-center relative z-10">
                    <h2 class="text-4xl md:text-6xl font-bold mb-6 text-white">Ready to build your website?</h2>
                    <p class="text-xl text-slate-400 mb-10">Get started today with our affordable packages. No hidden fees, cancel anytime.</p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button onclick="navigateTo('pricing')" class="px-8 py-4 rounded-full btn-primary text-white font-bold text-lg shadow-xl shadow-emerald-900/20">
                            View Pricing
                        </button>
                        <button onclick="navigateTo('contact')" class="px-8 py-4 rounded-full glass text-slate-200 font-semibold text-lg hover:bg-white/10 transition-all">
                            Talk to Sales
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- LEADERSHIP SECTION (NEW) -->
        <section id="page-leadership" class="page">
            <div class="bg-mesh py-12 md:py-24">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-16">
                        <span class="text-sm font-bold tracking-wider text-emerald-400 uppercase">The Team</span>
                        <h1 class="text-4xl md:text-6xl font-bold mt-3 mb-6 text-white">Meet Our <span class="text-gradient">Leadership</span></h1>
                        <p class="text-xl text-slate-400 max-w-3xl mx-auto">The visionaries driving innovation and excellence at DDNex.</p>
                    </div>

                    <div class="grid md:grid-cols-3 gap-8 md:gap-12">
                        
                        <!-- Danial Danish -->
                        <div class="leader-card">
                            <div class="leader-img-wrapper">
                                <img src="https://i.ibb.co/5gtxDtKd/blacklogo-dd.png" alt="Danial Danish" class="leader-img bg-slate-800">
                            </div>
                            <div class="leader-content">
                                <span class="leader-role">Founder & CEO</span>
                                <h3 class="leader-name">Danial Danish</h3>
                                <p class="leader-bio">
                                    Founder of DDNetwork, DDNex, and DD Cloud Network MY. Passionate about democratizing web technology for Malaysian businesses and driving global digital innovation.
                                </p>
                            </div>
                        </div>

                        <!-- Bella -->
                        <div class="leader-card">
                            <div class="leader-img-wrapper">
                                <!-- Using a placeholder icon/image for Bella since no URL was provided -->
                                <img src="https://ui-avatars.com/api/?name=Bella+Manager&background=0D0D0D&color=10B981&size=512" alt="Bella" class="leader-img bg-slate-800">
                            </div>
                            <div class="leader-content">
                                <span class="leader-role">Project & Client Manager</span>
                                <h3 class="leader-name">Bella</h3>
                                <p class="leader-bio">
                                    Ensures every project runs smoothly from concept to launch. Bella is the bridge between our creative teams and our valued clients, guaranteeing satisfaction at every milestone.
                                </p>
                            </div>
                        </div>

                        <!-- Putri -->
                        <div class="leader-card">
                            <div class="leader-img-wrapper">
                                <!-- Using a placeholder icon/image for Putri since no URL was provided -->
                                <img src="https://ui-avatars.com/api/?name=Putri+Marketing&background=0D0D0D&color=10B981&size=512" alt="Putri" class="leader-img bg-slate-800">
                            </div>
                            <div class="leader-content">
                                <span class="leader-role">Marketing Manager</span>
                                <h3 class="leader-name">Putri</h3>
                                <p class="leader-bio">
                                    The voice behind our brand. Putri crafts compelling narratives and strategies that connect DDNex with businesses looking to transform their digital presence.
                                </p>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </section>

        <!-- PRODUCTS SECTION -->
        <section id="page-products" class="page">
            <div class="bg-mesh py-12 md:py-24">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-12 md:mb-16">
                        <h1 class="text-4xl md:text-5xl font-bold mb-6 text-white">Our <span class="text-gradient">Products</span></h1>
                        <p class="text-xl text-slate-400 max-w-3xl mx-auto">Explore digital products and tools developed under the DDNex brand.</p>
                    </div>

                    <div id="products-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <div class="col-span-3 text-center py-12 text-slate-500">Loading products...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FEATURES/SERVICES PAGE -->
        <section id="page-features" class="page">
            <div class="bg-mesh py-12 md:py-24">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-12 md:mb-16">
                        <h1 class="text-5xl md:text-6xl font-bold mb-6 text-white">Our <span class="text-gradient">Services</span></h1>
                        <p class="text-xl text-slate-400 max-w-3xl mx-auto">Everything you need to establish a strong digital presence. From simple landing pages to complex AI-integrated systems.</p>
                    </div>

                    <!-- Service Details -->
                    <div class="grid md:grid-cols-2 gap-8 mb-16">
                        <div class="glass rounded-2xl p-8 border border-slate-800 hover:border-emerald-900/50 transition-all">
                            <div class="flex items-start gap-4 mb-4">
                                <div class="w-12 h-12 rounded-xl bg-emerald-900/50 flex items-center justify-center flex-shrink-0">
                                    <i class="ri-file-list-3-line text-2xl text-emerald-400"></i>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-white mb-2">Basic HTML Website</h3>
                                    <p class="text-slate-400">1 Static Landing Page perfect for small businesses and portfolios.</p>
                                </div>
                            </div>
                            <ul class="space-y-2 text-sm text-slate-400 ml-16">
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Mobile Responsive Design</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Basic SEO Tags</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Contact Form Integration</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Free ddnet.my subdomain (1st year)</li>
                            </ul>
                        </div>

                        <div class="glass rounded-2xl p-8 border border-slate-800 hover:border-emerald-900/50 transition-all">
                            <div class="flex items-start gap-4 mb-4">
                                <div class="w-12 h-12 rounded-xl bg-emerald-900/50 flex items-center justify-center flex-shrink-0">
                                    <i class="ri-layout-masonry-line text-2xl text-emerald-400"></i>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-white mb-2">Front-End Website</h3>
                                    <p class="text-slate-400">Up to 5 Pages with animations and interactive UI elements.</p>
                                </div>
                            </div>
                            <ul class="space-y-2 text-sm text-slate-400 ml-16">
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Animations & Interactive UI</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Contact Forms & WhatsApp</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Basic SEO Setup</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Load Balancer Included (Pro)</li>
                            </ul>
                        </div>

                        <div class="glass rounded-2xl p-8 border border-slate-800 hover:border-emerald-900/50 transition-all">
                            <div class="flex items-start gap-4 mb-4">
                                <div class="w-12 h-12 rounded-xl bg-emerald-900/50 flex items-center justify-center flex-shrink-0">
                                    <i class="ri-brain-line text-2xl text-emerald-400"></i>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-white mb-2">AI Powered Website</h3>
                                    <p class="text-slate-400">Advanced automation & chatbots for modern businesses.</p>
                                </div>
                            </div>
                            <ul class="space-y-2 text-sm text-slate-400 ml-16">
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>AI Chatbot Integration</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Lead Auto-Response</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Smart Analytics Dashboard</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>All Front-End features included</li>
                            </ul>
                        </div>

                        <div class="glass rounded-2xl p-8 border border-slate-800 hover:border-emerald-900/50 transition-all">
                            <div class="flex items-start gap-4 mb-4">
                                <div class="w-12 h-12 rounded-xl bg-emerald-900/50 flex items-center justify-center flex-shrink-0">
                                    <i class="ri-database-2-line text-2xl text-emerald-400"></i>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-white mb-2">Front-End + Portal</h3>
                                    <p class="text-slate-400">Full website & internal management system combined.</p>
                                </div>
                            </div>
                            <ul class="space-y-2 text-sm text-slate-400 ml-16">
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Multi-User Internal Portal</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Database Management</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Advanced Analytics</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-emerald-500"></i>Custom Dashboards</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Process -->
                    <div class="glass rounded-2xl p-8 md:p-12 border border-slate-800 bg-dark">
                        <h2 class="text-3xl font-bold text-center mb-12 text-white">Our Process</h2>
                        <div class="grid md:grid-cols-4 gap-8">
                            <div class="text-center">
                                <div class="w-16 h-16 rounded-full bg-emerald-900/50 flex items-center justify-center mx-auto mb-4 text-2xl font-bold text-emerald-400">1</div>
                                <h4 class="font-bold text-white mb-2">Discovery</h4>
                                <p class="text-sm text-slate-400">We understand your business goals and requirements.</p>
                            </div>
                            <div class="text-center">
                                <div class="w-16 h-16 rounded-full bg-emerald-900/50 flex items-center justify-center mx-auto mb-4 text-2xl font-bold text-emerald-400">2</div>
                                <h4 class="font-bold text-white mb-2">Design</h4>
                                <p class="text-sm text-slate-400">Create mockups and get your approval before building.</p>
                            </div>
                            <div class="text-center">
                                <div class="w-16 h-16 rounded-full bg-emerald-900/50 flex items-center justify-center mx-auto mb-4 text-2xl font-bold text-emerald-400">3</div>
                                <h4 class="font-bold text-white mb-2">Development</h4>
                                <p class="text-sm text-slate-400">Build your site with clean, optimized code.</p>
                            </div>
                            <div class="text-center">
                                <div class="w-16 h-16 rounded-full bg-emerald-900/50 flex items-center justify-center mx-auto mb-4 text-2xl font-bold text-emerald-400">4</div>
                                <h4 class="font-bold text-white mb-2">Launch</h4>
                                <p class="text-sm text-slate-400">Deploy to production with training and support.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PRICING PAGE -->
        <section id="page-pricing" class="page">
            <div class="bg-mesh py-12 md:py-24">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-12">
                        <h1 class="text-4xl md:text-6xl font-bold mb-6 text-white">Simple, Transparent <span class="text-gradient">Pricing</span></h1>
                        <p class="text-xl text-slate-400 max-w-2xl mx-auto mb-8">Choose the perfect package for your business. All prices in Malaysian Ringgit (RM).</p>
                        
                        <!-- Billing Toggle -->
                        <div class="inline-flex items-center gap-4 p-1 rounded-full glass border border-slate-800">
                            <button onclick="setBilling('monthly')" id="btn-monthly" class="px-6 py-2 rounded-full text-sm font-medium transition-all bg-emerald-600 text-white">Monthly</button>
                            <button onclick="setBilling('onetime')" id="btn-onetime" class="px-6 py-2 rounded-full text-sm font-medium transition-all text-slate-400 hover:text-white">
                                One-Time <span class="text-amber-500 text-xs ml-1">No maintenance</span>
                            </button>
                        </div>
                    </div>

                    <!-- Pricing Cards -->
                    <div class="grid md:grid-cols-3 gap-8 max-w-6xl mx-auto mb-16">
                        <!-- Basic HTML -->
                        <div class="glass rounded-2xl p-6 md:p-8 border border-slate-800 hover:border-emerald-900/50 transition-all hover:-translate-y-2">
                            <div class="mb-6">
                                <h3 class="text-xl font-semibold text-slate-300 mb-2">Basic HTML</h3>
                                <div class="flex items-baseline gap-1">
                                    <span class="text-4xl md:text-5xl font-bold text-white price-display" data-monthly="39" data-onetime="249" data-setup="100">RM 39</span>
                                    <span class="text-slate-500 price-period">/month</span>
                                </div>
                                <p class="text-sm text-slate-500 mt-2">Setup: <span class="setup-fee">RM 100</span></p>
                            </div>
                            <ul class="space-y-3 mb-8 text-sm">
                                <li class="flex items-center gap-3 text-slate-400"><i class="ri-check-line text-emerald-500"></i>1 Static Landing Page</li>
                                <li class="flex items-center gap-3 text-slate-400"><i class="ri-check-line text-emerald-500"></i>Mobile Responsive</li>
                                <li class="flex items-center gap-3 text-slate-400"><i class="ri-check-line text-emerald-500"></i>Basic SEO Tags</li>
                                <li class="flex items-center gap-3 text-slate-400"><i class="ri-check-line text-emerald-500"></i>Contact Form</li>
                                <li class="flex items-center gap-3 text-slate-400"><i class="ri-check-line text-emerald-500"></i>Free subdomain (1st year)</li>
                                <li id="html-maint-yes" class="flex items-center gap-3 text-slate-400 maintenance-yes"><i class="ri-check-line text-emerald-500"></i>Maintenance included</li>
                                <li id="html-maint-no" class="flex items-center gap-3 text-red-400 maintenance-no hidden"><i class="ri-close-line"></i>No maintenance</li>
                            </ul>
                            <button onclick="attemptSelectPackage('Basic HTML Website', 'html')" class="w-full py-3 rounded-lg border border-slate-700 text-slate-200 font-semibold hover:bg-slate-800 transition-all">Get Started</button>
                        </div>

                        <!-- Front-End (Popular) -->
                        <div class="package-popular glass rounded-2xl p-6 md:p-8 border-2 border-emerald-600 shadow-xl shadow-emerald-900/10">
                            <div class="mb-6">
                                <h3 class="text-xl font-semibold text-slate-300 mb-2">Front-End</h3>
                                <div class="flex items-baseline gap-1">
                                    <span class="text-4xl md:text-5xl font-bold text-white price-display" data-monthly="99" data-onetime="1399" data-setup="200">RM 99</span>
                                    <span class="text-slate-500 price-period">/month</span>
                                </div>
                                <p class="text-sm text-slate-500 mt-2">Setup: <span class="setup-fee">RM 200</span></p>
                            </div>
                            <ul class="space-y-3 mb-8 text-sm">
                                <li class="flex items-center gap-3 text-slate-400"><i class="ri-check-line text-emerald-500"></i>Up to 5 Pages</li>
                                <li class="flex items-center gap-3 text-slate-400"><i class="ri-check-line text-emerald-500"></i>Animations & Interactive UI</li>
                                <li class="flex items-center gap-3 text-slate-400"><i class="ri-check-line text-emerald-500"></i>WhatsApp Integration</li>
                                <li class="flex items-center gap-3 text-slate-400"><i class="ri-check-line text-emerald-500"></i>Basic SEO Setup</li>
                                <li class="flex items-center gap-3 text-slate-400"><i class="ri-check-line text-emerald-500"></i>Load Balancer Included</li>
                                <li id="frontend-maint-yes" class="flex items-center gap-3 text-slate-400 maintenance-yes"><i class="ri-check-line text-emerald-500"></i>Maintenance & updates</li>
                                <li id="frontend-maint-no" class="flex items-center gap-3 text-red-400 maintenance-no hidden"><i class="ri-close-line"></i>No maintenance</li>
                            </ul>
                            <button onclick="attemptSelectPackage('Front-End Website', 'frontend')" class="w-full py-3 rounded-lg btn-primary text-white font-semibold shadow-lg">Get Started</button>
                        </div>

                        <!-- AI Powered -->
                        <div class="glass rounded-2xl p-6 md:p-8 border border-slate-800 hover:border-emerald-900/50 transition-all hover:-translate-y-2">
                            <div class="mb-6">
                                <h3 class="text-xl font-semibold text-slate-300 mb-2">AI Powered</h3>
                                <div class="flex items-baseline gap-1">
                                    <span class="text-4xl md:text-5xl font-bold text-white price-display" data-monthly="149" data-onetime="2499" data-setup="400">RM 149</span>
                                    <span class="text-slate-500 price-period">/month</span>
                                </div>
                                <p class="text-sm text-slate-500 mt-2">Setup: <span class="setup-fee">RM 400</span></p>
                            </div>
                            <ul class="space-y-3 mb-8 text-sm">
                                <li class="flex items-center gap-3 text-slate-400"><i class="ri-check-line text-emerald-500"></i>All Front-End features</li>
                                <li class="flex items-center gap-3 text-slate-400"><i class="ri-check-line text-emerald-500"></i>AI Chatbot Integration</li>
                                <li class="flex items-center gap-3 text-slate-400"><i class="ri-check-line text-emerald-500"></i>Lead Auto-Response</li>
                                <li class="flex items-center gap-3 text-slate-400"><i class="ri-check-line text-emerald-500"></i>Smart Analytics</li>
                                <li class="flex items-center gap-3 text-slate-400"><i class="ri-check-line text-emerald-500"></i>AI Tuning & Support</li>
                                <li id="ai-maint-yes" class="flex items-center gap-3 text-slate-400 maintenance-yes"><i class="ri-check-line text-emerald-500"></i>AI maintenance included</li>
                                <li id="ai-maint-no" class="flex items-center gap-3 text-red-400 maintenance-no hidden"><i class="ri-close-line"></i>No AI tuning</li>
                            </ul>
                            <button onclick="openQuoteForm('AI Powered Website')" class="w-full py-3 rounded-lg border border-slate-700 text-slate-200 font-semibold hover:bg-slate-800 transition-all">Request Quote</button>
                        </div>
                    </div>

                    <!-- Bundle & Portal -->
                    <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                        <div class="glass rounded-2xl p-6 md:p-8 border border-slate-800 hover:border-emerald-900/50 transition-all">
                            <div class="flex items-center gap-3 mb-4">
                                <span class="px-3 py-1 rounded-full bg-gradient-to-r from-emerald-600 to-emerald-800 text-white text-xs font-bold">BEST VALUE</span>
                            </div>
                            <h3 class="text-xl font-semibold text-slate-300 mb-2">Front-End + Portal</h3>
                            <div class="flex items-baseline gap-1 mb-4">
                                <span class="text-4xl font-bold text-white price-display" data-monthly="249" data-onetime="3499" data-setup="700">RM 249</span>
                                <span class="text-slate-500 price-period">/month</span>
                            </div>
                            <p class="text-sm text-slate-400 mb-4">Full website & internal management system. Best for growing businesses.</p>
                            <button onclick="attemptSelectPackage('Front-End + Portal', 'bundle')" class="w-full py-3 rounded-lg bg-gradient-to-r from-emerald-600 to-emerald-800 text-white font-semibold hover:shadow-lg transition-all">Select Bundle</button>
                        </div>

                        <div class="glass rounded-2xl p-6 md:p-8 border border-slate-800 hover:border-emerald-900/50 transition-all">
                            <h3 class="text-xl font-semibold text-slate-300 mb-2">Portal Standalone</h3>
                            <div class="flex items-baseline gap-1 mb-4">
                                <span class="text-4xl font-bold text-white price-display" data-monthly="279" data-onetime="3999" data-setup="700">RM 279</span>
                                <span class="text-slate-500 price-period">/month</span>
                            </div>
                            <p class="text-sm text-slate-400 mb-4">Internal portal for existing sites. Multi-user access & database management.</p>
                            <button onclick="openQuoteForm('Portal Standalone')" class="w-full py-3 rounded-lg border border-slate-700 text-slate-200 font-semibold hover:bg-slate-800 transition-all">Request Quote</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CHECKOUT PAGE (REDESIGNED 3-STEP FLOW) -->
        <section id="page-checkout" class="page">
            <div class="bg-slate-900/20 py-12">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    
                    <!-- Back Button -->
                    <button onclick="navigateTo('pricing')" class="text-slate-400 hover:text-white transition-colors flex items-center gap-2 mb-8">
                        <i class="ri-arrow-left-line"></i>
                        Back to Pricing
                    </button>

                    <!-- Centered Container -->
                    <div class="checkout-container">
                        
                        <!-- Step Indicators -->
                        <div class="step-indicator">
                            <div class="step-dot active" id="dot-1">1</div>
                            <div class="step-dot" id="dot-2">2</div>
                            <div class="step-dot" id="dot-3">3</div>
                        </div>

                        <!-- STEP 1: PLAN REVIEW -->
                        <div id="step-1" class="step-content active">
                            <div class="glass rounded-2xl p-6 md:p-10 border border-slate-800 bg-dark text-center md:text-left">
                                <h2 class="text-2xl font-bold text-white mb-6">Review Your Plan</h2>
                                
                                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 pb-8 border-b border-slate-800 gap-4">
                                    <div>
                                        <h3 id="s1-plan-name" class="text-3xl font-bold text-white mb-2">Basic HTML Website</h3>
                                        <div class="flex items-center gap-2 text-slate-400">
                                            <span id="s1-plan-price">RM 39</span>
                                            <span class="text-slate-600">/month recurring</span>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-sm text-slate-500 mb-1">Setup Fee (One-time)</div>
                                        <div id="s1-setup-price" class="text-xl font-bold text-white">RM 100</div>
                                    </div>
                                </div>

                                <div class="bg-emerald-900/20 rounded-xl p-6 mb-8 border border-emerald-900/30">
                                    <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                                        <div class="text-left">
                                            <div class="text-sm text-emerald-400 font-semibold mb-1">First Charge Total</div>
                                            <div class="text-3xl font-bold text-white" id="s1-first-total">RM 139</div>
                                            <div class="text-xs text-emerald-600 mt-1">Includes 1st Month Subscription</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-sm text-emerald-400 font-semibold mb-1">Then Recurring</div>
                                            <div class="text-2xl font-bold text-white" id="s1-recurring-price">RM 39/mo</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="text-left mb-8">
                                    <h4 class="font-bold text-white mb-4">Included Features:</h4>
                                    <ul class="grid md:grid-cols-2 gap-y-2 feature-list-check" id="s1-features-list">
                                        <!-- Populated via JS -->
                                    </ul>
                                </div>

                                <div class="flex flex-col md:flex-row justify-between gap-4 mt-8 pt-6 border-t border-slate-800">
                                    <button onclick="navigateTo('pricing')" class="w-full md:w-auto px-8 py-3 rounded-lg border border-slate-700 text-slate-300 font-medium hover:bg-slate-800">Back</button>
                                    <button onclick="goToStep(2)" class="w-full md:w-auto px-8 py-3 rounded-lg btn-primary text-white font-bold shadow-lg">Proceed to Your Details <i class="ri-arrow-right-line ml-2"></i></button>
                                </div>
                            </div>
                        </div>

                        <!-- STEP 2: DETAILS & DOMAIN -->
                        <div id="step-2" class="step-content">
                            <div class="glass rounded-2xl p-6 md:p-10 border border-slate-800 bg-dark">
                                <h2 class="text-2xl font-bold text-white mb-6">Your Details & Domain</h2>
                                
                                <form id="checkout-form-step2" onsubmit="return false;">
                                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                                        <div>
                                            <label class="block text-sm font-medium text-slate-400 mb-2">First Name</label>
                                            <input type="text" id="co-firstname" required class="input-field w-full px-4 py-3 rounded-lg" placeholder="John">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-400 mb-2">Last Name</label>
                                            <input type="text" id="co-lastname" required class="input-field w-full px-4 py-3 rounded-lg" placeholder="Doe">
                                        </div>
                                    </div>

                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-slate-400 mb-2">Email Address</label>
                                        <input type="email" id="co-email" required class="input-field w-full px-4 py-3 rounded-lg" placeholder="john@company.com">
                                    </div>

                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-slate-400 mb-2">Phone Number</label>
                                        <input type="tel" id="co-phone" required class="input-field w-full px-4 py-3 rounded-lg" placeholder="0123456789">
                                    </div>

                                    <div class="mb-6">
                                        <label class="block text-sm font-medium text-slate-400 mb-2">Company (Optional)</label>
                                        <input type="text" id="co-company" class="input-field w-full px-4 py-3 rounded-lg" placeholder="Acme Inc.">
                                    </div>

                                    <div class="mb-6">
                                        <label class="block text-sm font-medium text-slate-400 mb-3">Domain Choice</label>
                                        <div class="space-y-3">
                                            <!-- Free Subdomain -->
                                            <div class="radio-option selected" onclick="selectDomainType('sub', this)">
                                                <input type="radio" name="domain_type" value="sub" checked>
                                                <div class="flex-1">
                                                    <div class="font-medium text-white">Free Subdomain</div>
                                                    <div class="text-xs text-slate-500">Included free for 1st year</div>
                                                    <div class="mt-2">
                                                        <input type="text" id="subdomain-input" class="input-field w-full px-3 py-2 rounded text-sm" placeholder="yourname" oninput="updateDomainPreview()">
                                                        <div class="domain-preview-box mt-1">
                                                            <span id="preview-text" class="domain-highlight">yourname</span>.ddnex.my
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Custom Domain -->
                                            <div class="radio-option" onclick="selectDomainType('custom', this)">
                                                <input type="radio" name="domain_type" value="custom">
                                                <div class="flex-1">
                                                    <div class="font-medium text-white">I have my own domain</div>
                                                    <div class="text-xs text-slate-500">Enter your existing domain name</div>
                                                    <div class="mt-2">
                                                        <input type="text" id="custom-domain-input" class="input-field w-full px-3 py-2 rounded text-sm" placeholder="www.example.com" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-6">
                                        <label class="block text-sm font-medium text-slate-400 mb-2">Promo Code (Optional)</label>
                                        <div class="flex gap-3">
                                            <input type="text" id="promo-input" class="input-field flex-1 px-4 py-3 rounded-lg uppercase" placeholder="PROMO10%">
                                            <button type="button" onclick="applyPromo()" class="px-6 py-3 rounded-lg border border-slate-700 text-slate-300 font-medium hover:bg-slate-800">Apply</button>
                                        </div>
                                        <p id="promo-msg" class="text-xs mt-2 hidden font-semibold"></p>
                                    </div>

                                    <div class="flex items-start gap-3 p-4 rounded-lg bg-slate-800/50 border border-slate-700 mb-6">
                                        <input type="checkbox" required id="terms-check" class="mt-1 w-4 h-4 rounded border-slate-600 text-emerald-500 focus:ring-emerald-500 bg-slate-900">
                                        <label for="terms-check" class="text-sm text-slate-400">
                                            I agree to the <a href="#" onclick="event.preventDefault(); document.getElementById('terms-quick-modal').classList.add('active');" class="text-emerald-400 hover:underline">Terms of Service</a> and <a href="#" onclick="event.preventDefault(); document.getElementById('terms-quick-modal').classList.add('active');" class="text-emerald-400 hover:underline">Privacy Policy</a>.
                                        </label>
                                    </div>

                                    <div class="flex flex-col md:flex-row justify-between gap-4 mt-8 pt-6 border-t border-slate-800">
                                        <button type="button" onclick="goToStep(1)" class="w-full md:w-auto px-8 py-3 rounded-lg border border-slate-700 text-slate-300 font-medium hover:bg-slate-800">Back to Plan</button>
                                        <button type="button" onclick="validateAndGoToStep3()" class="w-full md:w-auto px-8 py-3 rounded-lg btn-primary text-white font-bold shadow-lg">Review & Pay</button>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!-- STEP 3: ORDER SUMMARY & PAYMENT -->
                        <div id="step-3" class="step-content">
                            <div class="glass rounded-2xl p-6 md:p-10 border border-slate-800 bg-dark">
                                <h2 class="text-2xl font-bold text-white mb-6">Order Summary</h2>
                                
                                <div class="summary-card mb-6">
                                    <div class="flex justify-between items-center mb-4 border-b border-slate-700 pb-4">
                                        <span class="text-slate-400">Plan Selected</span>
                                        <span id="s3-plan-name" class="font-bold text-white">Basic HTML Website</span>
                                    </div>
                                    
                                    <div class="space-y-3 mb-4">
                                        <div class="summary-row">
                                            <span class="text-slate-500">Subscription (1st Month)</span>
                                            <span id="s3-sub-price" class="font-medium">RM 39</span>
                                        </div>
                                        <div class="summary-row">
                                            <span class="text-slate-500">Setup Fee (One-time)</span>
                                            <span id="s3-setup-price" class="font-medium">RM 100</span>
                                        </div>
                                        <div class="summary-row">
                                            <span class="text-slate-500">Domain</span>
                                            <span id="s3-domain-price" class="font-medium">Free</span>
                                        </div>
                                        <div id="s3-discount-row" class="summary-row hidden text-emerald-400">
                                            <span>Discount (<span id="s3-discount-code"></span>)</span>
                                            <span id="s3-discount-val">-RM 0</span>
                                        </div>
                                    </div>

                                    <div class="summary-row total">
                                        <span>Total Due Today</span>
                                        <span id="s3-total">RM 139</span>
                                    </div>
                                    
                                    <div class="mt-4 pt-4 border-t border-slate-700 text-xs text-slate-500 flex justify-between">
                                        <span>Recurring Monthly:</span>
                                        <span id="s3-recurring" class="font-medium text-slate-400">RM 39/mo</span>
                                    </div>
                                </div>

                                <div class="p-4 rounded-lg bg-emerald-900/20 border border-emerald-700/30 flex items-center gap-3 mb-6">
                                    <i class="ri-secure-payment-line text-emerald-400 text-xl"></i>
                                    <span class="text-sm text-emerald-300 font-medium">Secure payment via Razorpay</span>
                                </div>

                                <div class="flex flex-col gap-3">
                                    <button onclick="initiateRazorpayPayment()" class="w-full py-4 rounded-lg btn-primary text-white font-bold text-lg shadow-xl flex items-center justify-center gap-2">
                                        <i class="ri-credit-card-2-fill"></i>
                                        Pay Now with Razorpay
                                    </button>
                                    
                                    <div class="text-center">
                                        <button onclick="goToStep(2)" class="text-sm text-slate-500 hover:text-slate-300 underline">Back to edit details</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </section>

        <!-- REVIEWS PAGE -->
        <section id="page-reviews" class="page">
            <div class="bg-mesh py-12 md:py-24">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-12 md:mb-16">
                        <h1 class="text-4xl md:text-5xl font-bold mb-6 text-white">Customer <span class="text-gradient">Reviews</span></h1>
                        <p class="text-xl text-slate-400">See what our clients say about working with us.</p>
                    </div>

                    <div class="grid lg:grid-cols-3 gap-8 mb-16">
                        <!-- Write Review Form -->
                        <div class="lg:col-span-1">
                            <div class="glass rounded-2xl p-6 md:p-8 border border-slate-800 bg-dark h-full">
                                <h3 class="text-xl font-bold text-white mb-2">Write a Review</h3>
                                <p class="text-slate-400 mb-6 text-sm">Share your experience with DDNex services.</p>
                                
                                <form id="review-form" onsubmit="handleReviewSubmit(event)">
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-slate-400 mb-2">Your Rating</label>
                                        <div class="flex gap-2" id="star-input-container">
                                            <i class="ri-star-fill star-icon" data-val="1"></i>
                                            <i class="ri-star-fill star-icon" data-val="2"></i>
                                            <i class="ri-star-fill star-icon" data-val="3"></i>
                                            <i class="ri-star-fill star-icon" data-val="4"></i>
                                            <i class="ri-star-fill star-icon" data-val="5"></i>
                                        </div>
                                        <input type="hidden" id="rating-value" required>
                                        <div id="rating-error" style="color: #ef4444; font-size: 0.8rem; margin-top: 5px; display: none;">Please select a rating.</div>
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-slate-400 mb-2">Your Review</label>
                                        <textarea id="review-comment" rows="4" required class="input-field w-full px-4 py-3 rounded-lg resize-none" placeholder="Share your experience..."></textarea>
                                    </div>
                                    <button type="submit" class="w-full py-3 rounded-lg btn-primary text-white font-semibold">Submit Review</button>
                                </form>

                                <div class="mt-8 pt-6 border-t border-slate-800">
                                    <p class="text-sm text-slate-400 mb-4 font-semibold">Prefer Google?</p>
                                    <a href="https://g.page/r/CVUI33FMpZB8EAE/review" target="_blank" class="w-full py-3 rounded-lg border border-slate-700 text-slate-300 font-medium hover:bg-slate-800 transition-all flex items-center justify-center gap-2">
                                        <i class="ri-google-fill text-red-400 text-xl"></i>
                                        Review on Google Maps
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- Reviews Grid -->
                        <div class="lg:col-span-2">
                            <div id="reviews-list" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="col-span-2 text-center py-12 text-slate-500">Loading reviews...</div>
                            </div>
                            <div class="text-center mt-8"><button class="btn btn-primary px-6 py-2 rounded-full text-white font-semibold" onclick="toggleFullReviews()">View All Reviews</button></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PORTFOLIO PAGE -->
        <section id="page-portfolio" class="page">
            <div class="bg-mesh py-12 md:py-24">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-12 md:mb-16">
                        <h1 class="text-4xl md:text-5xl font-bold mb-6 text-white">Our <span class="text-gradient">Portfolio</span></h1>
                        <p class="text-xl text-slate-400">Trusted by forward-thinking Malaysian businesses.</p>
                    </div>
                    <div id="portfolio-grid" class="grid md:grid-cols-3 gap-8">
                        <div class="col-span-3 text-center py-12 text-slate-500">Loading portfolio...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CONTACT PAGE -->
        <section id="page-contact" class="page">
            <div class="bg-mesh py-12 md:py-24">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="grid lg:grid-cols-2 gap-8 md:gap-16">
                        <div>
                            <h1 class="text-4xl md:text-5xl font-bold mb-6 text-white">Get in <span class="text-gradient">Touch</span></h1>
                            <p class="text-xl text-slate-400 mb-8">Have questions? Our team is here to help. Reach out and we'll respond within 24 hours.</p>
                            
                            <div class="space-y-6 mb-12">
                                <div class="flex items-center gap-4">
                                    <div class="w-12 h-12 rounded-xl bg-emerald-900/50 flex items-center justify-center">
                                        <i class="ri-mail-line text-2xl text-emerald-400"></i>
                                    </div>
                                    <div>
                                        <div class="text-sm text-slate-500">Email</div>
                                        <div class="text-white font-medium">sales@ddnex.my</div>
                                    </div>
                                </div>
                                <div class="flex items-center gap-4">
                                    <div class="w-12 h-12 rounded-xl bg-emerald-900/50 flex items-center justify-center">
                                        <i class="ri-phone-line text-2xl text-emerald-400"></i>
                                    </div>
                                    <div>
                                        <div class="text-sm text-slate-500">Phone</div>
                                        <div class="text-white font-medium">+60 12-260 0969</div>
                                    </div>
                                </div>
                                <div class="flex items-center gap-4">
                                    <div class="w-12 h-12 rounded-xl bg-emerald-900/50 flex items-center justify-center">
                                        <i class="ri-map-pin-line text-2xl text-emerald-400"></i>
                                    </div>
                                    <div>
                                        <div class="text-sm text-slate-500">Location</div>
                                        <div class="text-white font-medium">Malaysia</div>
                                    </div>
                                </div>
                            </div>

                            <div class="glass rounded-2xl p-6 border border-slate-800 bg-dark">
                                <h3 class="font-bold text-white mb-4">Follow Us</h3>
                                <div class="flex gap-4">
                                    <a href="#" class="w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center text-slate-400 hover:bg-slate-700 hover:text-white transition-colors">
                                        <i class="ri-twitter-x-line"></i>
                                    </a>
                                    <a href="https://www.linkedin.com/in/muhammad-danial-danish-217bb82ba/" target="_blank" class="w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center text-slate-400 hover:bg-slate-700 hover:text-white transition-colors">
                                        <i class="ri-linkedin-fill"></i>
                                    </a>
                                    <a href="https://www.instagram.com/danialddanish/" target="_blank" class="w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center text-slate-400 hover:bg-slate-700 hover:text-white transition-colors">
                                        <i class="ri-instagram-line"></i>
                                    </a>
                                    <a href="https://www.tiktok.com/@ddnet.my/" target="_blank" class="w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center text-slate-400 hover:bg-slate-700 hover:text-white transition-colors">
                                        <i class="ri-tiktok-line"></i>
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="glass rounded-2xl p-6 md:p-8 border border-slate-800 bg-dark">
                            <form onsubmit="handleContactSubmit(event)" class="space-y-6">
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-400 mb-2">First Name</label>
                                        <input type="text" id="contact-name" required class="input-field w-full px-4 py-3 rounded-lg" placeholder="John">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-400 mb-2">Last Name</label>
                                        <input type="text" id="contact-lastname" required class="input-field w-full px-4 py-3 rounded-lg" placeholder="Doe">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-400 mb-2">Email</label>
                                    <input type="email" id="contact-email" required class="input-field w-full px-4 py-3 rounded-lg" placeholder="john@example.com">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-400 mb-2">Subject</label>
                                    <select id="contact-subject" class="input-field w-full px-4 py-3 rounded-lg bg-dark">
                                        <option>General Inquiry</option>
                                        <option>Sales Question</option>
                                        <option>Technical Support</option>
                                        <option>Custom Quote Website</option>
                                        <option>Partnership</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-400 mb-2">How Did You Hear About Us?</label>
                                    <select id="contact-source" class="input-field w-full px-4 py-3 rounded-lg bg-dark">
                                        <option value="" disabled selected>Select an option</option>
                                        <option>Google Search</option>
                                        <option>Social Media (Instagram, TikTok, LinkedIn)</option>
                                        <option>Friend / Referral</option>
                                        <option>Advertisement</option>
                                        <option>Other</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-400 mb-2">Message</label>
                                    <textarea id="contact-message" rows="4" required class="input-field w-full px-4 py-3 rounded-lg resize-none" placeholder="How can we help you?"></textarea>
                                </div>
                                <button type="submit" class="w-full py-4 rounded-lg btn-primary text-white font-bold text-lg shadow-lg">
                                    Send Message
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- LOGIN PAGE -->
        <section id="page-login" class="page">
            <div class="min-h-screen flex items-center justify-center bg-mesh py-12 px-4 relative overflow-hidden">
                <div class="absolute inset-0 z-0">
                    <div class="absolute top-0 left-0 w-96 h-96 bg-emerald-600 rounded-full mix-blend-screen filter blur-3xl opacity-10 animate-blob"></div>
                    <div class="absolute bottom-0 right-0 w-96 h-96 bg-emerald-400 rounded-full mix-blend-screen filter blur-3xl opacity-10 animate-blob animation-delay-2000"></div>
                </div>
                
                <div class="max-w-md w-full relative z-10">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-emerald-600 to-emerald-800 flex items-center justify-center mx-auto mb-4 shadow-lg animate-float">
                            <img src="https://i.ibb.co/5gtxDtKd/blacklogo-dd.png" alt="DDNex" class="w-8 h-8 object-contain invert">
                        </div>
                        <h2 class="text-3xl font-bold text-white">Welcome Back</h2>
                        <p class="text-slate-400 mt-2">Sign in to your DDNex dashboard</p>
                    </div>

                    <div class="glass-strong rounded-2xl p-8 border border-slate-800 bg-dark shadow-2xl">
                        <form onsubmit="handleLogin(event)" class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-slate-400 mb-2">Email Address</label>
                                <input type="email" id="login-email" required class="input-field w-full px-4 py-3 rounded-lg" placeholder="you@example.com">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-400 mb-2">Password</label>
                                <input type="password" id="login-password" required class="input-field w-full px-4 py-3 rounded-lg" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                            </div>
                            <div class="flex items-center justify-between text-sm">
                                <label class="flex items-center gap-2 text-slate-400 cursor-pointer">
                                    <input type="checkbox" class="rounded border-slate-600 text-emerald-500 focus:ring-emerald-500 bg-slate-900">
                                    Remember me
                                </label>
                                <a href="#" onclick="event.preventDefault(); navigateTo('forgot-password')" class="text-emerald-400 hover:underline">Forgot password?</a>
                            </div>
                            <button type="submit" class="w-full py-3 rounded-lg btn-primary text-white font-bold shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5">
                                Sign In
                            </button>
                        </form>

                        <div class="mt-6 text-center text-sm text-slate-400">
                            Don't have an account? 
                            <button onclick="navigateTo('signup')" class="text-emerald-400 hover:underline font-medium">Get Started</button>
                        </div>

                        <div class="mt-6 pt-6 border-t border-slate-800">
                            <div class="text-center text-xs text-slate-500 mb-4">Or continue with</div>
                            <button onclick="handleGoogleAuth()" class="w-full py-2 px-4 rounded-lg border border-slate-700 text-slate-300 hover:bg-slate-800 transition-all text-sm font-medium flex items-center justify-center gap-2">
                                <svg class="w-5 h-5" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                                Google
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FORGOT PASSWORD PAGE -->
        <section id="page-forgot-password" class="page">
            <div class="min-h-screen flex items-center justify-center bg-mesh py-12 px-4 relative overflow-hidden">
                <div class="absolute inset-0 z-0">
                    <div class="absolute top-0 right-0 w-96 h-96 bg-pink-500 rounded-full mix-blend-screen filter blur-3xl opacity-10 animate-blob"></div>
                    <div class="absolute bottom-0 left-0 w-96 h-96 bg-emerald-500 rounded-full mix-blend-screen filter blur-3xl opacity-10 animate-blob animation-delay-4000"></div>
                </div>

                <div class="max-w-md w-full relative z-10">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-emerald-600 to-emerald-800 flex items-center justify-center mx-auto mb-4 shadow-lg animate-float">
                            <img src="https://i.ibb.co/5gtxDtKd/blacklogo-dd.png" alt="DDNex" class="w-8 h-8 object-contain invert">
                        </div>
                        <h2 class="text-3xl font-bold text-white">Reset Password</h2>
                        <p class="text-slate-400 mt-2">Enter your email to receive a reset link.</p>
                    </div>

                    <div class="glass-strong rounded-2xl p-8 border border-slate-800 bg-dark shadow-2xl">
                        <form onsubmit="handleForgotPassword(event)" class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-slate-400 mb-2">Email Address</label>
                                <input type="email" id="forgot-email" required class="input-field w-full px-4 py-3 rounded-lg" placeholder="you@example.com">
                            </div>
                            <button type="submit" class="w-full py-3 rounded-lg btn-primary text-white font-bold shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5">
                                Send Reset Link
                            </button>
                        </form>

                        <div class="mt-6 text-center text-sm text-slate-400">
                            Remember your password? 
                            <button onclick="navigateTo('login')" class="text-emerald-400 hover:underline font-medium">Sign In</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SIGNUP PAGE -->
        <section id="page-signup" class="page">
            <div class="min-h-screen flex items-center justify-center bg-mesh py-12 px-4 relative overflow-hidden">
                <div class="absolute inset-0 z-0">
                    <div class="absolute top-0 right-0 w-96 h-96 bg-pink-500 rounded-full mix-blend-screen filter blur-3xl opacity-10 animate-blob"></div>
                    <div class="absolute bottom-0 left-0 w-96 h-96 bg-emerald-500 rounded-full mix-blend-screen filter blur-3xl opacity-10 animate-blob animation-delay-4000"></div>
                </div>

                <div class="max-w-md w-full relative z-10">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-emerald-600 to-emerald-800 flex items-center justify-center mx-auto mb-4 shadow-lg animate-float">
                            <img src="https://i.ibb.co/5gtxDtKd/blacklogo-dd.png" alt="DDNex" class="w-8 h-8 object-contain invert">
                        </div>
                        <h2 class="text-3xl font-bold text-white">Create Account</h2>
                        <p class="text-slate-400 mt-2">Join thousands of Malaysian businesses</p>
                    </div>

                    <div class="glass-strong rounded-2xl p-8 border border-slate-800 bg-dark shadow-2xl">
                        <form onsubmit="handleSignup(event)" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-slate-400 mb-2">Full Name</label>
                                <input type="text" id="signup-name" required class="input-field w-full px-4 py-3 rounded-lg" placeholder="John Doe">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-400 mb-2">Phone Number</label>
                                <input type="tel" id="signup-phone" required class="input-field w-full px-4 py-3 rounded-lg" placeholder="0123456789">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-400 mb-2">Email Address</label>
                                <input type="email" id="signup-email" required class="input-field w-full px-4 py-3 rounded-lg" placeholder="you@example.com">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-400 mb-2">Password</label>
                                <input type="password" id="signup-password" required minlength="6" oninput="checkPasswordStrength()" class="input-field w-full px-4 py-3 rounded-lg" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                                <div class="password-requirements mt-2">
                                    <span id="req-upper" class="req-item"><i class="ri-close-circle-line"></i> Uppercase</span>
                                    <span id="req-lower" class="req-item"><i class="ri-close-circle-line"></i> Lowercase</span>
                                    <span id="req-num" class="req-item"><i class="ri-close-circle-line"></i> Number</span>
                                    <span id="req-len" class="req-item"><i class="ri-close-circle-line"></i> 6+ chars</span>
                                </div>
                            </div>
                            <button type="submit" class="w-full py-3 rounded-lg btn-primary text-white font-bold shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5 mt-4">
                                Create Account
                            </button>
                        </form>

                        <div class="mt-6 text-center text-sm text-slate-400">
                            Already have an account? 
                            <button onclick="navigateTo('login')" class="text-emerald-400 hover:underline font-medium">Sign In</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PROFILE PAGE (UPDATED & IMPROVED) -->
        <section id="page-profile" class="page">
            <div class="bg-slate-900/20 py-12">
                <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                    
                    <!-- ACTIVE PLAN STATUS CARD (NEW) -->
                    <!-- Shown if user has a paid plan -->
                    <div id="active-plan-card" class="glass rounded-2xl p-8 border border-emerald-900/50 bg-dark mb-8 relative overflow-hidden hidden">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-emerald-600/10 rounded-full -translate-y-1/2 translate-x-1/2 opacity-50"></div>
                        <div class="absolute bottom-0 left:0 w-24 h-24 bg-emerald-800/10 rounded-full translate-y-1/2 -translate-x-1/2 opacity-50"></div>
                        
                        <div class="relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
                            <div class="flex items-start gap-4">
                                <div class="w-14 h-14 rounded-xl bg-emerald-600 flex items-center justify-center text-white shadow-lg">
                                    <i class="ri-rocket-line text-2xl"></i>
                                </div>
                                <div>
                                    <h2 class="text-sm font-bold text-emerald-400 uppercase tracking-wider mb-1">Current Plan</h2>
                                    <h3 id="profile-plan-name" class="text-2xl font-bold text-white">Loading...</h3>
                                    <div class="flex flex-wrap items-center gap-4 mt-2 text-sm text-slate-400">
                                        <div class="flex items-center gap-1"><i class="ri-globe-line text-emerald-500"></i> <span id="profile-domain-name">...</span></div>
                                        <div class="flex items-center gap-1"><i class="ri-bill-line text-emerald-500"></i> <span id="profile-billing-cycle">...</span></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex flex-col items-start md:items-end gap-3">
                                <span id="profile-status-badge" class="px-4 py-1.5 rounded-full bg-emerald-900/50 text-emerald-400 font-bold text-sm border border-emerald-700/30">Active</span>
                                <button onclick="navigateTo('contact')" class="text-sm font-medium text-emerald-400 hover:text-emerald-300 flex items-center gap-1">
                                    Need Support? <i class="ri-arrow-right-line"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- NO PLAN CTA (NEW) -->
                    <!-- Shown if user has NO paid plans -->
                    <div id="no-plan-cta" class="glass rounded-2xl p-8 border border-dashed border-slate-700 bg-dark mb-8 text-center hidden">
                        <div class="w-16 h-16 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-500">
                            <i class="ri-shopping-cart-2-line text-3xl"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-white mb-2">No Active Plan</h2>
                        <p class="text-slate-400 mb-6 max-w-md mx-auto">You haven't purchased any website packages yet. Start your digital journey today with our affordable plans.</p>
                        <button onclick="navigateTo('pricing')" class="px-8 py-3 rounded-full btn-primary text-white font-bold shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1">
                            Buy Your Plan Now
                        </button>
                    </div>

                    <!-- PROFILE INFO & EDIT -->
                    <div class="grid lg:grid-cols-3 gap-8 mb-8">
                        <div class="lg:col-span-1">
                            <div class="glass rounded-2xl p-6 border border-slate-800 bg-dark text-center">
                                <div class="w-20 h-20 rounded-full bg-gradient-to-br from-emerald-700 to-emerald-900 flex items-center justify-center text-3xl font-bold text-white mx-auto mb-4 shadow-md">
                                    <i class="ri-user-line"></i>
                                </div>
                                <h2 class="text-xl font-bold text-white" id="prof-display-name">User Name</h2>
                                <p class="text-slate-500 text-sm mb-4" id="prof-display-email">user@example.com</p>
                                <div class="border-t border-slate-800 pt-4">
                                    <div class="text-xs text-slate-600 uppercase font-semibold tracking-wide mb-2">Account Type</div>
                                    <div class="text-sm font-medium text-slate-300" id="prof-role">Standard Client</div>
                                </div>
                            </div>
                        </div>

                        <div class="lg:col-span-2">
                            <div class="glass rounded-2xl p-6 md:p-8 border border-slate-800 bg-dark">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-lg font-bold text-white">Edit Profile</h3>
                                    <button onclick="document.getElementById('profile-form').requestSubmit()" class="text-sm bg-slate-800 hover:bg-slate-700 text-slate-200 px-4 py-2 rounded-lg transition-colors">Save Changes</button>
                                </div>
                                
                                <form id="profile-form" onsubmit="handleProfileUpdate(event)" class="space-y-6">
                                    <div class="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-slate-400 mb-2">Full Name</label>
                                            <input type="text" id="prof-name" class="input-field w-full px-4 py-3 rounded-lg">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-400 mb-2">Phone</label>
                                            <input type="tel" id="prof-phone" class="input-field w-full px-4 py-3 rounded-lg">
                                        </div>
                                    </div>
                                    <div class="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-slate-400 mb-2">Email</label>
                                            <input type="email" id="prof-email" readonly class="input-field w-full px-4 py-3 rounded-lg bg-slate-900 cursor-not-allowed border-slate-700">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-400 mb-2">Company</label>
                                            <input type="text" id="prof-company" class="input-field w-full px-4 py-3 rounded-lg" placeholder="Optional">
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- VOUCHER & HISTORY CONTAINER -->
                    <div class="grid lg:grid-cols-2 gap-8">
                        <!-- Voucher Section -->
                        <div id="profile-voucher-section" class="hidden">
                            <div class="glass rounded-2xl p-6 border border-slate-800 bg-dark h-full flex flex-col">
                                <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                                    <i class="ri-gift-line text-pink-400"></i> Your Vouchers
                                </h3>
                                <div class="flex-1 bg-gradient-to-br from-pink-900/20 to-rose-900/20 rounded-xl p-5 border border-pink-900/30 flex flex-col justify-center items-center text-center">
                                    <div class="text-4xl mb-2">ðŸŽŸï¸</div>
                                    <div class="font-bold text-white text-lg mb-1" id="profile-voucher-code">PROMO10</div>
                                    <div class="text-sm text-slate-400 mb-4" id="profile-voucher-desc">10% Discount on next purchase</div>
                                    <button onclick="deletePersonalVoucher()" class="text-xs text-red-400 hover:text-red-300 underline font-medium">Remove Voucher</button>
                                </div>
                            </div>
                        </div>
                        <!-- Empty state for voucher if none exist -->
                        <div id="no-voucher-section" class="hidden lg:block">
                            <div class="glass rounded-2xl p-6 border border-dashed border-slate-700 bg-dark h-full flex flex-col justify-center items-center text-center">
                                <i class="ri-coupon-3-line text-3xl text-slate-600 mb-2"></i>
                                <p class="text-sm text-slate-500">No active vouchers</p>
                            </div>
                        </div>

                        <!-- Order History -->
                        <div class="lg:col-span-1"> <!-- Takes full width if no voucher, else 1 col -->
                            <div class="glass rounded-2xl p-6 border border-slate-800 bg-dark h-full">
                                <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                                    <i class="ri-history-line text-blue-400"></i> Order History
                                </h3>
                                <div id="order-history-container" class="overflow-x-auto">
                                    <table class="w-full text-left">
                                        <thead>
                                            <tr class="border-b border-slate-700">
                                                <th class="pb-3 text-xs font-medium text-slate-500 uppercase">Date</th>
                                                <th class="pb-3 text-xs font-medium text-slate-500 uppercase">Package</th>
                                                <th class="pb-3 text-xs font-medium text-slate-500 uppercase text-right">Total</th>
                                                <th class="pb-3 text-xs font-medium text-slate-500 uppercase text-right">Status</th>
                                            </tr>
                                        </thead>
                                        <tbody id="order-history-body" class="text-sm text-slate-300">
                                            <!-- Orders loaded dynamically -->
                                        </tbody>
                                    </table>
                                    <div id="no-orders" class="text-center py-8 text-slate-500 hidden">
                                        <p>No order history found.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8 text-center">
                        <button onclick="handleLogout()" class="text-red-400 hover:text-red-300 font-medium px-6 py-2 rounded-lg border border-transparent hover:bg-red-900/20 transition-colors">Sign Out</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- THANK YOU PAGE -->
        <section id="page-thank-you" class="page">
            <div class="min-h-screen flex items-center justify-center bg-mesh py-12 px-4">
                <div class="max-w-md w-full text-center">
                    <div class="w-24 h-24 rounded-full bg-emerald-900/30 flex items-center justify-center mx-auto mb-6">
                        <i class="ri-check-line text-5xl text-emerald-400"></i>
                    </div>
                    <h2 class="text-4xl font-bold text-white mb-4">Order Placed!</h2>
                    <p class="text-slate-400 mb-8 text-lg">Thank you for choosing DDNex. We've received your order and will contact you via WhatsApp/Email within 24 hours.</p>
                    <div class="flex flex-col gap-3">
                        <button onclick="navigateTo('home')" class="w-full py-3 rounded-lg btn-primary text-white font-semibold">Return Home</button>
                        <button onclick="navigateTo('profile')" class="w-full py-3 rounded-lg border border-slate-700 text-slate-300 font-semibold hover:bg-slate-800">View Profile</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- TERMS OF SERVICE PAGE (NEW) -->
        <section id="page-terms" class="page">
            <div class="bg-mesh py-12 md:py-24 min-h-screen">
                <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="glass rounded-2xl p-8 md:p-12 border border-slate-800 bg-dark shadow-xl">
                        <h1 class="text-4xl md:text-5xl font-bold mb-6 text-white">Terms of <span class="text-gradient">Service</span></h1>
                        <p class="text-slate-400 mb-8 text-lg">Last Updated: January 2025</p>
                        
                        <div class="prose prose-invert max-w-none space-y-8">
                            <div>
                                <h3 class="text-2xl font-bold text-white mb-3">1. Introduction</h3>
                                <p class="text-slate-300 leading-relaxed">
                                    Welcome to DDNex. By accessing or using our services, you agree to be bound by these Terms of Service. If you disagree with any part of these terms, you must not access our service.
                                </p>
                            </div>

                            <div>
                                <h3 class="text-2xl font-bold text-white mb-3">2. Hosting & Domain Services</h3>
                                <p class="text-slate-300 leading-relaxed mb-4">
                                    We offer free subdomain hosting for the first year. After the initial period, renewal fees apply at RM 55/year unless otherwise stated in a custom package.
                                </p>
                                <ul class="list-disc pl-5 text-slate-400 space-y-2">
                                    <li>You must not use our hosting for illegal activities, spam, or malicious content.</li>
                                    <li>We reserve the right to suspend or terminate accounts violating these policies.</li>
                                </ul>
                            </div>

                            <div>
                                <h3 class="text-2xl font-bold text-white mb-3">3. Payments & Refunds</h3>
                                <p class="text-slate-300 leading-relaxed mb-4">
                                    All setup fees are non-refundable. Monthly plans are billed in advance.
                                </p>
                                <div class="bg-slate-900/50 p-4 rounded-lg border-l-4 border-emerald-500">
                                    <p class="text-slate-300 font-medium">Refund Policy</p>
                                    <p class="text-sm text-slate-400 mt-1">Due to the nature of digital work and upfront costs, all payments are non-refundable unless explicitly stated in writing by DDNex management.</p>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-2xl font-bold text-white mb-3">4. Project Delivery & Timelines</h3>
                                <p class="text-slate-300 leading-relaxed">
                                    Timelines provided are estimates based on standard requirements. Delays caused by client feedback, content provision, or external factors (e.g., third-party API changes) are not the responsibility of DDNex and may extend the delivery timeline.
                                </p>
                            </div>

                            <div>
                                <h3 class="text-2xl font-bold text-white mb-3">5. Intellectual Property</h3>
                                <p class="text-slate-300 leading-relaxed">
                                    Upon full payment, you own the design and code specific to your website. However, DDNex retains the right to use underlying frameworks, libraries, and proprietary code. You grant DDNex the right to display your website in our portfolio.
                                </p>
                            </div>
                            
                            <div>
                                <h3 class="text-2xl font-bold text-white mb-3">6. Limitation of Liability</h3>
                                <p class="text-slate-300 leading-relaxed">
                                    DDNex shall not be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from your access to or use of or inability to access or use the service.
                                </p>
                            </div>
                        </div>

                        <div class="mt-12 pt-8 border-t border-slate-800 text-center">
                            <button onclick="navigateTo('home')" class="px-8 py-3 rounded-lg glass text-slate-200 font-semibold hover:bg-white/10 transition-all">Back to Home</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PRIVACY POLICY PAGE (NEW) -->
        <section id="page-privacy" class="page">
            <div class="bg-mesh py-12 md:py-24 min-h-screen">
                <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="glass rounded-2xl p-8 md:p-12 border border-slate-800 bg-dark shadow-xl">
                        <h1 class="text-4xl md:text-5xl font-bold mb-6 text-white">Privacy <span class="text-gradient">Policy</span></h1>
                        <p class="text-slate-400 mb-8 text-lg">Your privacy is important to us. This policy explains how we handle your data.</p>
                        
                        <div class="prose prose-invert max-w-none space-y-8">
                            <div>
                                <h3 class="text-2xl font-bold text-white mb-3">1. Data Collection</h3>
                                <p class="text-slate-300 leading-relaxed">
                                    We collect basic profile information (Name, Email, Phone Number, Company) necessary to process your orders, provide technical support, and communicate with you regarding your project.
                                </p>
                            </div>

                            <div>
                                <h3 class="text-2xl font-bold text-white mb-3">2. Use of Information</h3>
                                <ul class="list-disc pl-5 text-slate-400 space-y-2">
                                    <li>To process payments and fulfill website development orders.</li>
                                    <li>To send updates regarding your project status.</li>
                                    <li>To provide customer support.</li>
                                    <li>To send periodic newsletters or marketing communications (you can opt-out at any time).</li>
                                </ul>
                            </div>

                            <div>
                                <h3 class="text-2xl font-bold text-white mb-3">3. Data Sharing</h3>
                                <p class="text-slate-300 leading-relaxed">
                                    We <strong>do not sell</strong> your personal data to third parties. We may share your data with trusted third parties who assist us in operating our website, conducting our business, or servicing you, so long as those parties agree to keep this information confidential.
                                </p>
                            </div>

                            <div>
                                <h3 class="text-2xl font-bold text-white mb-3">4. Payment Security</h3>
                                <p class="text-slate-300 leading-relaxed">
                                    We use Razorpay as our payment gateway. We do not store your credit card details on our servers. All payment information is processed securely by Razorpay.
                                </p>
                            </div>

                            <div>
                                <h3 class="text-2xl font-bold text-white mb-3">5. Your Rights</h3>
                                <p class="text-slate-300 leading-relaxed">
                                    You have the right to access, correct, or delete your personal data. You can do this by logging into your profile or contacting us directly at sales@ddnex.my.
                                </p>
                            </div>
                        </div>

                        <div class="mt-12 pt-8 border-t border-slate-800 text-center">
                            <button onclick="navigateTo('home')" class="px-8 py-3 rounded-lg glass text-slate-200 font-semibold hover:bg-white/10 transition-all">Back to Home</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-slate-950 text-slate-400 py-12 md:py-16 mt-auto border-t border-slate-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-8 md:gap-12 mb-12">
                <div>
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-700 to-emerald-900 flex items-center justify-center">
                            <img src="https://i.ibb.co/5gtxDtKd/blacklogo-dd.png" alt="DDNex" class="w-6 h-6 object-contain invert">
                        </div>
                        <span class="text-xl font-bold text-white">DDNex</span>
                    </div>
                    <p class="text-sm text-slate-500 leading-relaxed">Designed in Malaysia. Built for the world. Professional web design and AI solutions.</p>
                </div>
                <div>
                    <h4 class="text-white font-semibold mb-4">Services</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('services')" class="hover:text-emerald-400 transition-colors">Static Websites</a></li>
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('services')" class="hover:text-emerald-400 transition-colors">Interactive Websites</a></li>
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('services')" class="hover:text-emerald-400 transition-colors">AI Integration</a></li>
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('services')" class="hover:text-emerald-400 transition-colors">Internal Portals</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-semibold mb-4">Support</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('contact')" class="hover:text-emerald-400 transition-colors">Contact Us</a></li>
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('terms')" class="hover:text-emerald-400 transition-colors">Terms of Service</a></li>
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('privacy')" class="hover:text-emerald-400 transition-colors">Privacy Policy</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-semibold mb-4">Connect</h4>
                    <ul class="space-y-2 text-sm">
                         <li><a href="https://www.linkedin.com/in/muhammad-danial-danish-217bb82ba/" target="_blank" class="hover:text-emerald-400 transition-colors">LinkedIn</a></li>
                         <li><a href="https://www.instagram.com/danialddanish/" target="_blank" class="hover:text-emerald-400 transition-colors">Instagram</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-slate-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
                <p class="text-sm text-slate-600">&copy; 2025â€“2026 DDNex Cloud Â· DDNex Â· Reg. No. 202603040752 (MA0342542-K)</p>
            </div>
        </div>
    </footer>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- MAIN LOGIC SCRIPT -->
    <script>
        // ==========================================
        // CONFIGURATION
        // ==========================================
        const ADMIN_PHONE_NO = "60122600969";
        const RAZORPAY_KEY_ID = "rzp_live_SEL3cH71UlI5YI";
        const RAZORPAY_CURRENCY = "MYR";

        const firebaseConfig = {
            apiKey: "AIzaSyAwf31b-wpYQwPbd-3DxnqGVRw8g3xq938",
            authDomain: "ddnetwork-database.firebaseapp.com",
            projectId: "ddnetwork-database",
            storageBucket: "ddnetwork-database.firebasestorage.app",
            messagingSenderId: "699127560990",
            appId: "1:699127560990:web:vg8k3pcvhkomoeb99tr333960v6ohj5m."
        };

        const SEO_CONFIG = {
            '/': { title: 'DDNex | Cheap & Professional Website Services Malaysia', desc: 'DDNex offers Cheap & Professional Website Services Malaysia, AI integration, and digital solutions in Malaysia.', canonical: 'https://ddnex.my/' },
            '/home': { title: 'DDNex | Cheap & Professional Website Services Malaysia', desc: 'DDNex offers Cheap & Professional Website Services Malaysia, AI integration, and digital solutions in Malaysia.', canonical: 'https://ddnex.my/' },
            '/services': { title: 'Our Services | DDNex', desc: 'Explore our range of web services including Static HTML, Front-End, and AI-Powered solutions.', canonical: 'https://ddnex.my/services' },
            '/pricing': { title: 'Pricing Packages | DDNex', desc: 'Affordable website packages in Malaysia. Choose from Static HTML, Front-End, or AI-Powered solutions.', canonical: 'https://ddnex.my/pricing' },
            '/reviews': { title: 'Client Reviews | DDNex', desc: 'See what our clients say about our web design and digital services. Trusted by Malaysian businesses.', canonical: 'https://ddnex.my/reviews' },
            '/clients': { title: 'Portfolio & Clients | DDNex', desc: 'Explore our portfolio of custom websites and digital solutions built for Malaysian businesses.', canonical: 'https://ddnex.my/clients' },
            '/products': { title: 'Our Products | DDNex', desc: 'View DDNex branded digital products and tools.', canonical: 'https://ddnex.my/products' },
            '/terms': { title: 'Terms & Conditions | DDNex', desc: 'Read our terms of service, hosting policies, and refund guidelines.', canonical: 'https://ddnex.my/terms' },
            '/privacy': { title: 'Privacy Policy | DDNex', desc: 'DDNex privacy policy regarding data collection, security, and user rights.', canonical: 'https://ddnex.my/privacy' },
            '/login': { title: 'Login | DDNex', desc: 'Login to your DDNex dashboard to manage your orders and profile.', canonical: 'https://ddnex.my/login' },
            '/signup': { title: 'Sign Up | DDNex', desc: 'Create an account with DDNex to start your digital journey today.', canonical: 'https://ddnex.my/signup' },
            '/forgot-password': { title: 'Forgot Password | DDNex', desc: 'Reset your DDNex account password securely.', canonical: 'https://ddnex.my/forgot-password' },
            '/leadership': { title: 'Leadership Team | DDNex', desc: 'Meet the founders and leaders driving innovation at DDNex.', canonical: 'https://ddnex.my/leadership' }
        };

        let PRICING_DATA = {
            html: { oneTime: 249, monthly: 39, setupFee: 100, desc: "1 Static Landing Page. Mobile Responsive. Basic SEO.", features: ["1 Static Landing Page", "Mobile Responsive Design", "Basic SEO Tags", "Contact Form Integration", "Free ddnet.my subdomain (1st year)", "Maintenance included"] },
            frontend: { oneTime: 1399, monthly: 99, setupFee: 200, desc: "Up to 5 Pages. Animations & Interactive UI.", features: ["Up to 5 Pages", "Animations & Interactive UI", "Contact Forms & WhatsApp", "Basic SEO Setup", "Load Balancer Included", "Maintenance & updates"] },
            bundle: { oneTime: 3499, monthly: 249, setupFee: 700, desc: "Full website & internal management.", features: ["Full website & internal management", "Multi-User Internal Portal", "Database Management", "Advanced Analytics", "Custom Dashboards"] },
            ai: { oneTime: 2499, monthly: 149, setupFee: 400, desc: "Advanced automation & chatbots.", features: ["All Front-End features", "AI Chatbot Integration", "Lead Auto-Response", "Smart Analytics", "AI Tuning & Support"] },
            portal: { oneTime: 3999, monthly: 279, setupFee: 700, desc: "Internal portal for existing sites.", features: ["Internal portal for existing sites", "Multi-user access & database management"] }
        };

        // ==========================================
        // STATE VARIABLES
        // ==========================================
        let db, auth;
        let ADMIN_EMAIL = "ddnetwork.one@outlook.com";
        let currentUserPersonalVoucher = null;
        let pendingPackage = null; 
        let currentCheckoutStep = 1; 

        const state = {
            packageType: null, packagePrice: 0, setupFee: 0, domainPrice: 0, maintenancePrice: 0,
            discountRate: 0, discountFixed: 0, discountType: 'percent', discountCode: '',
            domainType: 'sub', domainName: '', domainNameValid: false, billingCycle: 'monthly',
            isOneTime: false, paymentMode: 'full'
        };

        let currentUserRole = 'user'; 
        let selectedRating = 0;
        let PROMO_CODES = {}; 
        let reviewsCache = []; 
        let billingCycle = 'monthly'; 
        let selectedPackage = '';
        let selectedPackageType = '';

        // ==========================================
        // INITIALIZATION
        // ==========================================
        try {
            if(firebaseConfig.apiKey !== "YOUR_API_KEY_HERE") {
                firebase.initializeApp(firebaseConfig);
                db = firebase.firestore();
                auth = firebase.auth();
            }
        } catch(e) { console.error("Firebase init error:", e); }

        function initializeDatabase() {
            if(!db) return;
            const configRef = db.collection("config").doc("site_settings");
            const doc = configRef.get();
            if (!doc.exists) {
                configRef.set({ maintenance_active: false, payment_methods: [] });
            }
        }

        function listenToConfig() {
            if(!db) return;
            db.collection("config").doc("site_settings").onSnapshot((doc) => {
                if (doc.exists) {
                    const data = doc.data();
                    // Maintenance logic can go here
                }
            });
        }

        // ==========================================
        // NOTIFICATION SYSTEM (CUSTOM MODAL)
        // ==========================================
        function showNotification(title, message, type = 'info') {
            const modal = document.getElementById('notification-modal');
            const iconBox = document.getElementById('notif-icon-box');
            const icon = document.getElementById('notif-icon');
            const titleEl = document.getElementById('notif-title');
            const msgEl = document.getElementById('notif-message');

            iconBox.className = 'notif-icon-box';
            icon.className = '';
            
            if (type === 'success') {
                iconBox.classList.add('notif-success');
                icon.className = 'ri-checkbox-circle-fill text-3xl';
            } else if (type === 'error') {
                iconBox.classList.add('notif-error');
                icon.className = 'ri-close-circle-fill text-3xl';
            } else if (type === 'warning') {
                iconBox.classList.add('notif-warning');
                icon.className = 'ri-error-warning-fill text-3xl';
            } else {
                iconBox.classList.add('notif-info');
                icon.className = 'ri-information-fill text-3xl';
            }

            titleEl.textContent = title;
            msgEl.textContent = message;

            modal.classList.add('active');
        }

        function closeNotification() {
            const modal = document.getElementById('notification-modal');
            if (modal) modal.classList.remove('active');
        }

        // ==========================================
        // ROUTER (UPDATED FOR TERMS/PRIVACY)
        // ==========================================
        const routes = {
            '/': 'home', 
            '/home': 'home', 
            '/services': 'features',
            '/features': 'features', 
            '/pricing': 'pricing', 
            '/reviews': 'reviews', 
            '/order': 'checkout', 
            '/checkout': 'checkout', 
            '/clients': 'portfolio',
            '/products': 'products', 
            '/about': 'about',       
            '/login': 'login', 
            '/signup': 'signup', 
            '/profile': 'profile',
            '/contact': 'contact',   
            '/forgot-password': 'forgot-password',
            '/thank-you': 'thank-you', 
            '/updates': 'updates', 
            '/website-idea': 'website-idea',
            '/about-company': 'about', 
            '/terms': 'terms', 
            '/faq': 'faq', 
            '/privacy': 'privacy',
            '/leadership': 'leadership'
        };

        function routeLink(event, path) { event.preventDefault(); navigateTo(path); }

        function navigateTo(path) {
            window.scrollTo(0, 0);

            if (!path.startsWith('/')) path = '/' + path;

            const sectionId = routes[path];
            if (!sectionId) return console.warn(`Route not found for path: ${path}`);
            
            window.history.pushState({ path: path }, "", path);
            updatePageSEO(path);
            performTransition(sectionId);
        }

        window.addEventListener('popstate', (event) => {
            if (event.state && event.state.path) {
                window.scrollTo(0, 0);
                performTransition(routes[event.state.path]);
                updatePageSEO(event.state.path);
            } else {
                const path = window.location.pathname;
                window.scrollTo(0, 0);
                const target = routes[path] || 'home'; 
                performTransition(target);
                updatePageSEO(path);
            }
        });

        function handleInitialRoute() {
            const path = window.location.pathname;
            const target = routes[path] || 'home'; 
            performTransition(target, true);
            updatePageSEO(path); 
        }

        let isTransitioning = false;

        // OPTIMIZED SMOOTH TRANSITION
        function performTransition(targetSectionId, isInstant = false) {
            if (isTransitioning) return;
            isTransitioning = true;

            const currentSection = document.querySelector('.page.active');
            const targetSection = document.getElementById(`page-${targetSectionId}`);

            if (currentSection === targetSection) {
                isTransitioning = false;
                return;
            }

            window.scrollTo(0, 0);

            if (currentSection) {
                // 1. Add exit animation class
                currentSection.classList.add('anim-exit');
                
                // 2. Wait for exit animation to finish (400ms matches CSS)
                setTimeout(() => {
                    currentSection.classList.remove('active', 'anim-exit');
                    currentSection.style.display = 'none';
                    
                    // 3. Prepare and enter new section
                    targetSection.style.display = 'block';
                    void targetSection.offsetWidth; // Trigger reflow
                    targetSection.classList.add('active');
                    
                    // 4. Handle page specific logic (re-init map on home, etc)
                    handlePageLogic(targetSectionId);
                    
                    isTransitioning = false;
                }, 400); 
            } else {
                // First load or no previous section
                targetSection.style.display = 'block';
                targetSection.classList.add('active');
                handlePageLogic(targetSectionId);
                isTransitioning = false;
            }
        }

        function handlePageLogic(targetSectionId) {
            if(targetSectionId === 'profile') loadProfilePageData();
            if(targetSectionId === 'reviews' || targetSectionId === 'home') {
                renderDummyReview(); 
                if(reviewsCache.length === 0) listenToReviews(); 
                else renderReviewsList(document.getElementById('reviews-list'));
            }
            if(targetSectionId === 'checkout' && auth && auth.currentUser) fetchAndSyncUserData(auth.currentUser.uid);
            if(targetSectionId === 'updates' && auth && auth.currentUser) fetchAndSyncUserData(auth.currentUser.uid);
            if(targetSectionId === 'home') loadHomePortfolio();
            if(targetSectionId === 'portfolio') loadPortfolio();
            if(targetSectionId === 'products') loadProducts();
        }
    
        // Initial route check
        setTimeout(handleInitialRoute, 100);

        function updatePageSEO(path) {
            const config = SEO_CONFIG[path];
            if(config) {
                document.title = config.title;
                document.querySelector('meta[name="description"]').setAttribute("content", config.desc);
                document.querySelector('link[rel="canonical"]').setAttribute("href", config.canonical);
            }
        }

        // ==========================================
        // MODALS & ALERTS
        // ==========================================
        function showAuthModal() {
            const modal = document.getElementById('auth-modal');
            if(modal) modal.classList.add('active');
        }

        function closeAuthModal() {
            const modal = document.getElementById('auth-modal');
            if(modal) modal.classList.remove('active');
        }

        function openQuoteForm(packageName) {
            showNotification("Request Quote", `Redirecting to contact form for ${packageName}...`, "info");
            setTimeout(() => navigateTo('contact'), 1500);
        }

        // ==========================================
        // NEWSLETTER LOGIC
        // ==========================================
        function handleNewsletterSubmit(e) {
            e.preventDefault();
            const form = e.target;
            const input = form.querySelector('input');
            const btn = document.getElementById('newsletter-btn');
            const email = input.value;

            if (!email) {
                showNotification("Error", "Please enter a valid email address.", "error");
                return;
            }

            const originalBtnText = btn.innerText;
            btn.disabled = true;
            btn.innerText = "Joining...";

            setTimeout(() => {
                document.getElementById('newsletter-form').classList.add('hidden');
                document.getElementById('newsletter-success').classList.remove('hidden');
                showNotification("Success", "Successfully subscribed!", "success");
                
                btn.disabled = false;
                btn.innerText = originalBtnText;
            }, 1500);
        }

        // ==========================================
        // AUTH LOGIC
        // ==========================================
        function handleLogin(e) {
            e.preventDefault();
            if(!auth) return showNotification("Error", "Authentication system initializing...", "error");
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            auth.signInWithEmailAndPassword(email, password).then(() => {
                const user = auth.currentUser;
                triggerLoginSuccessAnimation(() => {
                    if (pendingPackage) {
                        selectPackage(pendingPackage.name, pendingPackage.type);
                        pendingPackage = null;
                    } else {
                        navigateTo('/');
                    }
                }, user.displayName || user.email.split('@')[0]);
            }).catch((error) => {
                const friendlyMsg = getFirebaseErrorMessage(error);
                showNotification("Login Failed", friendlyMsg, "error");
            });
        }
        
        function handleForgotPassword(e) {
            e.preventDefault();
            if(!auth) return showNotification("Error", "Authentication system initializing...", "error");
            
            const email = document.getElementById('forgot-email').value;
            
            if(!email) return showNotification("Error", "Please enter your email address.", "error");

            auth.sendPasswordResetEmail(email).then(() => {
                showNotification("Email Sent", "Please check your email for password reset instructions.", "success");
                setTimeout(() => navigateTo('login'), 3000);
            }).catch((error) => {
                const friendlyMsg = getFirebaseErrorMessage(error);
                showNotification("Reset Failed", friendlyMsg, "error");
            });
        }

        function handleSignup(e) {
            e.preventDefault();
            if(!auth) return showNotification("Error", "Firebase not configured", "error");
            
            const name = document.getElementById('signup-name').value;
            const phone = document.getElementById('signup-phone').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            
            auth.createUserWithEmailAndPassword(email, password).then((userCredential) => {
                return db.collection("users").doc(userCredential.user.uid).set({ 
                    name: name, phone: phone, email: email, role: 'user',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp() 
                });
                }).then(() => {
                    triggerLoginSuccessAnimation(() => {
                        if (pendingPackage) {
                            selectPackage(pendingPackage.name, pendingPackage.type);
                            pendingPackage = null;
                        } else {
                            navigateTo('/');
                        }
                    }, name);
                }).catch((error) => {
                    const friendlyMsg = getFirebaseErrorMessage(error);
                    showNotification("Signup Failed", friendlyMsg, "error");
                });
        }
                function handleGoogleAuth() {
            if(!auth) return showNotification("Error", "Auth not initialized", "error");
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider).then((result) => {
                const user = result.user;
                db.collection("users").doc(user.uid).get().then((doc) => {
                    if (!doc.exists) {
                        return db.collection("users").doc(user.uid).set({
                            name: user.displayName || 'Google User', email: user.email, phone: '', role: 'user',
                            createdAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                    }
                }).then(() => {
                    const name = user.displayName || user.email.split('@')[0];
                    triggerLoginSuccessAnimation(() => {
                        if (pendingPackage) {
                            selectPackage(pendingPackage.name, pendingPackage.type);
                            pendingPackage = null;
                        } else {
                            navigateTo('/');
                        }
                    }, name);
                });
            }).catch((error) => {
                console.error(error);
                const friendlyMsg = getFirebaseErrorMessage(error);
                showNotification("Google Auth Failed", friendlyMsg, "error");
            });
        }

        function triggerLoginSuccessAnimation(onCompleteCallback, userName) {
            showNotification("Welcome", `Welcome back, ${userName}!`, "success");
            if(onCompleteCallback) {
                setTimeout(() => onCompleteCallback(), 1000);
            }
        }

        function getFirebaseErrorMessage(error) {
            switch (error.code) {
                case 'auth/user-not-found': return "No account found with this email address.";
                case 'auth/wrong-password': return "Incorrect password. Please try again.";
                case 'auth/invalid-login-credentials': return "Invalid email or password. Please try again.";
                case 'auth/invalid-credential': return "The provided credentials are invalid.";
                case 'auth/email-already-in-use': return "This email is already registered. Please login.";
                case 'auth/weak-password': return "Password should be at least 6 characters.";
                case 'auth/invalid-email': return "Please enter a valid email address.";
                case 'auth/too-many-requests': return "Access temporarily disabled due to many failed attempts. Reset password or try later.";
                case 'auth/user-disabled': return "This account has been disabled. Contact support.";
                case 'auth/popup-closed-by-user': return "Sign-in process was cancelled.";
                case 'auth/network-request-failed': return "Network error. Please check your connection.";
                default: return "An unexpected error occurred. Please try again.";
            }
        }

        // ==========================================
        // PROFILE & AUTH STATE LISTENER (UPDATED)
        // ==========================================
        function loadProfilePageData() {
            if(!auth || !auth.currentUser) return;
            
            const uid = auth.currentUser.uid;
            const profFields = ['prof-name', 'prof-phone', 'prof-email', 'prof-company'];
            const displayFields = ['prof-display-name', 'prof-display-email'];
            
            profFields.forEach(id => { const el = document.getElementById(id); if(el) el.value = "Loading..."; });
            displayFields.forEach(id => { const el = document.getElementById(id); if(el) el.textContent = "Loading..."; });

            // 1. Fetch User Data
            db.collection("users").doc(uid).get().then((doc) => {
                if (doc.exists) {
                    const data = doc.data();
                    // Form Fields
                    if(data.name) document.getElementById('prof-name').value = data.name;
                    if(data.phone) document.getElementById('prof-phone').value = data.phone;
                    if(data.email) {
                        document.getElementById('prof-email').value = data.email || auth.currentUser.email;
                        document.getElementById('prof-display-email').textContent = data.email || auth.currentUser.email;
                    }
                    if(data.company) document.getElementById('prof-company').value = data.company;
                    
                    // Display Fields
                    document.getElementById('prof-display-name').textContent = data.name || 'User';
                    document.getElementById('prof-role').textContent = data.role === 'admin' ? 'Admin' : 'Standard Client';
                    
                    // Voucher Logic
                    if(data.personalVoucher) { 
                        currentUserPersonalVoucher = data.personalVoucher; 
                        showVoucherCard(data.personalVoucher); 
                    } else { 
                        currentUserPersonalVoucher = null; 
                        hideVoucherCard(); 
                    }
                }
            }).catch((error) => showNotification("Error", "Error loading profile data.", "error"));

            // 2. Fetch Orders to Determine Active Plan (NEW LOGIC)
            fetchAndRenderActivePlan(uid);
            
            // 3. Fetch Order History Table
            loadOrderHistory(uid);
        }

        // NEW: Function to determine and render Active Plan
        function fetchAndRenderActivePlan(uid) {
            if(!db) return;
            const activeCard = document.getElementById('active-plan-card');
            const noPlanCta = document.getElementById('no-plan-cta');
            const planNameEl = document.getElementById('profile-plan-name');
            const domainNameEl = document.getElementById('profile-domain-name');
            const billingCycleEl = document.getElementById('profile-billing-cycle');
            const statusBadge = document.getElementById('profile-status-badge');

            // Reset UI
            activeCard.classList.add('hidden');
            noPlanCta.classList.add('hidden');

            db.collection("orders").where("userId", "==", uid).orderBy("timestamp", "desc").limit(1)
                .get()
                .then((snapshot) => {
                    if (!snapshot.empty) {
                        // Find the most recent order
                        const orderData = snapshot.docs[0].data();
                        
                        // Logic: Consider a plan active if the status is 'Paid' or 'Completed'
                        if (orderData.status === 'Paid' || orderData.status === 'Completed') {
                            
                            // Show Active Card
                            activeCard.classList.remove('hidden');
                            
                            planNameEl.textContent = orderData.package || 'Website Package';
                            
                            // Handle Domain
                            if(orderData.domain && orderData.domain.length > 0) { 
                                domainNameEl.textContent = orderData.domain;
                            } else if (orderData.domainName) {
                                domainNameEl.textContent = orderData.domainName;
                            }
                             else {
                                domainNameEl.textContent = "Pending Configuration";
                            }

                            // Handle Billing Cycle
                            const cycle = orderData.billingCycle || 'Monthly';
                            billingCycleEl.textContent = cycle === 'One-Time' ? 'One-time Payment' : `Recurring (${cycle})`;

                            // Set Status Color
                            statusBadge.className = "px-4 py-1.5 rounded-full font-bold text-sm border";
                            if(orderData.status === 'Paid') {
                                statusBadge.classList.add('bg-emerald-900/50', 'text-emerald-400', 'border-emerald-700/30');
                                statusBadge.textContent = 'Active';
                            } else if (orderData.status === 'Completed') {
                                statusBadge.classList.add('bg-blue-900/50', 'text-blue-400', 'border-blue-700/30');
                                statusBadge.textContent = 'Completed';
                            }
                        } else {
                            // User has orders, but the latest one is not Paid/Completed
                            noPlanCta.classList.remove('hidden');
                        }
                    } else {
                        // No orders found at all
                        noPlanCta.classList.remove('hidden');
                    }
                }).catch((error) => {
                    console.error("Error fetching active plan:", error);
                    noPlanCta.classList.remove('hidden');
                });
        }

        function loadOrderHistory(uid) {
            if(!db) return;
            const tbody = document.getElementById('order-history-body');
            const noMsg = document.getElementById('no-orders');
            
            if(tbody) tbody.innerHTML = '<tr><td colspan="4" style="text-align:center;">Loading...</td></tr>';

            db.collection("orders").where("userId", "==", uid).orderBy("timestamp", "desc").limit(10)
                .onSnapshot((snapshot) => {
                    if(tbody) tbody.innerHTML = '';
                    if (snapshot.empty) {
                        if(noMsg) noMsg.classList.remove('hidden');
                        if(tbody) tbody.parentElement.style.display = 'none';
                    } else {
                        if(noMsg) noMsg.classList.add('hidden');
                        if(tbody) tbody.parentElement.style.display = 'table';
                        snapshot.forEach((doc) => {
                            const data = doc.data();
                            const date = data.timestamp ? new Date(data.timestamp.seconds * 1000).toLocaleDateString() : '-';
                            const total = data.total || 'RM 0';
                            const pkg = data.package || 'Unknown Package';
                            const status = data.status || 'Pending';
                            let statusClass = 'status-pending';
                            if(status === 'Paid') statusClass = 'status-paid';
                            if(status === 'Completed') statusClass = 'status-completed';
                            if(status === 'Cancelled') statusClass = 'status-cancelled';
                            
                            const row = `<tr><td>${date}</td><td style="font-weight:600;">${pkg}</td><td class="text-right">${total}</td><td class="text-right"><span class="status-badge ${statusClass}">${status}</span></td></tr>`;
                            if(tbody) tbody.innerHTML += row;
                        });
                    }
                });
        }

        function showVoucherCard(voucher) {
            const section = document.getElementById('profile-voucher-section');
            const codeEl = document.getElementById('profile-voucher-code');
            const descEl = document.getElementById('profile-voucher-desc');
            const noVoucher = document.getElementById('no-voucher-section');
            
            if(section && codeEl && descEl) {
                section.classList.remove('hidden');
                if(noVoucher) noVoucher.classList.add('hidden');
                
                codeEl.innerText = voucher.code;
                const displayVal = voucher.type === 'fixed' ? `RM ${voucher.value}` : `${voucher.value * 100}%`;
                descEl.innerText = `${displayVal} Discount`;
            }
        }

        function hideVoucherCard() {
            const section = document.getElementById('profile-voucher-section');
            const noVoucher = document.getElementById('no-voucher-section');
            if(section) section.classList.add('hidden');
            if(noVoucher) noVoucher.classList.remove('hidden');
        }

        function handleProfileUpdate(e) {
            e.preventDefault();
            if(!auth || !auth.currentUser) return;
            const name = document.getElementById('prof-name').value;
            const phone = document.getElementById('prof-phone').value;
            const company = document.getElementById('prof-company').value;
            db.collection("users").doc(auth.currentUser.uid).update({ name: name, phone: phone, company: company })
            .then(() => {
                showNotification("Success", "Profile Updated Successfully!", "success");
                fetchAndSyncUserData(auth.currentUser.uid);
                document.getElementById('prof-display-name').textContent = name; // Quick update
            }).catch((error) => showNotification("Error", error.message, "error"));
        }

        function deletePersonalVoucher() {
            if(!auth || !auth.currentUser) return;
            if(confirm("Are you sure you want to remove this voucher?")) {
                db.collection("users").doc(auth.currentUser.uid).update({ personalVoucher: firebase.firestore.FieldValue.delete() }).then(() => {
                    currentUserPersonalVoucher = null; 
                    hideVoucherCard();
                    showNotification("Voucher Removed", "Voucher removed from account.", "success");
                });
            }
        }

        function handleLogout() {
            if(auth) { 
                currentUserPersonalVoucher = null; 
                auth.signOut().then(() => { 
                    showNotification("Logged Out", "See you again soon!", "success"); 
                    navigateTo('/'); 
                }); 
            }
        }

        // Auth State Listener
        if(auth) {
            auth.onAuthStateChanged((user) => {
                if (user) {
                    db.collection("users").doc(user.uid).get().then((doc) => {
                        if (doc.exists) {
                            const data = doc.data();
                            currentUserRole = data.role || 'user'; 
                            updateHeaderForUser(user); 
                            if(data.personalVoucher) { currentUserPersonalVoucher = data.personalVoucher; } 
                            else { currentUserPersonalVoucher = null; }
                            
                            // Only redirect if on login page
                            if(window.location.pathname === '/login' || window.location.pathname === '/signup') {
                                // Optional: navigateTo('/');
                            }
                        }
                    });
                } else {
                    updateHeaderForGuest(); 
                }
            });
        }

        function updateHeaderForUser(user) {
            const isAdmin = currentUserRole === 'admin';
            const deskAuth = document.getElementById('desktopAuthLinks');
            if(deskAuth) {
                let userControls = `<a href="#" onclick="navigateTo('/profile')" class="hidden md:flex items-center gap-2 text-sm font-medium text-slate-300 hover:text-white"><i class="ri-user-line"></i> Profile</a><span class="logout-btn hidden md:block text-slate-400 cursor-pointer transition: 0.2s white-space-nowrap;" onclick="handleLogout()">Logout</span>`;
                if (isAdmin) userControls = `<a href="admin.html" target="_blank" class="admin-link text-emerald-400 mr-4" title="Admin Portal"><i class="ri-shield-user-fill"></i></a>${userControls}`;
                deskAuth.innerHTML = userControls;
            }
            
            const mobAuth = document.getElementById('mobileAuthLinksContainer');
            if(mobAuth) {
                let authButtons = `<a href="/profile" onclick="routeLink(event, '/profile'); toggleMobileMenu()" class="block text-slate-300 hover:text-white py-4 font-medium border-b border-slate-800">Profile</a>`;
                if (isAdmin) authButtons += `<a href="admin.html" target="_blank" onclick="toggleMobileMenu()" class="block text-emerald-400 hover:text-white py-4 font-medium border-b border-slate-800">Admin Portal</a>`;
                authButtons += `<a href="#" onclick="handleLogout(); toggleMobileMenu()" class="block text-red-400 hover:text-red-300 py-4 font-medium">Logout</a>`;
                mobAuth.innerHTML = authButtons;
            }
        }

        function updateHeaderForGuest() {
            const deskAuth = document.getElementById('desktopAuthLinks');
            if(deskAuth) deskAuth.innerHTML = `<a href="/login" onclick="navigateTo('login')" class="px-6 py-2 rounded-full border border-slate-700 text-slate-300 hover:bg-slate-800 transition-colors text-sm font-medium">Login</a>`;
            const mobAuth = document.getElementById('mobileAuthLinksContainer');
            if(mobAuth) mobAuth.innerHTML = `<a href="/login" onclick="navigateTo('login'); toggleMobileMenu()" class="block text-slate-300 hover:text-white py-4 font-medium border-b border-slate-800">Login</a><a href="/signup" onclick="navigateTo('signup'); toggleMobileMenu()" class="block text-slate-300 hover:text-white py-4 font-medium border-b border-slate-800">Sign Up</a>`;
        }

        function clearUserData() {
            const inputs = ['prof-name', 'prof-phone', 'prof-email', 'prof-company', 'co-firstname', 'co-lastname', 'co-email', 'co-company'];
            inputs.forEach(id => { const el = document.getElementById(id); if(el) el.value = ''; });
        }

        // ==========================================
        // PRICING LOGIC
        // ==========================================
        function setBilling(cycle) {
            billingCycle = cycle;
            const btnMonthly = document.getElementById('btn-monthly');
            const btnOnetime = document.getElementById('btn-onetime');

            if(btnMonthly && btnOnetime) {
                if(cycle === 'monthly') { 
                    btnMonthly.classList.add('bg-emerald-600', 'text-white'); 
                    btnMonthly.classList.remove('text-slate-400');
                    btnOnetime.classList.remove('bg-emerald-600', 'text-white'); 
                    btnOnetime.classList.add('text-slate-400');
                } else { 
                    btnMonthly.classList.remove('bg-emerald-600', 'text-white'); 
                    btnMonthly.classList.add('text-slate-400');
                    btnOnetime.classList.add('bg-emerald-600', 'text-white'); 
                    btnOnetime.classList.remove('text-slate-400');
                }
            }

            document.querySelectorAll('.price-display').forEach(el => {
                const monthly = el.dataset.monthly;
                const onetime = el.dataset.onetime;
                if (monthly && onetime) {
                    el.textContent = 'RM ' + (cycle === 'monthly' ? monthly : onetime);
                    const periodEl = el.parentElement.querySelector('.price-period');
                    if(periodEl) periodEl.textContent = cycle === 'monthly' ? '/month' : ' one-time';
                }
            });

            document.querySelectorAll('.maintenance-yes').forEach(el => el.classList.toggle('hidden', cycle === 'onetime'));
            document.querySelectorAll('.maintenance-no').forEach(el => el.classList.toggle('hidden', cycle === 'monthly'));

            state.billingCycle = cycle;
            state.isOneTime = (cycle === 'onetime');
            
            if(selectedPackageType && PRICING_DATA[selectedPackageType]) {
                state.packagePrice = cycle === 'monthly' ? PRICING_DATA[selectedPackageType].monthly : PRICING_DATA[selectedPackageType].oneTime;
                updateTotal();
            }
        }

        function attemptSelectPackage(name, type) {
            if (typeof auth === 'undefined' || auth === null) { 
                showNotification("Error", "Authentication system initializing...", "error"); 
                return; 
            }
            
            if (auth.currentUser) { 
                selectPackage(name, type); 
            } else { 
                pendingPackage = { name, type };
                showAuthModal(); 
            }
        }

        // ==========================================
        // NEW 3-STEP CHECKOUT LOGIC
        // ==========================================
        
        function selectPackage(name, type) {
            selectedPackage = name;
            selectedPackageType = type;
            state.packageType = type;
            
            // Use global billing cycle, defaulting to monthly if not set
            state.billingCycle = billingCycle || 'monthly';
            state.isOneTime = (billingCycle === 'onetime');
            state.paymentMode = 'full';
            
            // Get prices from data
            state.setupFee = PRICING_DATA[type].setupFee;
            state.packagePrice = billingCycle === 'monthly' ? PRICING_DATA[type].monthly : PRICING_DATA[type].oneTime;

            // Reset Step to 1
            currentCheckoutStep = 1;
            
            // Populate Step 1 Data
            document.getElementById('s1-plan-name').innerText = name;
            document.getElementById('s1-plan-price').innerText = 'RM ' + state.packagePrice;
            document.getElementById('s1-setup-price').innerText = 'RM ' + state.setupFee;
            
            const firstTotal = state.setupFee + state.packagePrice;
            document.getElementById('s1-first-total').innerText = 'RM ' + firstTotal;
            document.getElementById('s1-recurring-price').innerText = 'RM ' + state.packagePrice + '/mo';
            
            // Populate Features List
            const featureContainer = document.getElementById('s1-features-list');
            featureContainer.innerHTML = '';
            if(PRICING_DATA[type].features) {
                PRICING_DATA[type].features.forEach(feature => {
                    featureContainer.innerHTML += `<li><i class="ri-checkbox-circle-fill text-emerald-500"></i> ${feature}</li>`;
                });
            }

            // Reset Steps UI
            updateStepUI(1);
            
            if(auth && auth.currentUser) fetchAndSyncUserData(auth.currentUser.uid);
            else { clearUserData(); hideVoucherCard(); }

            // Navigate to checkout
            navigateTo('checkout');
        }

        function updateStepUI(step) {
            // Hide all steps
            document.querySelectorAll('.step-content').forEach(el => el.classList.remove('active'));
            // Show current step
            document.getElementById(`step-${step}`).classList.add('active');
            
            // Update dots
            for(let i=1; i<=3; i++) {
                const dot = document.getElementById(`dot-${i}`);
                dot.classList.remove('active', 'completed');
                if(i < step) dot.classList.add('completed');
                if(i === step) dot.classList.add('active');
            }
            
            window.scrollTo(0, 0);
        }

        function goToStep(step) {
            currentCheckoutStep = step;
            updateStepUI(step);
        }

        function selectDomainType(type, element) {
            state.domainType = type;
            
            // UI Update
            const options = document.querySelectorAll('.radio-option');
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            const input = element.querySelector('input');
            if(input) input.checked = true;
            
            // Input Visibility
            const subInput = document.getElementById('subdomain-input');
            const customInput = document.getElementById('custom-domain-input');
            
            if(type === 'sub') {
                subInput.disabled = false;
                customInput.disabled = true;
                customInput.value = '';
                state.domainPrice = 0;
                updateDomainPreview();
            } else {
                subInput.disabled = true;
                subInput.value = '';
                customInput.disabled = false;
                state.domainPrice = 0;
                updateDomainPreview();
            }
        }

        function updateDomainPreview() {
            const text = document.getElementById('subdomain-input').value;
            const preview = document.getElementById('preview-text');
            if(preview) {
                preview.innerText = text.length > 0 ? text : "yourname";
                state.domainName = text.length > 0 ? `${text}.ddnex.my` : '';
                state.domainNameValid = text.length > 0;
            }
        }

        function applyPromo() {
            if(!auth || !auth.currentUser) return showNotification("Login Required", "Please login to use Promo Codes.", "warning");
            const input = document.getElementById('promo-input');
            const code = input ? input.value.trim().toUpperCase() : '';
            
            if(!code || code === "") {
                showNotification("Missing Code", "Please enter a voucher code first.", "error");
                return;
            }
            
            // Mock Promo Logic
            if(code === "WELCOME10") {
                state.discountType = 'percent';
                state.discountRate = 0.10;
                state.discountCode = code;
                showNotification("Promo Applied", "10% discount applied!", "success");
                const msg = document.getElementById('promo-msg');
                msg.innerText = "10% Discount Applied";
                msg.classList.remove('hidden', 'text-red-400');
                msg.classList.add('text-emerald-400');
            } else {
                showNotification("Invalid Code", "Invalid code. Please check and try again.", "error");
                const msg = document.getElementById('promo-msg');
                msg.innerText = "Invalid Code";
                msg.classList.remove('hidden', 'text-emerald-400');
                msg.classList.add('text-red-400');
            }
        }

        function validateAndGoToStep3() {
            const form = document.getElementById('checkout-form-step2');
            if(!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            // Validate Domain
            if(state.domainType === 'sub') {
                if(!state.domainNameValid) {
                    showNotification("Domain Required", "Please enter a valid subdomain name.", "error");
                    return;
                }
            } else {
                const custom = document.getElementById('custom-domain-input').value;
                if(!custom) {
                    showNotification("Domain Required", "Please enter your custom domain.", "error");
                    return;
                }
                state.domainName = custom;
            }

            // Populate Step 3 Summary
            document.getElementById('s3-plan-name').innerText = selectedPackage;
            document.getElementById('s3-sub-price').innerText = 'RM ' + state.packagePrice;
            document.getElementById('s3-setup-price').innerText = 'RM ' + state.setupFee;
            document.getElementById('s3-domain-price').innerText = state.domainPrice > 0 ? 'RM ' + state.domainPrice : 'Free';
            
            let subtotal = state.packagePrice + state.setupFee + state.domainPrice;
            let discountAmt = 0;
            
            if(state.discountType === 'percent') {
                discountAmt = subtotal * state.discountRate;
                document.getElementById('s3-discount-row').classList.remove('hidden');
                document.getElementById('s3-discount-code').innerText = state.discountCode;
                document.getElementById('s3-discount-val').innerText = '-RM ' + Math.round(discountAmt);
            } else {
                document.getElementById('s3-discount-row').classList.add('hidden');
            }

            const total = Math.round(subtotal - discountAmt);
            document.getElementById('s3-total').innerText = 'RM ' + total;
            document.getElementById('s3-recurring').innerText = 'RM ' + state.packagePrice + '/mo';

            goToStep(3);
        }

        function fetchAndSyncUserData(uid) {
            if(!db) return;
            db.collection("users").doc(uid).get().then((doc) => {
                if (doc.exists) {
                    const data = doc.data();
                    if(document.getElementById('co-firstname')) document.getElementById('co-firstname').value = data.name || '';
                    if(document.getElementById('co-lastname')) document.getElementById('co-lastname').value = ''; 
                    if(document.getElementById('co-email')) {
                        document.getElementById('co-email').value = data.email || auth.currentUser.email;
                        document.getElementById('co-email').readOnly = true;
                    }
                    if(document.getElementById('co-phone')) document.getElementById('co-phone').value = data.phone || '';
                    if(document.getElementById('co-company')) document.getElementById('co-company').value = data.company || '';
                }
            });
        }

        function removeVoucher() {
            state.discountCode = ''; state.discountRate = 0; state.discountFixed = 0;
            showNotification("Voucher Removed", "Voucher code removed from order.", "info");
            validateAndGoToStep3(); 
        }

        function updateTotal() {
            console.log("Total updated");
        }

        // ==========================================
        // RAZORPAY INTEGRATION
        // ==========================================
        function initiateRazorpayPayment() {
            const firstName = document.getElementById('co-firstname') ? document.getElementById('co-firstname').value : '';
            const lastName = document.getElementById('co-lastname') ? document.getElementById('co-lastname').value : '';
            const name = (firstName || ' ') + ' ' + (lastName || ' ');
            const phone = document.getElementById('co-phone') ? document.getElementById('co-phone').value : '';
            const email = document.getElementById('co-email') ? document.getElementById('co-email').value : '';
            
            if(!name.trim() || !phone || !email) return showNotification("Missing Info", "Please ensure all details are correct.", "error");

            const totalText = document.getElementById('s3-total') ? document.getElementById('s3-total').innerText : 'RM 0';
            const amountNumeric = parseFloat(totalText.replace('RM ', ''));
            const amountInSubunits = Math.round(amountNumeric * 100);

            const pendingOrder = {
                userId: auth.currentUser ? auth.currentUser.uid : null,
                name: name, phone: phone, email: email, 
                package: selectedPackage, 
                domainType: state.domainType, domainName: state.domainName, domainPrice: state.domainPrice,
                packagePrice: state.packagePrice, setupFee: state.setupFee, maintenancePrice: state.maintenancePrice,
                total: `RM ${amountNumeric}`, 
                discountCode: state.discountCode || null, paymentMethod: 'Razorpay (Curlec)',
                paymentMode: state.paymentMode, billingCycle: state.isOneTime ? 'One-Time' : 'Monthly',
                status: 'Pending', timestamp: firebase.firestore.FieldValue.serverTimestamp()
            };

            localStorage.setItem('pendingOrder', JSON.stringify(pendingOrder));

            const options = {
                "key": RAZORPAY_KEY_ID, "amount": amountInSubunits, "currency": RAZORPAY_CURRENCY, 
                "name": "DDNex",
                "description": selectedPackage + (state.paymentMode === 'deposit' ? " (Deposit)" : ""),
                "image": "https://raw.githubusercontent.com/ddnetwork-one/ddnetwork-store/refs/heads/main/crop_ddnlogo.png",
                "handler": function(response){ 
                    handlePaymentSuccess(response.razorpay_payment_id);
                },
                "modal": { 
                    "ondismiss": function(){ 
                        console.log('Checkout form closed/cancelled by user');
                        showNotification("Payment Cancelled", "You have cancelled the payment process.", "warning");
                    }
                },
                "prefill": { "name": name, "email": email, "contact": phone },
                "notes": { "address": document.getElementById('co-company').value || "Malaysia", "package": selectedPackage, "domain": state.domainName, "payment_mode": state.paymentMode },
                "theme": { "color": "#10B981" } // Emerald theme
            };

            try {
                const rzp1 = new Razorpay(options);
                rzp1.open(); 

            } catch (error) {
                console.error("Razorpay Error:", error);
                showNotification("Payment Error", "Payment Gateway Error. Please contact support.", "error");
            }
        }

        function handlePaymentSuccess(paymentId) {
            const pendingOrderStr = localStorage.getItem('pendingOrder');
            if(!pendingOrderStr) {
                showNotification("Order Error", "Order data missing. Contact support.", "error");
                return;
            }

            const orderData = JSON.parse(pendingOrderStr);
            
            orderData.razorpay_payment_id = paymentId;
            orderData.status = 'Paid';

            // Ensure empty fields are saved
            if(!orderData.name || orderData.name.trim() === " ") orderData.name = "-";
            if(!orderData.phone) orderData.phone = "-";
            
            const overlay = document.getElementById('processing-overlay');
            if(overlay) {
                overlay.style.display = 'flex';
                const msgEl = document.getElementById('process-message');
                if(msgEl) msgEl.innerHTML = `<div style="font-size:1.5rem; margin-bottom:1rem;"><i class="ri-loader-4-line ri-spin"></i></div> Processing Payment...`;
            }

            let voucherUpdatePromise = Promise.resolve();
            if (orderData.discountCode && auth.currentUser && auth.currentUser.uid) {
                // Assuming personal voucher redemption logic here if needed
            }

            voucherUpdatePromise.then(() => {
                const firebaseOrderData = {
                    adminNote: "OWN COMPANY CREATED", companyName: orderData.companyName || "DDNex One",
                    customerEmail: orderData.email, customerName: orderData.name, customerPhone: orderData.phone,
                    domain: orderData.domainName, internalNotes: "",
                    maintenance: orderData.maintenancePrice > 0 ? (orderData.maintenancePrice === 50 ? "Basic" : "Business") : "None",
                    package: orderData.package, paymentMethod: "Razorpay (Curlec)", promo: orderData.discountCode || "",
                    razorpay_payment_id: paymentId,
                    salesRepIds: [], salesTeamIds: [], salesTeamNames: [], status: "Paid",
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(), total: orderData.total, userId: orderData.userId || ""
                };
                return db.collection("orders").add(firebaseOrderData);
            }).then(() => {
                localStorage.removeItem('pendingOrder');
                showNotification("Success!", "Payment Successful!", "success");
                if(overlay) overlay.style.display = 'none';
                navigateTo('thank-you');
            }).catch((error) => {
                console.error("Order Error:", error);
                showNotification("Processing Error", "Order processing failed. Please contact support.", "error");
                if(overlay) overlay.style.display = 'none';
            });
        }

        // ==========================================
        // UTILITIES & HELPERS
        // ==========================================
        function checkPasswordStrength() {
            const p = document.getElementById('signup-password').value;
            if(!p) return;
            
            const upper = /[A-Z]/.test(p);
            const lower = /[a-z]/.test(p);
            const num = /[0-9]/.test(p);
            const len = p.length >= 6;
            
            toggleReq('req-upper', upper);
            toggleReq('req-lower', lower);
            toggleReq('req-num', num);
            toggleReq('req-len', len);
        }

        function toggleReq(id, isValid) {
            const el = document.getElementById(id);
            if(el) {
                if(isValid) {
                    el.classList.add('valid');
                    el.querySelector('i').className = 'ri-checkbox-circle-fill';
                } else {
                    el.classList.remove('valid');
                    el.querySelector('i').className = 'ri-close-circle-line';
                }
            }
        }

        // ==========================================
        // REVIEWS LOGIC
        // ==========================================
        function setupStarRating() {
            const container = document.getElementById('star-input-container');
            if(!container) return;
            const stars = container.querySelectorAll('.star-icon');
            const hiddenInput = document.getElementById('rating-value');

            stars.forEach(star => {
                star.addEventListener('mouseover', function() {
                    highlightStars(parseInt(this.getAttribute('data-val')));
                });
                
                star.addEventListener('click', function() {
                    selectedRating = parseInt(this.getAttribute('data-val'));
                    if(hiddenInput) hiddenInput.value = selectedRating;
                    highlightStars(selectedRating);
                    if(document.getElementById('rating-error')) document.getElementById('rating-error').style.display = 'none';
                });
            });

            container.addEventListener('mouseleave', function() {
                highlightStars(selectedRating);
            });
        }

        function highlightStars(count) {
            const container = document.getElementById('star-input-container');
            if(!container) return;
            const stars = container.querySelectorAll('.star-icon');
            stars.forEach(star => {
                star.classList.toggle('selected', parseInt(star.getAttribute('data-val')) <= count);
            });
        }

        function renderDummyReview() {
            const container = document.getElementById('reviews-list');
            if(!container) return;
            
            if(container.innerHTML.trim() !== '' && !container.innerHTML.includes('Danial Danish')) return;

            const dummyData = { 
                rating: 5, 
                userName: 'Danial Danish (Owner)', 
                comment: 'I built this site to help businesses grow. Let me know what you think!', 
                timestamp: null 
            };
            
            const date = 'Recently';
            const initials = (dummyData.userName || 'User').substring(0, 2).toUpperCase();
            let starsHtml = '';
            for(let i=1; i<=5; i++) starsHtml += `<i class="${i <= dummyData.rating ? 'ri-star-fill' : 'ri-star-line'}" style="color:${i<=dummyData.rating?'var(--star)':'#334155'}"></i>`;
            
            const html = `
                <div class="review-card glass rounded-2xl p-6 border border-slate-800 bg-dark hover-lift">
                    <div class="review-header">
                        <div class="review-avatar">${initials}</div>
                        <div class="review-info"><h4>${dummyData.userName || 'Anonymous'}</h4><div class="review-date">${date}</div></div>
                    </div>
                    <div class="review-stars">${starsHtml}</div>
                    <p class="review-text">"${dummyData.comment}"</p>
                </div>`;
            
            container.innerHTML = html + container.innerHTML;
        }

        function listenToReviews() {
            if(!db) return;
            db.collection("customer_reviews").orderBy("timestamp", "desc").limit(20)
                .onSnapshot((snapshot) => {
                    reviewsCache = []; 
                    snapshot.forEach(doc => reviewsCache.push(doc.data()));
                    
                    const reviewsList = document.getElementById('reviews-list');
                    if(reviewsList) {
                        renderReviewsList(reviewsList);
                    }
                }, (error) => console.error("Error syncing reviews:", error));
        }

        function renderReviewsList(container) {
            const DUMMY_REVIEWS = [
                { rating: 5, userName: 'Danial Danish (Owner)', comment: 'I built this site to help businesses grow. Let me know what you think!', timestamp: null }
            ];
            
            let allReviews = [...DUMMY_REVIEWS, ...reviewsCache];
            
            if (allReviews.length === 0) {
                container.innerHTML = '<div class="col-span-2 text-center py-8 text-slate-500">No reviews yet.</div>';
                return;
            }

            const isExpanded = container.classList.contains('expanded');
            const displayList = isExpanded ? allReviews : allReviews.slice(0, 3);

            container.innerHTML = '';
            
            displayList.forEach(data => {
                const date = data.timestamp ? new Date(data.timestamp.seconds * 1000).toLocaleDateString() : 'Recently';
                const initials = (data.userName || 'User').substring(0, 2).toUpperCase();
                let starsHtml = '';
                for(let i=1; i<=5; i++) starsHtml += `<i class="${i <= data.rating ? 'ri-star-fill' : 'ri-star-line'}" style="color:${i<=data.rating?'var(--star)':'#334155'}"></i>`;
                
                const html = `
                    <div class="review-card glass rounded-2xl p-6 border border-slate-800 bg-dark hover-lift">
                        <div class="review-header">
                            <div class="review-avatar">${initials}</div>
                            <div class="review-info"><h4>${data.userName || 'Anonymous'}</h4><div class="review-date">${date}</div></div>
                        </div>
                        <div class="review-stars">${starsHtml}</div>
                        <p class="review-text">"${data.comment}"</p>
                    </div>`;
                container.innerHTML += html;
            });
        }

        function toggleFullReviews() {
            const list = document.getElementById('reviews-list');
            const btn = event.target;
            if(!list) return;
            
            list.classList.toggle('expanded');
            renderReviewsList(list);
            
            if (list.classList.contains('expanded')) {
                if(btn) btn.innerText = "Show Less";
            } else {
                if(btn) btn.innerText = "View All Reviews";
            }
        }

        function handleReviewSubmit(e) {
            e.preventDefault();
            if(!auth || !auth.currentUser) return showNotification("Login Required", "You must be logged in to submit a review.", "warning");

            if(selectedRating === 0) return showNotification("Rating Missing", "Please select a star rating.", "warning");

            const comment = document.getElementById('review-comment') ? document.getElementById('review-comment').value : '';
            const user = auth.currentUser;
            let displayName = user.email.split('@')[0];
            
            db.collection("users").doc(user.uid).get().then(doc => {
                if(doc.exists && doc.data().name) displayName = doc.data().name;
                const reviewData = { 
                    userId: user.uid, userName: displayName, userEmail: user.email, rating: selectedRating, comment: comment, 
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(), status: 'approved' 
                };
                return db.collection("customer_reviews").add(reviewData);
            }).then(() => {
                showNotification("Success", "Review submitted successfully!", "success");
                if(document.getElementById('review-form')) document.getElementById('review-form').reset();
                selectedRating = 0;
                highlightStars(0);
                if(document.getElementById('reviews-list') && !document.getElementById('reviews-list').classList.contains('hidden')) {
                    toggleFullReviews(); 
                }
            }).catch(err => {
                console.error(err); 
                showNotification("Error", "Failed to submit review.", "error");
            });
        }

        // ==========================================
        // PORTFOLIO LOGIC
        // ==========================================
        function loadHomePortfolio() {
            if(!db) return;
            const container = document.getElementById('home-portfolio-grid');
            if(!container) return;
            
            container.innerHTML = '';
            
            // Dummy Item
            const dummyHtml = `
                <div class="portfolio-item group glass rounded-2xl overflow-hidden border border-slate-800 bg-dark hover-lift">
                    <div class="h-56 overflow-hidden bg-slate-800 relative"><img src="https://i.ibb.co/Y7yLkm5j/IMG-3157.png" alt="DDNetwork" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"></div>
                    <div class="p-6">
                        <h4 class="font-bold text-white mb-2">DDNetwork</h4>
                        <p class="text-slate-400 text-sm mb-4">A high-performance online store for a local Website & Hosting Services</p>
                        <button onclick="navigateTo('clients')" class="inline-flex items-center px-4 py-2 rounded-lg bg-slate-800 text-slate-200 font-medium text-sm hover:bg-slate-700 transition-colors">View Project</button>
                    </div>
                </div>`;
            container.innerHTML += dummyHtml;
            
            db.collection("clients_portfolio").where("status", "==", true).limit(2).get()
                .then((snapshot) => {
                    if(!snapshot.empty) {
                        snapshot.forEach((doc) => {
                            const data = doc.data();
                            const html = `
                                <div class="portfolio-item group glass rounded-2xl overflow-hidden border border-slate-800 bg-dark hover-lift">
                                    <div class="h-56 overflow-hidden bg-slate-800 relative"><img src="${data.img}" alt="${data.name}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"></div>
                                    <div class="p-6">
                                        <h4 class="font-bold text-white mb-2">${data.name}</h4>
                                        <p class="text-slate-400 text-sm mb-4">${data.desc || 'View project'}</p>
                                        <a href="${data.link}" target="_blank" class="text-emerald-400 font-medium text-sm hover:underline">View Live Site &rarr;</a>
                                    </div>
                                </div>`;
                            container.innerHTML += html;
                        });
                    }
                });
        }

        function loadPortfolio() {
            if(!db) return;
            const grid = document.getElementById('portfolio-grid');
            if(!grid) return;
            grid.innerHTML = '';
            
            db.collection("clients_portfolio").where("status", "==", true).get()
                .then((snapshot) => {
                    if(snapshot.empty) { grid.innerHTML = '<div class="col-span-3 text-center py-8 text-slate-500">No projects yet</div>'; return; }
                    
                    snapshot.forEach((doc) => {
                        const data = doc.data();
                        grid.innerHTML += `
                            <div class="group glass rounded-2xl overflow-hidden border border-slate-800 bg-dark hover-lift">
                                <div class="h-56 overflow-hidden"><img src="${data.img}" alt="${data.name}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"></div>
                                <div class="p-6">
                                    <h4 class="font-bold text-white mb-2 text-lg">${data.name}</h4>
                                    <p class="text-slate-400 text-sm mb-4">${data.desc || 'Professional website solution'}</p>
                                    <a href="${data.link}" target="_blank" class="inline-flex items-center px-4 py-2 rounded-lg bg-slate-800 text-slate-200 font-medium text-sm hover:bg-slate-700 transition-colors">View Project</a>
                                </div>
                            </div>
                        `;
                    });
                });
        }

        // ==========================================
        // PRODUCTS LOGIC
        // ==========================================
        function loadProducts() {
            if(!db) return;
            const grid = document.getElementById('products-grid');
            if(!grid) return;

            grid.innerHTML = '<div class="col-span-3 text-center py-12 text-slate-500">Loading products...</div>';

            db.collection("products").where("status", "==", true).get()
                .then((snapshot) => {
                    let products = [];
                    snapshot.forEach(doc => products.push(doc.data()));

                    const ddnetProduct = {
                        name: "DDNetwork",
                        price: "Free",
                        desc: "Official DDNetwork Platform. Connect, manage, and grow your digital network seamlessly.",
                        img: "https://i.ibb.co/Y7yLkm5j/IMG-3157.png", 
                        link: "https://ddnet.my"
                    };
                    
                    products.unshift(ddnetProduct);

                    grid.innerHTML = '';
                    if(products.length === 0) { grid.innerHTML = '<div class="col-span-3 text-center py-8 text-slate-500">No products available yet.</div>'; return; }

                    products.forEach((p) => {
                        const html = `
                            <div class="product-card hover-lift">
                                <img src="${p.img || 'https://via.placeholder.com/400'}" alt="${p.name}" class="product-image">
                                <div class="product-body">
                                    <h3 class="text-xl font-bold text-white">${p.name}</h3>
                                    <p class="text-sm text-slate-500 mb-2">by DDNex</p>
                                    <p class="text-slate-400 text-sm mb-4 line-clamp-3">${p.desc}</p>
                                    <div class="mt-auto">
                                        <div class="product-price">${p.price}</div>
                                        <a href="${p.link || '#'}" target="_blank" class="block w-full mt-4 text-center py-2 rounded-lg bg-emerald-600 text-white font-medium hover:bg-emerald-500 transition-colors">View Product</a>
                                    </div>
                                </div>
                            </div>
                        `;
                        grid.innerHTML += html;
                    });
                })
                .catch(err => {
                    console.error(err);
                    grid.innerHTML = '<div class="col-span-3 text-center py-8 text-red-500">Error loading products.</div>';
                });
        }

        // ==========================================
        // CONTACT FORM LOGIC
        // ==========================================
        function handleContactSubmit(e) {
            e.preventDefault();
            const name = document.getElementById('contact-name') ? document.getElementById('contact-name').value : '';
            const lastname = document.getElementById('contact-lastname') ? document.getElementById('contact-lastname').value : '';
            const email = document.getElementById('contact-email') ? document.getElementById('contact-email').value : '';
            const subject = document.getElementById('contact-subject') ? document.getElementById('contact-subject').value : '';
            const source = document.getElementById('contact-source') ? document.getElementById('contact-source').value : '';
            const message = document.getElementById('contact-message') ? document.getElementById('contact-message').value : '';
            
            if(!name || !lastname || !email || !message) return showNotification("Missing Fields", "Please fill in all required fields.", "error");

            const btn = e.target ? e.target.querySelector('button') : null;
            const originalText = btn ? btn.innerText : 'Send Message';
            if(btn) {
                btn.disabled = true;
                btn.innerHTML = '<i class="ri-loader-4-line ri-spin"></i> Sending...';
            }

            const data = {
                name: name + " " + lastname, email: email, subject: subject, source: source, message: message, type: 'Contact Inquiry', status: 'Pending',
                timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                userId: auth.currentUser ? auth.currentUser.uid : null, sourceForm: 'Contact Page'
            };

            if(db) {
                db.collection("customer_requests").add(data)
                    .then(() => {
                        showNotification("Sent!", "Thank you for your interest!", "success");
                        if(e.target) e.target.reset();
                    })
                    .catch((error) => {
                        console.error(error);
                        showNotification("Error", "Failed to send message. Please try again.", "error");
                    })
                    .finally(() => {
                        if(btn) {
                            btn.disabled = false;
                            btn.innerText = originalText;
                        }
                    });
            } else {
                showNotification("Offline", "System offline. Please try again later.", "error");
                if(btn) {
                    btn.disabled = false;
                    btn.innerText = originalText;
                }
            }
        }

        // ==========================================
        // MOBILE MENU LOGIC
        // ==========================================
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const icon = document.getElementById('mobile-menu-icon');
            const body = document.body;

            if(menu && icon) {
                const isActive = menu.classList.contains('active');
                
                if(isActive) {
                    menu.classList.remove('active');
                    icon.classList.remove('ri-close-line');
                    icon.classList.add('ri-menu-4-line');
                    body.style.overflow = ''; // Unlock scroll
                } else {
                    menu.classList.add('active');
                    icon.classList.remove('ri-menu-4-line');
                    icon.classList.add('ri-close-line');
                    body.style.overflow = 'hidden'; // Lock scroll
                }
            }
        }

        // ==========================================
        // MAP & GLOBE (INIT)
        // ==========================================
        document.addEventListener('DOMContentLoaded', () => {
            setupStarRating();
            loadHomePortfolio();
            if(window.location.pathname === '/reviews') renderDummyReview(); 
            listenToReviews();
            initMap(); 
        });

        window.addEventListener('scroll', () => {
            const nav = document.getElementById('navbar');
            if(nav) {
                if(window.scrollY > 50) nav.classList.add('shadow-lg');
                else nav.classList.remove('shadow-lg');
            }
        });

        // ==========================================
        // INIT MAP FUNCTION
        // ==========================================
        function initMap() {
            const mapContainer = document.getElementById('map');
            if (typeof L === 'undefined' || !mapContainer) {
                console.warn("Leaflet or Map container not found.");
                return;
            }

            // Initialize map centered on Malaysia
            const map = L.map('map').setView([4.2105, 101.9758], 6); 

            L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
                subdomains: 'abcd',
                maxZoom: 20
            }).addTo(map);

            const clients = [
                { name: "KL Tech Hub", location: [3.1390, 101.6869], desc: "E-commerce Platform", link: "#" },
                { name: "Penang Digital", location: [5.4141, 100.3288], desc: "Corporate Site", link: "#" },
                { name: "Johor SME", location: [1.4927, 103.7414], desc: "Landing Page", link: "#" },
                { name: "Singapore Partner", location: [1.3521, 103.8198], desc: "Regional Portal", link: "#" },
                { name: "Bali Resort", location: [-8.4095, 115.1889], desc: "Hotel Booking", link: "#" },
                { name: "Jakarta Startup", location: [-6.2088, 106.8456], desc: "Fintech App", link: "#" },
                { name: "Tokyo Client", location: [35.6762, 139.6503], desc: "Consultancy", link: "#" }
            ];

            const pinIcon = L.divIcon({
                className: 'custom-marker',
                html: '<div class="pulse-ring"></div><div class="marker-pin"></div>',
                iconSize: [36, 36],
                iconAnchor: [18, 36]
            });

            clients.forEach(client => {
                const marker = L.marker(client.location, { icon: pinIcon }).addTo(map);
                
                const popupContent = `
                    <div class="popup-content">
                        <div class="popup-title">${client.name}</div>
                        <div class="popup-stats">${client.desc}</div>
                        <a href="${client.link}" target="_blank" class="popup-link">Visit Site</a>
                    </div>
                `;
                
                marker.bindPopup(popupContent);
            });
        }
    </script>

    <!-- UPDATED CHAT WIDGET SCRIPT -->
    <script src="https://app.livechatai.com/embed.js" data-id="cmlas1njr0001jj04hi5ygd18" async defer></script>
</body>
</html>
