<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- CORE SEO META TAGS -->
    <title>DDNex | Cheap & Professional Website Services Malaysia</title>
    <meta name="description" content="DDNex offers professional web design, AI integration, and digital solutions in Malaysia. Trusted by local businesses. Fast delivery, mobile-first design.">
    <meta name="keywords" content="cheap website services Malaysia, Website Development, AI Integration, Custom Website, DDNex, DDNex Cloud, Digital Agency Malaysia">
    <meta name="author" content="Danial Danish">
    <meta name="robots" content="index, follow">
    
    <!-- FAVICON & APPLE TOUCH ICON -->
    <link rel="icon" type="image/png" href="https://i.ibb.co/Y7yLkm5j/IMG-3157.png">
    <link rel="apple-touch-icon" href="https://i.ibb.co/Y7yLkm5j/IMG-3157.png">
    
    <!-- OPEN GRAPH / FACEBOOK / WHATSAPP -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ddnex.my/">
    <meta property="og:title" content="DDNex | Cheap & Professional Website Services Malaysia">
    <meta property="og:description" content="Designed in Malaysia. Built for the world. Professional web design and AI solutions for modern businesses.">
    <meta property="og:image" content="https://i.ibb.co/Y7yLkm5j/IMG-3157.png">
    
    <!-- TWITTER -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://ddnex.my/">
    <meta name="twitter:title" content="DDNex | Cheap & Professional Website Services Malaysia">
    <meta name="twitter:description" content="Designed in Malaysia. Built for the world. Professional web design and AI solutions.">
    <meta name="twitter:image" content="https://i.ibb.co/Y7yLkm5j/IMG-3157.png">

    <!-- CANONICAL URL -->
    <link rel="canonical" href="https://ddnex.my/" />

    <!-- STRUCTURED DATA: ORGANIZATION -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "DDNex",
        "alternateName": "DDNex Cloud",
        "url": "https://ddnex.my",
        "logo": "https://i.ibb.co/Y7yLkm5j/IMG-3157.png",
        "sameAs": [
            "https://www.linkedin.com/in/muhammad-danial-danish-217bb82ba/",
            "https://www.instagram.com/danialddanish/"
        ],
        "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "+60-12-260-0969",
            "contactType": "sales",
            "areaServed": "MY",
            "availableLanguage": "Malay,English"
        }
    }
    </script>

    <!-- Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Icons: RemixIcon -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        primary: '#1e293b',
                        secondary: '#334155',
                        accent: '#6366f1',
                        surface: '#f8fafc',
                        muted: '#64748b',
                        star: '#fbbf24'
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'marquee': 'marquee 40s linear infinite',
                        'slide-up': 'slideUp 0.6s ease-out forwards',
                    },
                    keyframes: {
                        float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-20px)' } },
                        marquee: { '0%': { transform: 'translateX(0)' }, '100%': { transform: 'translateX(-50%)' } },
                        slideUp: { '0%': { opacity: 0, transform: 'translateY(20px)' }, '100%': { opacity: 1, transform: 'translateY(0)' } }
                    }
                }
            }
        }
    </script>

    <!-- Leaflet CSS (For Map) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>

    <!-- RAZORPAY CHECKOUT SCRIPT -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <!-- MAILCHIMP CONNECTION SCRIPT -->
    <script id="mcjs">!function(c,h,i,m,p){m=c.createElement(h),p=c.getElementsByTagName(h)[0],m.async=1,m.src=i,p.parentNode.insertBefore(m,p)}(document,"script","https://chimpstatic.com/mcjs-connected/js/users/384c79298eab3ae51990362dd/f88802037986932b3e513bf05.js");</script>

    <style>
        /* Base Reset & Scroll */
        * { scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; background: #ffffff; color: #0f172a; overflow-x: hidden; }
        
        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(226, 232, 240, 0.8);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }
        
        .glass-strong {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(226, 232, 240, 0.9);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
        }
        
        .text-gradient {
            background: linear-gradient(135deg, #1e293b 0%, #334155 50%, #6366f1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .bg-mesh {
            background-color: #f8fafc;
            background-image: 
                radial-gradient(at 0% 0%, rgba(99, 102, 241, 0.08) 0, transparent 50%), 
                radial-gradient(at 100% 0%, rgba(30, 41, 59, 0.05) 0, transparent 50%), 
                radial-gradient(at 100% 100%, rgba(99, 102, 241, 0.05) 0, transparent 50%),
                radial-gradient(at 0% 100%, rgba(30, 41, 59, 0.03) 0, transparent 50%);
        }
        
        /* Page Transition System */
        .page { 
            display: none; 
            opacity: 0; 
        }
        .page.active { 
            display: block; 
            opacity: 1; 
            animation: fadeInPage 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes fadeInPage {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .hover-lift { 
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s ease; 
        }
        .hover-lift:hover { 
            transform: translateY(-8px); 
            box-shadow: 0 20px 40px -15px rgba(30, 41, 59, 0.15); 
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .btn-primary:before {
            content: '';
            position: absolute; top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        .btn-primary:hover:before { left: 100%; }
        .btn-primary:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 10px 30px -10px rgba(30, 41, 59, 0.3); 
        }
        
        .input-field {
            background: rgba(248, 250, 252, 0.8);
            border: 1px solid rgba(203, 213, 225, 0.5);
            transition: all 0.3s ease;
        }
        .input-field:focus {
            border-color: #6366f1;
            background: #ffffff;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
            outline: none;
        }
        
        .input-field:read-only {
            background-color: #f1f5f9;
            color: #64748b;
            cursor: not-allowed;
            border-color: #e2e8f0;
        }

        .nav-link { position: relative; cursor: pointer; }
        .nav-link:after {
            content: '';
            position: absolute; bottom: -4px; left: 0;
            width: 0; height: 2px;
            background: linear-gradient(90deg, #1e293b, #6366f1);
            transition: width 0.3s ease;
        }
        .nav-link:hover:after, .nav-link.active:after { width: 100%; }
        
        .blob {
            position: absolute; filter: blur(80px); opacity: 0.15;
            animation: float 10s ease-in-out infinite;
            will-change: transform;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Toast notification */
        .toast-container {
            position: fixed; top: 100px; right: 20px;
            z-index: 9999;
            display: flex; flex-direction: column; gap: 10px;
        }
        .toast-item {
            background: white;
            border: 1px solid #e2e8f0;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: flex; align-items: center; gap: 12px;
            min-width: 300px; max-width: 400px;
            transform: translateX(120%); opacity: 0;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .toast-item.show { transform: translateX(0); opacity: 1; }
        .toast-success { border-left: 4px solid #10b981; }
        .toast-error { border-left: 4px solid #ef4444; }
        .toast-warning { border-left: 4px solid #f59e0b; }

        /* Processing overlay */
        #processing-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            z-index: 100002; display: none;
            flex-direction: column; justify-content: center; align-items: center;
        }
        
        /* Modal styles */
        .modal-overlay {
            position: fixed; inset: 0;
            background: rgba(15, 23, 42, 0.4);
            backdrop-filter: blur(5px);
            z-index: 100001;
            display: none; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.3s;
        }
        .modal-overlay.active { display: flex; opacity: 1; }
        .modal-content {
            background: white;
            border-radius: 24px;
            padding: 2.5rem;
            max-width: 450px;
            width: 90%;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            animation: scaleIn 0.4s ease;
        }

        /* Mobile menu */
        #mobile-menu { display: none; }
        #mobile-menu.active { display: block; }

        /* Password requirements */
        .password-requirements {
            margin-top: 0.5rem;
            font-size: 0.75rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }
        .req-item {
            color: #94a3b8;
            display: flex; align-items: center; gap: 6px;
            transition: all 0.3s ease;
        }
        .req-item.valid { color: #10b981; font-weight: 600; }

        /* Star rating */
        .star-icon { 
            font-size: 1.5rem; 
            color: #cbd5e1; 
            cursor: pointer; 
            transition: color 0.2s, transform 0.2s;
            pointer-events: auto;
        }
        .star-icon:hover {
            transform: scale(1.2);
        }
        .star-icon.hovered, .star-icon.selected { color: #fbbf24; }

        /* Package cards */
        .package-popular {
            border: 2px solid #6366f1;
            transform: scale(1.02);
            position: relative;
        }
        .package-popular::before {
            content: 'Most Popular';
            position: absolute; top: -12px; left: 50%; transform: translateX(-50%);
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            padding: 4px 16px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        /* Radio options */
        .radio-option {
            border: 1px solid #e2e8f0;
            padding: 1rem 1.2rem;
            border-radius: 12px;
            display: flex; align-items: center; gap: 12px;
            cursor: pointer; transition: all 0.2s;
            background: #f8fafc;
        }
        .radio-option:hover { border-color: #94a3b8; background: white; }
        .radio-option.selected {
            border-color: #6366f1;
            background: #eef2ff;
            box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.1);
        }

        /* FAQ accordion */
        .faq-item { border-bottom: 1px solid #e2e8f0; }
        .faq-question {
            padding: 1.5rem;
            font-weight: 600;
            cursor: pointer;
            display: flex; justify-content: space-between; align-items: center;
        }
        .faq-answer {
            max-height: 0; overflow: hidden;
            transition: max-height 0.4s ease, padding 0.4s;
            padding: 0 1.5rem;
        }
        .faq-item.active .faq-answer {
            max-height: 500px;
            padding: 0 1.5rem 1.5rem;
        }

        /* Status badges */
        .status-badge { padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 700; }
        .status-pending { background: #fef3c7; color: #d97706; }
        .status-paid { background: #dbeafe; color: #2563eb; }
        .status-completed { background: #d1fae5; color: #059669; }
        .status-cancelled { background: #fee2e2; color: #dc2626; }
        .status-open { background: #fef3c7; color: #d97706; }

        /* Globe Canvas (Decoration) */
        #globe-canvas {
            position: absolute;
            right: -100px;
            top: 50%;
            transform: translateY(-50%);
            width: 600px;
            height: 600px;
            opacity: 0.8;
            pointer-events: none;
        }
        
        /* Marquee */
        .marquee-container {
            overflow: hidden;
            white-space: nowrap;
        }
        .marquee-content {
            display: inline-flex;
            animation: marquee 40s linear infinite;
        }
        .marquee-content:hover {
            animation-play-state: paused;
        }
        
        /* Map Styles */
        #global-map-section .leaflet-popup-content-wrapper {
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
            background: #fff;
            border: 1px solid #e0e0e0;
        }
        #global-map-section .leaflet-popup-content {
            margin: 12px;
            font-family: 'Inter', sans-serif;
        }
        .custom-marker {
            background: none;
            border: none;
        }
        .pulse-ring {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(0, 184, 148, 0.25);
            animation: pulse-ring 2.5s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .marker-pin {
            width: 24px;
            height: 24px;
            border-radius: 50% 50% 50% 0;
            background: #00b894;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
        }
        .marker-pin::after {
            content: '';
            width: 12px;
            height: 12px;
            margin: 6px 0 0 6px;
            background: #fff;
            position: absolute;
            border-radius: 50%;
        }
        .popup-content {
            min-width: 220px;
        }
        .popup-title {
            font-weight: bold;
            font-size: 1.1em;
            color: #1e293b;
            margin-bottom: 0.5em;
        }
        .popup-stats {
            font-size: 0.9em;
            color: #64748b;
            margin-bottom: 0.8em;
            line-height: 1.4;
        }
        .popup-link {
            display: inline-block;
            background-color: #10b981;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            text-decoration: none;
            font-size: 0.9em;
            font-weight: 500;
            transition: background 0.3s;
        }
        .popup-link:hover {
            background-color: #059669;
        }
        @keyframes pulse-ring {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.8); opacity: 0.4; }
            100% { transform: translate(-50%, -50%) scale(2.5); opacity: 0; }
        }
        
        /* Review Cards */
        .review-card {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .review-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .review-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #e2e8f0, #cbd5e1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #475569;
            font-size: 0.875rem;
            text-transform: uppercase;
        }
        .review-info h4 {
            font-weight: 600;
            font-size: 0.95rem;
            color: #1e293b;
        }
        .review-date {
            font-size: 0.75rem;
            color: #94a3b8;
        }
        .review-stars {
            display: flex;
            gap: 2px;
            margin-bottom: 0.25rem;
        }
        .review-text {
            font-size: 0.9rem;
            color: #475569;
            line-height: 1.5;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .blob { display: none; }
            .package-popular { transform: scale(1); }
            #globe-canvas { display: none; }
        }
        
        @keyframes scaleIn {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body class="bg-white antialiased">

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Auth Modal -->
    <div id="auth-modal" class="modal-overlay">
        <div class="modal-content text-center">
            <i class="ri-user-unfollow-fill text-5xl text-slate-700 mb-4"></i>
            <h2 class="text-2xl font-bold text-slate-800 mb-2">Login Required</h2>
            <p class="text-slate-600 mb-6">You need an account to proceed with your purchase. Please sign in or create one.</p>
            <div class="space-y-3">
                <button onclick="navigateTo('login'); closeAuthModal()" class="w-full py-3 rounded-lg btn-primary text-white font-semibold">Sign In</button>
                <button onclick="navigateTo('signup'); closeAuthModal()" class="w-full py-3 rounded-lg border border-slate-300 text-slate-700 font-semibold hover:bg-slate-50">Create Account</button>
            </div>
            <button onclick="closeAuthModal()" class="mt-4 text-slate-500 hover:text-slate-700 text-sm">Cancel</button>
        </div>
    </div>

    <!-- Demo Modal -->
    <div id="demo-modal" class="modal-overlay">
        <div class="modal-content max-w-3xl">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-slate-800">Watch Our Process</h3>
                <button onclick="document.getElementById('demo-modal').classList.remove('active')" class="text-slate-400 hover:text-slate-600">
                    <i class="ri-close-line text-2xl"></i>
                </button>
            </div>
            <div class="aspect-video bg-slate-100 rounded-xl overflow-hidden border border-slate-200">
                 <iframe class="w-full h-full" src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="Demo Video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>
    
    <!-- Success Modal -->
    <div id="success-modal" class="modal-overlay">
        <div class="modal-content text-center">
            <div class="w-20 h-20 rounded-full bg-emerald-100 flex items-center justify-center mx-auto mb-4">
                <i class="ri-check-line text-4xl text-emerald-600"></i>
            </div>
            <h3 class="text-2xl font-bold text-slate-900 mb-2" id="success-title">Success!</h3>
            <p class="text-slate-600 mb-6" id="success-message">Operation completed successfully.</p>
            <button onclick="document.getElementById('success-modal').classList.remove('active')" class="w-full py-3 rounded-lg btn-primary text-white font-semibold">Okay</button>
        </div>
    </div>

    <!-- Processing Overlay -->
    <div id="processing-overlay">
        <div class="w-16 h-16 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin mb-6"></div>
        <div id="process-message" class="text-xl text-slate-800 font-medium">Processing...</div>
        <div class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg text-blue-700 text-sm max-w-md text-center">
            <i class="ri-refresh-line mr-2"></i>
            <strong>Note:</strong> Do not close this page. If stuck, check your email for confirmation.
        </div>
    </div>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 glass-strong border-b border-slate-200 transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <a href="#" onclick="event.preventDefault(); navigateTo('home')" class="flex items-center gap-3 group">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-slate-800 to-slate-600 flex items-center justify-center transform group-hover:rotate-12 transition-transform duration-300 shadow-lg">
                        <img src="https://i.ibb.co/5gtxDtKd/blacklogo-dd.png" alt="DDNex" class="w-6 h-6 object-contain invert">
                    </div>
                    <span class="text-2xl font-bold tracking-tight text-slate-800">DD<span class="text-gradient">Nex</span></span>
                </a>

                <div class="hidden md:flex items-center gap-8">
                    <a href="#" onclick="event.preventDefault(); navigateTo('home')" class="nav-link text-sm font-medium text-slate-600 hover:text-slate-900 transition-colors">Home</a>
                    <a href="#" onclick="event.preventDefault(); navigateTo('features')" class="nav-link text-sm font-medium text-slate-600 hover:text-slate-900 transition-colors">Services</a>
                    <a href="#" onclick="event.preventDefault(); navigateTo('pricing')" class="nav-link text-sm font-medium text-slate-600 hover:text-slate-900 transition-colors">Pricing</a>
                    <a href="#" onclick="event.preventDefault(); navigateTo('reviews')" class="nav-link text-sm font-medium text-slate-600 hover:text-slate-900 transition-colors">Reviews</a>
                    <a href="#" onclick="event.preventDefault(); navigateTo('portfolio')" class="nav-link text-sm font-medium text-slate-600 hover:text-slate-900 transition-colors">Portfolio</a>
                    <a href="#" onclick="event.preventDefault(); navigateTo('about')" class="nav-link text-sm font-medium text-slate-600 hover:text-slate-900 transition-colors">About</a>
                    <a href="#" onclick="event.preventDefault(); navigateTo('contact')" class="nav-link text-sm font-medium text-slate-600 hover:text-slate-900 transition-colors">Contact</a>
                </div>

                <div class="flex items-center gap-4" id="desktopAuthLinks"></div>
                
                <button class="md:hidden text-slate-600 p-2 ml-4" onclick="toggleMobileMenu()">
                    <i class="ri-menu-4-line text-2xl"></i>
                </button>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="md:hidden glass-strong border-t border-slate-200">
            <div class="px-4 py-6 space-y-4">
                <a href="#" onclick="event.preventDefault(); navigateTo('home'); toggleMobileMenu()" class="block text-slate-600 hover:text-slate-900 py-2 font-medium">Home</a>
                <a href="#" onclick="event.preventDefault(); navigateTo('features'); toggleMobileMenu()" class="block text-slate-600 hover:text-slate-900 py-2 font-medium">Services</a>
                <a href="#" onclick="event.preventDefault(); navigateTo('pricing'); toggleMobileMenu()" class="block text-slate-600 hover:text-slate-900 py-2 font-medium">Pricing</a>
                <a href="#" onclick="event.preventDefault(); navigateTo('reviews'); toggleMobileMenu()" class="block text-slate-600 hover:text-slate-900 py-2 font-medium">Reviews</a>
                <a href="#" onclick="event.preventDefault(); navigateTo('portfolio'); toggleMobileMenu()" class="block text-slate-600 hover:text-slate-900 py-2 font-medium">Portfolio</a>
                <a href="#" onclick="event.preventDefault(); navigateTo('about'); toggleMobileMenu()" class="block text-slate-600 hover:text-slate-900 py-2 font-medium">About</a>
                <a href="#" onclick="event.preventDefault(); navigateTo('contact'); toggleMobileMenu()" class="block text-slate-600 hover:text-slate-900 py-2 font-medium">Contact</a>
                <div id="mobileAuthLinksContainer" class="pt-4 border-t border-slate-200 flex flex-col gap-3"></div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-20 min-h-screen">

        <!-- HOME PAGE -->
        <section id="page-home" class="page active">
            <!-- Hero -->
            <div class="relative min-h-[90vh] flex items-center bg-mesh overflow-hidden">
                <div class="blob bg-indigo-400 w-96 h-96 rounded-full top-0 left-0 -translate-x-1/2 -translate-y-1/2"></div>
                <div class="blob bg-slate-400 w-96 h-96 rounded-full bottom-0 right:0 translate-x-1/2 translate-y-1/2" style="animation-delay: -5s;"></div>
                <canvas id="globe-canvas"></canvas>
                
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 w-full">
                    <div class="grid lg:grid-cols-2 gap-12 items-center">
                        <div class="animate-slide-up">
                            <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full glass mb-6 border border-indigo-200">
                                <span class="flex h-2 w-2 rounded-full bg-green-500 animate-pulse"></span>
                                <span class="text-sm font-medium text-slate-600">Malaysia's #1 Web Solutions</span>
                            </div>
                            <h1 class="text-5xl md:text-7xl font-bold leading-[1.1] mb-6">
                                <span class="block text-slate-900 mb-2">Custom Websites for</span>
                                <span class="text-gradient">Malaysian Businesses</span>
                            </h1>
                            <p class="text-xl text-slate-600 mb-8 max-w-lg leading-relaxed">
                                Designed in Malaysia. Built for the world. Professional web design and AI solutions for modern businesses by DDNex.
                            </p>
                            <div class="flex flex-wrap gap-4 mb-12">
                                <button onclick="navigateTo('pricing')" class="px-8 py-4 rounded-full btn-primary text-white font-bold text-lg flex items-center gap-2 shadow-xl">
                                    View Pricing
                                    <i class="ri-arrow-right-line"></i>
                                </button>
                                <button onclick="document.getElementById('demo-modal').classList.add('active')" class="px-8 py-4 rounded-full glass text-slate-700 font-semibold text-lg hover:bg-white transition-all flex items-center gap-2">
                                    <i class="ri-play-circle-line"></i>
                                    Watch Demo
                                </button>
                            </div>
                            
                            <!-- Stats -->
                            <div class="grid grid-cols-3 gap-6 max-w-md">
                                <div>
                                    <div class="text-3xl font-bold text-slate-900">99.9%</div>
                                    <div class="text-sm text-slate-500">Uptime SLA</div>
                                </div>
                                <div>
                                    <div class="text-3xl font-bold text-slate-900">10+</div>
                                    <div class="text-sm text-slate-500">Happy Clients</div>
                                </div>
                                <div>
                                    <div class="text-3xl font-bold text-slate-900">24/7</div>
                                    <div class="text-sm text-slate-500">Support</div>
                                </div>
                            </div>
                        </div>

                        <!-- Dashboard Preview -->
                        <div class="relative animate-scale-in hidden lg:block">
                            <div class="absolute -inset-4 bg-gradient-to-r from-indigo-200/50 to-slate-200/50 rounded-3xl blur-2xl"></div>
                            <div class="relative glass rounded-2xl p-2 shadow-2xl">
                                <div class="bg-white rounded-xl overflow-hidden border border-slate-200">
                                    <div class="flex items-center gap-2 px-4 py-3 bg-slate-50 border-b border-slate-200">
                                        <div class="flex gap-1.5">
                                            <div class="w-3 h-3 rounded-full bg-red-400"></div>
                                            <div class="w-3 h-3 rounded-full bg-amber-400"></div>
                                            <div class="w-3 h-3 rounded-full bg-green-400"></div>
                                        </div>
                                        <div class="flex-1 text-center text-xs text-slate-400 font-mono">DDNex Dashboard</div>
                                    </div>
                                    <div class="p-6 space-y-4">
                                        <div class="flex items-center justify-between mb-6">
                                            <div class="flex items-center gap-3">
                                                <div class="w-10 h-10 rounded-lg bg-indigo-100 flex items-center justify-center">
                                                    <i class="ri-server-line text-indigo-600 text-xl"></i>
                                                </div>
                                                <div>
                                                    <div class="text-sm font-semibold text-slate-800">Active Projects</div>
                                                    <div class="text-xs text-green-600 flex items-center gap-1">
                                                        <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span>
                                                        5 Live Sites
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="grid grid-cols-3 gap-3">
                                            <div class="glass rounded-lg p-3 text-center">
                                                <div class="text-xs text-slate-500 mb-1">HTML Sites</div>
                                                <div class="text-lg font-bold text-indigo-600">3</div>
                                            </div>
                                            <div class="glass rounded-lg p-3 text-center">
                                                <div class="text-xs text-slate-500 mb-1">Interactive</div>
                                                <div class="text-lg font-bold text-violet-600">1</div>
                                            </div>
                                            <div class="glass rounded-lg p-3 text-center">
                                                <div class="text-xs text-slate-500 mb-1">AI Powered</div>
                                                <div class="text-lg font-bold text-pink-600">1</div>
                                            </div>
                                        </div>

                                        <div class="glass rounded-lg p-4">
                                            <div class="flex justify-between text-xs text-slate-500 mb-3">
                                                <span>Project Delivery Status</span>
                                                <span class="text-green-600">↑ 85% On Time</span>
                                            </div>
                                            <div class="flex items-end gap-1 h-16">
                                                <div class="flex-1 bg-indigo-200 rounded-t hover:bg-indigo-300 transition-colors" style="height: 60%"></div>
                                                <div class="flex-1 bg-indigo-200 rounded-t hover:bg-indigo-300 transition-colors" style="height: 80%"></div>
                                                <div class="flex-1 bg-indigo-200 rounded-t hover:bg-indigo-300 transition-colors" style="height: 45%"></div>
                                                <div class="flex-1 bg-indigo-300 rounded-t hover:bg-indigo-400 transition-colors" style="height: 90%"></div>
                                                <div class="flex-1 bg-indigo-200 rounded-t hover:bg-indigo-300 transition-colors" style="height: 70%"></div>
                                                <div class="flex-1 bg-indigo-400 rounded-t hover:bg-indigo-500 transition-colors" style="height: 100%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Trust Strip (Marquee) -->
            <div class="py-12 border-y border-slate-200 bg-slate-50/50 overflow-hidden">
                <div class="marquee-container">
                    <div class="marquee-content">
                        <div class="flex gap-16 px-8">
                            <div class="flex items-center gap-2 text-slate-700 font-semibold whitespace-nowrap"><i class="ri-check-double-line text-green-500 text-xl"></i>Trusted by 10+ Clients</div>
                            <div class="flex items-center gap-2 text-slate-700 font-semibold whitespace-nowrap"><i class="ri-global-line text-indigo-500 text-xl"></i>Global Standard Hosting</div>
                            <div class="flex items-center gap-2 text-slate-700 font-semibold whitespace-nowrap"><i class="ri-rocket-line text-violet-500 text-xl"></i>Fast Delivery Guaranteed</div>
                            <div class="flex items-center gap-2 text-slate-700 font-semibold whitespace-nowrap"><i class="ri-shield-check-line text-emerald-500 text-xl"></i>Secure Payment Gateway</div>
                            <div class="flex items-center gap-2 text-slate-700 font-semibold whitespace-nowrap"><i class="ri-customer-service-2-line text-blue-500 text-xl"></i>24/7 Technical Support</div>
                            <div class="flex items-center gap-2 text-slate-700 font-semibold whitespace-nowrap"><i class="ri-star-s-fill text-amber-500 text-xl"></i>5-Star Rated Services</div>
                        </div>
                         <div class="flex gap-16 px-8">
                            <div class="flex items-center gap-2 text-slate-700 font-semibold whitespace-nowrap"><i class="ri-check-double-line text-green-500 text-xl"></i>Trusted by 10+ Clients</div>
                            <div class="flex items-center gap-2 text-slate-700 font-semibold whitespace-nowrap"><i class="ri-global-line text-indigo-500 text-xl"></i>Global Standard Hosting</div>
                            <div class="flex items-center gap-2 text-slate-700 font-semibold whitespace-nowrap"><i class="ri-rocket-line text-violet-500 text-xl"></i>Fast Delivery Guaranteed</div>
                            <div class="flex items-center gap-2 text-slate-700 font-semibold whitespace-nowrap"><i class="ri-shield-check-line text-emerald-500 text-xl"></i>Secure Payment Gateway</div>
                            <div class="flex items-center gap-2 text-slate-700 font-semibold whitespace-nowrap"><i class="ri-customer-service-2-line text-blue-500 text-xl"></i>24/7 Technical Support</div>
                            <div class="flex items-center gap-2 text-slate-700 font-semibold whitespace-nowrap"><i class="ri-star-s-fill text-amber-500 text-xl"></i>5-Star Rated Services</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Services Grid -->
            <div class="py-24 bg-white relative">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-16 animate-fade-in">
                        <h2 class="text-3xl md:text-5xl font-bold mb-4 text-slate-900">Our <span class="text-gradient">Solutions</span></h2>
                        <p class="text-slate-600 text-lg max-w-2xl mx-auto">Designed in Malaysia. Built for the world. Choose the perfect package for your business needs.</p>
                    </div>

                    <div class="grid md:grid-cols-3 gap-8">
                        <!-- Static Website -->
                        <div class="group glass rounded-2xl p-8 hover-lift cursor-pointer border border-slate-200" onclick="selectPackage('Basic HTML Website', 'html')">
                            <div class="w-14 h-14 rounded-2xl bg-indigo-100 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                                <i class="ri-file-list-3-line text-2xl text-indigo-600"></i>
                            </div>
                            <h3 class="text-xl font-bold text-slate-900 mb-3">Static Website</h3>
                            <p class="text-slate-600 leading-relaxed mb-4">Perfect for portfolios and small businesses. Fast loading and cost-effective with clean HTML/CSS.</p>
                            <ul class="space-y-2 text-sm text-slate-500 mb-6">
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>1 Landing Page</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Mobile Responsive</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Basic SEO</li>
                            </ul>
                            <div class="flex items-center text-indigo-600 font-semibold text-sm">
                                Learn more <i class="ri-arrow-right-line ml-2"></i>
                            </div>
                        </div>

                        <!-- Interactive Website -->
                        <div class="group glass rounded-2xl p-8 hover-lift cursor-pointer border border-slate-200" onclick="selectPackage('Front-End Website', 'frontend')">
                            <div class="w-14 h-14 rounded-2xl bg-violet-100 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                                <i class="ri-layout-masonry-line text-2xl text-violet-600"></i>
                            </div>
                            <h3 class="text-xl font-bold text-slate-900 mb-3">Interactive Website</h3>
                            <p class="text-slate-600 leading-relaxed mb-4">Dynamic, engaging websites with animations and user interactions. Up to 5 pages included.</p>
                            <ul class="space-y-2 text-sm text-slate-500 mb-6">
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Up to 5 Pages</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Animations & UI</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>WhatsApp Integration</li>
                            </ul>
                            <div class="flex items-center text-violet-600 font-semibold text-sm">
                                Learn more <i class="ri-arrow-right-line ml-2"></i>
                            </div>
                        </div>

                        <!-- AI Powered -->
                        <div class="group glass rounded-2xl p-8 hover-lift cursor-pointer border border-slate-200" onclick="selectPackage('AI Powered Website', 'ai')">
                            <div class="w-14 h-14 rounded-2xl bg-pink-100 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                                <i class="ri-brain-line text-2xl text-pink-600"></i>
                            </div>
                            <h3 class="text-xl font-bold text-slate-900 mb-3">AI-Powered Solutions</h3>
                            <p class="text-slate-600 leading-relaxed mb-4">Integrate ChatGPT chatbots and automation to save time and costs. Future-proof your business.</p>
                            <ul class="space-y-2 text-sm text-slate-500 mb-6">
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>AI Chatbot</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Auto-Response</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Smart Analytics</li>
                            </ul>
                            <div class="flex items-center text-pink-600 font-semibold text-sm">
                                Learn more <i class="ri-arrow-right-line ml-2"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Portfolio Preview -->
            <div class="py-24 bg-slate-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-16">
                        <h2 class="text-3xl md:text-5xl font-bold mb-4 text-slate-900">Recent <span class="text-gradient">Work</span></h2>
                        <p class="text-slate-600 text-lg">Check out some of our latest completed projects.</p>
                    </div>
                    <div id="home-portfolio-grid" class="grid md:grid-cols-3 gap-8">
                        <!-- Dummy Item -->
                        <div class="group glass rounded-2xl overflow-hidden border border-slate-200 bg-white hover-lift">
                            <div class="h-56 overflow-hidden bg-slate-200 relative">
                                <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" alt="E-Commerce Project" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                            </div>
                            <div class="p-6">
                                <h4 class="font-bold text-slate-900 mb-2 text-lg">E-Commerce Launch</h4>
                                <p class="text-slate-600 text-sm mb-4">A high-performance online store for a local fashion brand.</p>
                                <a href="#" class="inline-flex items-center px-4 py-2 rounded-lg bg-slate-100 text-slate-700 font-medium text-sm hover:bg-slate-200 transition-colors">View Project</a>
                            </div>
                        </div>
                        <!-- Dynamic items will be appended here -->
                    </div>
                    <div class="text-center mt-12">
                        <button onclick="navigateTo('portfolio')" class="px-8 py-4 rounded-full btn-primary text-white font-bold">View All Projects</button>
                    </div>
                </div>
            </div>

            <!-- GLOBAL CLIENT MAP SECTION -->
            <section id="global-map-section" class="py-24 bg-white relative overflow-hidden">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                    <h2 class="text-4xl md:text-5xl font-bold mb-4 text-slate-900">Global Client <span class="text-gradient">Reach</span></h2>
                    <p class="text-xl text-slate-600 max-w-3xl mx-auto mb-12">
                        Interactive map of live websites – zoom, pan & click pins for details & direct visits.
                    </p>

                    <div id="map" class="w-full h-[500px] rounded-2xl shadow-lg border border-slate-200 mb-16 z-10 relative bg-slate-100"></div>

                    <div class="grid grid-cols-2 md:grid-cols-4 gap-8 max-w-5xl mx-auto">
                        <div class="text-center">
                            <div class="text-5xl font-bold text-slate-900 mb-2">142</div>
                            <div class="text-lg text-slate-600 font-medium">Websites Live</div>
                        </div>
                        <div class="text-center">
                            <div class="text-5xl font-bold text-slate-900 mb-2">11</div>
                            <div class="text-lg text-slate-600 font-medium">Active Regions</div>
                        </div>
                        <div class="text-center">
                            <div class="text-5xl font-bold text-slate-900 mb-2">17</div>
                            <div class="text-lg text-slate-600 font-medium">Countries Served</div>
                        </div>
                        <div class="text-center">
                            <div class="text-5xl font-bold text-slate-900 mb-2">6+</div>
                            <div class="text-lg text-slate-600 font-medium">Years of Excellence</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Why Choose Us -->
            <div class="py-24 bg-slate-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-16">
                        <h2 class="text-3xl md:text-5xl font-bold mb-4 text-slate-900">Why Choose <span class="text-gradient">Us?</span></h2>
                        <p class="text-slate-600 text-lg max-w-2xl mx-auto">We combine technical expertise with a deep understanding of the local market.</p>
                    </div>

                    <div class="grid md:grid-cols-4 gap-8">
                        <div class="text-center p-6">
                            <div class="w-16 h-16 rounded-2xl bg-indigo-100 flex items-center justify-center mx-auto mb-4">
                                <i class="ri-rocket-2-line text-3xl text-indigo-600"></i>
                            </div>
                            <h4 class="text-lg font-bold text-slate-900 mb-2">Fast Delivery</h4>
                            <p class="text-sm text-slate-600">3-5 days for static sites, 2-4 weeks for complex projects.</p>
                        </div>
                        <div class="text-center p-6">
                            <div class="w-16 h-16 rounded-2xl bg-violet-100 flex items-center justify-center mx-auto mb-4">
                                <i class="ri-smartphone-line text-3xl text-violet-600"></i>
                            </div>
                            <h4 class="text-lg font-bold text-slate-900 mb-2">Mobile-First</h4>
                            <p class="text-sm text-slate-600">Perfectly responsive on all devices from day one.</p>
                        </div>
                        <div class="text-center p-6">
                            <div class="w-16 h-16 rounded-2xl bg-emerald-100 flex items-center justify-center mx-auto mb-4">
                                <i class="ri-bar-chart-box-line text-3xl text-emerald-600"></i>
                            </div>
                            <h4 class="text-lg font-bold text-slate-900 mb-2">SEO & Analytics</h4>
                            <p class="text-sm text-slate-600">Built-in tools to help you rank higher on Google.</p>
                        </div>
                        <div class="text-center p-6">
                            <div class="w-16 h-16 rounded-2xl bg-pink-100 flex items-center justify-center mx-auto mb-4">
                                <i class="ri-robot-2-line text-3xl text-pink-600"></i>
                            </div>
                            <h4 class="text-lg font-bold text-slate-900 mb-2">AI Integration</h4>
                            <p class="text-sm text-slate-600">Future-proof your business with cutting-edge AI.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Newsletter -->
            <div class="py-24 bg-slate-50">
                <div class="max-w-4xl mx-auto px-4 text-center">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4 text-slate-900">Stay Updated</h2>
                    <p class="text-slate-600 mb-8">Subscribe to our newsletter for the latest news, tips, and exclusive offers.</p>
                    
                    <form action="https://ddnet.us6.list-manage.com/subscribe/post?u=384c79298eab3ae51990362dd&amp;id=5ddbfad2fc&amp;f_id=00820ae3f0" method="post" target="_blank" class="max-w-md mx-auto">
                        <div class="flex gap-3">
                            <input type="email" name="EMAIL" required placeholder="your@email.com" class="flex-1 input-field px-4 py-3 rounded-lg text-slate-800">
                            <button type="submit" class="px-6 py-3 rounded-lg btn-primary text-white font-semibold">Subscribe</button>
                        </div>
                        <p class="text-xs text-slate-500 mt-3">Join 500+ Malaysian business owners. No spam, unsubscribe anytime.</p>
                    </form>
                </div>
            </div>

            <!-- CTA -->
            <div class="py-24 bg-mesh relative overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-r from-indigo-100/50 to-slate-100/50"></div>
                <div class="max-w-4xl mx-auto px-4 text-center relative z-10">
                    <h2 class="text-4xl md:text-6xl font-bold mb-6 text-slate-900">Ready to build your website?</h2>
                    <p class="text-xl text-slate-600 mb-10">Get started today with our affordable packages. No hidden fees, cancel anytime.</p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button onclick="navigateTo('pricing')" class="px-8 py-4 rounded-full btn-primary text-white font-bold text-lg shadow-xl">
                            View Pricing
                        </button>
                        <button onclick="navigateTo('contact')" class="px-8 py-4 rounded-full glass text-slate-700 font-semibold text-lg hover:bg-white transition-all">
                            Talk to Sales
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- FEATURES/SERVICES PAGE -->
        <section id="page-features" class="page">
            <div class="bg-mesh py-24 min-h-screen">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-16">
                        <h1 class="text-5xl md:text-6xl font-bold mb-6 text-slate-900">Our <span class="text-gradient">Services</span></h1>
                        <p class="text-xl text-slate-600 max-w-3xl mx-auto">Everything you need to establish a strong digital presence. From simple landing pages to complex AI-integrated systems.</p>
                    </div>

                    <!-- Service Details -->
                    <div class="grid md:grid-cols-2 gap-8 mb-16">
                        <div class="glass rounded-2xl p-8 border border-slate-200 hover:border-indigo-300 transition-all">
                            <div class="flex items-start gap-4 mb-4">
                                <div class="w-12 h-12 rounded-xl bg-indigo-100 flex items-center justify-center flex-shrink-0">
                                    <i class="ri-file-list-3-line text-2xl text-indigo-600"></i>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-slate-900 mb-2">Basic HTML Website</h3>
                                    <p class="text-slate-600">1 Static Landing Page perfect for small businesses and portfolios.</p>
                                </div>
                            </div>
                            <ul class="space-y-2 text-sm text-slate-600 ml-16">
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Mobile Responsive Design</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Basic SEO Tags</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Contact Form Integration</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Free ddnet.my subdomain (1st year)</li>
                            </ul>
                        </div>

                        <div class="glass rounded-2xl p-8 border border-slate-200 hover:border-violet-300 transition-all">
                            <div class="flex items-start gap-4 mb-4">
                                <div class="w-12 h-12 rounded-xl bg-violet-100 flex items-center justify-center flex-shrink-0">
                                    <i class="ri-layout-masonry-line text-2xl text-violet-600"></i>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-slate-900 mb-2">Front-End Website</h3>
                                    <p class="text-slate-600">Up to 5 Pages with animations and interactive UI elements.</p>
                                </div>
                            </div>
                            <ul class="space-y-2 text-sm text-slate-600 ml-16">
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Animations & Interactive UI</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Contact Forms & WhatsApp</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Basic SEO Setup</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Load Balancer Included (Pro)</li>
                            </ul>
                        </div>

                        <div class="glass rounded-2xl p-8 border border-slate-200 hover:border-pink-300 transition-all">
                            <div class="flex items-start gap-4 mb-4">
                                <div class="w-12 h-12 rounded-xl bg-pink-100 flex items-center justify-center flex-shrink-0">
                                    <i class="ri-brain-line text-2xl text-pink-600"></i>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-slate-900 mb-2">AI Powered Website</h3>
                                    <p class="text-slate-600">Advanced automation & chatbots for modern businesses.</p>
                                </div>
                            </div>
                            <ul class="space-y-2 text-sm text-slate-600 ml-16">
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>AI Chatbot Integration</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Lead Auto-Response</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Smart Analytics Dashboard</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>All Front-End features included</li>
                            </ul>
                        </div>

                        <div class="glass rounded-2xl p-8 border border-slate-200 hover:border-indigo-300 transition-all">
                            <div class="flex items-start gap-4 mb-4">
                                <div class="w-12 h-12 rounded-xl bg-indigo-100 flex items-center justify-center flex-shrink-0">
                                    <i class="ri-database-2-line text-2xl text-indigo-600"></i>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-slate-900 mb-2">Front-End + Portal</h3>
                                    <p class="text-slate-600">Full website & internal management system combined.</p>
                                </div>
                            </div>
                            <ul class="space-y-2 text-sm text-slate-600 ml-16">
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Multi-User Internal Portal</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Database Management</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Advanced Analytics</li>
                                <li class="flex items-center gap-2"><i class="ri-check-line text-green-500"></i>Custom Dashboards</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Process -->
                    <div class="glass rounded-2xl p-12 border border-slate-200 bg-white">
                        <h2 class="text-3xl font-bold text-center mb-12 text-slate-900">Our Process</h2>
                        <div class="grid md:grid-cols-4 gap-8">
                            <div class="text-center">
                                <div class="w-16 h-16 rounded-full bg-indigo-100 flex items-center justify-center mx-auto mb-4 text-2xl font-bold text-indigo-600">1</div>
                                <h4 class="font-bold text-slate-900 mb-2">Discovery</h4>
                                <p class="text-sm text-slate-600">We understand your business goals and requirements.</p>
                            </div>
                            <div class="text-center">
                                <div class="w-16 h-16 rounded-full bg-violet-100 flex items-center justify-center mx-auto mb-4 text-2xl font-bold text-violet-600">2</div>
                                <h4 class="font-bold text-slate-900 mb-2">Design</h4>
                                <p class="text-sm text-slate-600">Create mockups and get your approval before building.</p>
                            </div>
                            <div class="text-center">
                                <div class="w-16 h-16 rounded-full bg-pink-100 flex items-center justify-center mx-auto mb-4 text-2xl font-bold text-pink-600">3</div>
                                <h4 class="font-bold text-slate-900 mb-2">Development</h4>
                                <p class="text-sm text-slate-600">Build your site with clean, optimized code.</p>
                            </div>
                            <div class="text-center">
                                <div class="w-16 h-16 rounded-full bg-emerald-100 flex items-center justify-center mx-auto mb-4 text-2xl font-bold text-emerald-600">4</div>
                                <h4 class="font-bold text-slate-900 mb-2">Launch</h4>
                                <p class="text-sm text-slate-600">Deploy to production with training and support.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PRICING PAGE -->
        <section id="page-pricing" class="page">
            <div class="bg-mesh py-24 min-h-screen">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-12">
                        <h1 class="text-5xl md:text-6xl font-bold mb-6 text-slate-900">Simple, Transparent <span class="text-gradient">Pricing</span></h1>
                        <p class="text-xl text-slate-600 max-w-2xl mx-auto mb-8">Choose the perfect package for your business. All prices in Malaysian Ringgit (RM).</p>
                        
                        <!-- Billing Toggle -->
                        <div class="inline-flex items-center gap-4 p-1 rounded-full glass border border-slate-200">
                            <button onclick="setBilling('monthly')" id="btn-monthly" class="px-6 py-2 rounded-full text-sm font-medium transition-all bg-slate-800 text-white">Monthly</button>
                            <button onclick="setBilling('onetime')" id="btn-onetime" class="px-6 py-2 rounded-full text-sm font-medium transition-all text-slate-600 hover:text-slate-900">
                                One-Time <span class="text-amber-600 text-xs ml-1">No maintenance</span>
                            </button>
                        </div>
                    </div>

                    <!-- Pricing Cards -->
                    <div class="grid md:grid-cols-3 gap-8 max-w-6xl mx-auto mb-16">
                        <!-- Basic HTML -->
                        <div class="glass rounded-2xl p-8 border border-slate-200 hover:border-indigo-300 transition-all hover:-translate-y-2">
                            <div class="mb-6">
                                <h3 class="text-xl font-semibold text-slate-700 mb-2">Basic HTML</h3>
                                <div class="flex items-baseline gap-1">
                                    <span class="text-5xl font-bold text-slate-900 price-display" data-monthly="39" data-onetime="249" data-setup="100">RM 39</span>
                                    <span class="text-slate-500 price-period">/month</span>
                                </div>
                                <p class="text-sm text-slate-500 mt-2">Setup: <span class="setup-fee">RM 100</span></p>
                            </div>
                            <ul class="space-y-3 mb-8 text-sm">
                                <li class="flex items-center gap-3 text-slate-700"><i class="ri-check-line text-indigo-500"></i>1 Static Landing Page</li>
                                <li class="flex items-center gap-3 text-slate-700"><i class="ri-check-line text-indigo-500"></i>Mobile Responsive</li>
                                <li class="flex items-center gap-3 text-slate-700"><i class="ri-check-line text-indigo-500"></i>Basic SEO Tags</li>
                                <li class="flex items-center gap-3 text-slate-700"><i class="ri-check-line text-indigo-500"></i>Contact Form</li>
                                <li class="flex items-center gap-3 text-slate-700"><i class="ri-check-line text-indigo-500"></i>Free subdomain (1st year)</li>
                                <li id="html-maint-yes" class="flex items-center gap-3 text-slate-700 maintenance-yes"><i class="ri-check-line text-indigo-500"></i>Maintenance included</li>
                                <li id="html-maint-no" class="flex items-center gap-3 text-red-600 maintenance-no hidden"><i class="ri-close-line"></i>No maintenance</li>
                            </ul>
                            <button onclick="attemptSelectPackage('Basic HTML Website', 'html')" class="w-full py-3 rounded-lg border border-slate-300 text-slate-700 font-semibold hover:bg-slate-50 transition-all">Get Started</button>
                        </div>

                        <!-- Front-End (Popular) -->
                        <div class="package-popular glass rounded-2xl p-8 border-2 border-indigo-500 shadow-xl shadow-indigo-100">
                            <div class="mb-6">
                                <h3 class="text-xl font-semibold text-slate-700 mb-2">Front-End</h3>
                                <div class="flex items-baseline gap-1">
                                    <span class="text-5xl font-bold text-slate-900 price-display" data-monthly="99" data-onetime="1399" data-setup="200">RM 99</span>
                                    <span class="text-slate-500 price-period">/month</span>
                                </div>
                                <p class="text-sm text-slate-500 mt-2">Setup: <span class="setup-fee">RM 200</span></p>
                            </div>
                            <ul class="space-y-3 mb-8 text-sm">
                                <li class="flex items-center gap-3 text-slate-700"><i class="ri-check-line text-indigo-500"></i>Up to 5 Pages</li>
                                <li class="flex items-center gap-3 text-slate-700"><i class="ri-check-line text-indigo-500"></i>Animations & Interactive UI</li>
                                <li class="flex items-center gap-3 text-slate-700"><i class="ri-check-line text-indigo-500"></i>WhatsApp Integration</li>
                                <li class="flex items-center gap-3 text-slate-700"><i class="ri-check-line text-indigo-500"></i>Basic SEO Setup</li>
                                <li class="flex items-center gap-3 text-slate-700"><i class="ri-check-line text-indigo-500"></i>Load Balancer Included</li>
                                <li id="frontend-maint-yes" class="flex items-center gap-3 text-slate-700 maintenance-yes"><i class="ri-check-line text-indigo-500"></i>Maintenance & updates</li>
                                <li id="frontend-maint-no" class="flex items-center gap-3 text-red-600 maintenance-no hidden"><i class="ri-close-line"></i>No maintenance</li>
                            </ul>
                            <button onclick="attemptSelectPackage('Front-End Website', 'frontend')" class="w-full py-3 rounded-lg btn-primary text-white font-semibold shadow-lg">Get Started</button>
                        </div>

                        <!-- AI Powered -->
                        <div class="glass rounded-2xl p-8 border border-slate-200 hover:border-pink-300 transition-all hover:-translate-y-2">
                            <div class="mb-6">
                                <h3 class="text-xl font-semibold text-slate-700 mb-2">AI Powered</h3>
                                <div class="flex items-baseline gap-1">
                                    <span class="text-5xl font-bold text-slate-900 price-display" data-monthly="149" data-onetime="2499" data-setup="400">RM 149</span>
                                    <span class="text-slate-500 price-period">/month</span>
                                </div>
                                <p class="text-sm text-slate-500 mt-2">Setup: <span class="setup-fee">RM 400</span></p>
                            </div>
                            <ul class="space-y-3 mb-8 text-sm">
                                <li class="flex items-center gap-3 text-slate-700"><i class="ri-check-line text-indigo-500"></i>All Front-End features</li>
                                <li class="flex items-center gap-3 text-slate-700"><i class="ri-check-line text-indigo-500"></i>AI Chatbot Integration</li>
                                <li class="flex items-center gap-3 text-slate-700"><i class="ri-check-line text-indigo-500"></i>Lead Auto-Response</li>
                                <li class="flex items-center gap-3 text-slate-700"><i class="ri-check-line text-indigo-500"></i>Smart Analytics</li>
                                <li class="flex items-center gap-3 text-slate-700"><i class="ri-check-line text-indigo-500"></i>AI Tuning & Support</li>
                                <li id="ai-maint-yes" class="flex items-center gap-3 text-slate-700 maintenance-yes"><i class="ri-check-line text-indigo-500"></i>AI maintenance included</li>
                                <li id="ai-maint-no" class="flex items-center gap-3 text-red-600 maintenance-no hidden"><i class="ri-close-line"></i>No AI tuning</li>
                            </ul>
                            <button onclick="openQuoteForm('AI Powered Website')" class="w-full py-3 rounded-lg border border-slate-300 text-slate-700 font-semibold hover:bg-slate-50 transition-all">Request Quote</button>
                        </div>
                    </div>

                    <!-- Bundle & Portal -->
                    <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                        <div class="glass rounded-2xl p-8 border border-slate-200 hover:border-violet-300 transition-all">
                            <div class="flex items-center gap-3 mb-4">
                                <span class="px-3 py-1 rounded-full bg-gradient-to-r from-violet-500 to-pink-500 text-white text-xs font-bold">BEST VALUE</span>
                            </div>
                            <h3 class="text-xl font-semibold text-slate-700 mb-2">Front-End + Portal</h3>
                            <div class="flex items-baseline gap-1 mb-4">
                                <span class="text-4xl font-bold text-slate-900 price-display" data-monthly="249" data-onetime="3499" data-setup="700">RM 249</span>
                                <span class="text-slate-500 price-period">/month</span>
                            </div>
                            <p class="text-sm text-slate-600 mb-4">Full website & internal management system. Best for growing businesses.</p>
                            <button onclick="attemptSelectPackage('Front-End + Portal', 'bundle')" class="w-full py-3 rounded-lg bg-gradient-to-r from-violet-600 to-pink-600 text-white font-semibold hover:shadow-lg transition-all">Select Bundle</button>
                        </div>

                        <div class="glass rounded-2xl p-8 border border-slate-200 hover:border-indigo-300 transition-all">
                            <h3 class="text-xl font-semibold text-slate-700 mb-2">Portal Standalone</h3>
                            <div class="flex items-baseline gap-1 mb-4">
                                <span class="text-4xl font-bold text-slate-900 price-display" data-monthly="279" data-onetime="3999" data-setup="700">RM 279</span>
                                <span class="text-slate-500 price-period">/month</span>
                            </div>
                            <p class="text-sm text-slate-600 mb-4">Internal portal for existing sites. Multi-user access & database management.</p>
                            <button onclick="openQuoteForm('Portal Standalone')" class="w-full py-3 rounded-lg border border-slate-300 text-slate-700 font-semibold hover:bg-slate-50 transition-all">Request Quote</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CHECKOUT PAGE -->
        <section id="page-checkout" class="page">
            <div class="bg-slate-50 min-h-screen py-12">
                <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
                    <button onclick="navigateTo('pricing')" class="text-slate-600 hover:text-slate-900 transition-colors flex items-center gap-2 mb-8">
                        <i class="ri-arrow-left-line"></i>
                        Back to Pricing
                    </button>

                    <div class="grid lg:grid-cols-3 gap-8">
                        <!-- Checkout Form -->
                        <div class="lg:col-span-2 space-y-6">
                            <div class="glass rounded-2xl p-8 border border-slate-200 bg-white">
                                <h2 class="text-2xl font-bold text-slate-900 mb-6">Complete Your Order</h2>
                                
                                <!-- Plan Summary -->
                                <div class="p-4 rounded-xl bg-slate-50 border border-slate-200 mb-6">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-slate-600" id="summary-pkg-name">Professional Plan</span>
                                        <span class="text-slate-900 font-bold" id="summary-pkg-price">RM 99/month</span>
                                    </div>
                                    <div class="text-sm text-slate-500" id="summary-billing-type">Billed monthly</div>
                                </div>

                                <form id="checkoutForm" onsubmit="return false;">
                                    <div class="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-slate-600 mb-2">First Name</label>
                                            <input type="text" id="co-firstname" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800" placeholder="John">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-600 mb-2">Last Name</label>
                                            <input type="text" id="co-lastname" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800" placeholder="Doe">
                                        </div>
                                    </div>

                                    <div>
                                        <label class="block text-sm font-medium text-slate-600 mb-2">Email Address</label>
                                        <input type="email" id="co-email" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800" placeholder="john@company.com">
                                    </div>

                                    <div>
                                        <label class="block text-sm font-medium text-slate-600 mb-2">Phone Number</label>
                                        <input type="tel" id="co-phone" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800" placeholder="0123456789">
                                    </div>

                                    <div>
                                        <label class="block text-sm font-medium text-slate-600 mb-2">Company (Optional)</label>
                                        <input type="text" id="co-company" class="input-field w-full px-4 py-3 rounded-lg text-slate-800" placeholder="Acme Inc.">
                                    </div>

                                    <!-- Domain Selection -->
                                    <div>
                                        <label class="block text-sm font-medium text-slate-600 mb-3">Domain Choice</label>
                                        <div class="space-y-3">
                                            <div class="radio-option selected" onclick="updateDomain('sub', this)">
                                                <input type="radio" name="domain_type" value="sub" checked>
                                                <div>
                                                    <div class="font-medium text-slate-800">DDNex Subdomain (Free 1st Year)</div>
                                                    <div class="text-sm text-slate-500">yourname.ddnex.my</div>
                                                </div>
                                            </div>
                                            <div id="input-subdomain" style="margin-top: 10px;">
                                                <input type="text" id="subdomain-text" class="input-field w-full px-4 py-2 rounded-lg text-slate-800" placeholder="yourname" oninput="updateSummaryText()">
                                                <div style="font-size: 0.8rem; color: #64748b; margin-top: 5px;">URL: <span id="url-preview" style="color: #0f172a; font-weight: 700;">.ddnex.my</span></div>
                                            </div>
                                            <div class="radio-option" onclick="updateDomain('custom', this)">
                                                <input type="radio" name="domain_type" value="custom">
                                                <div>
                                                    <div class="font-medium text-slate-800">I have my own domain</div>
                                                    <div class="text-sm text-slate-500">www.example.com</div>
                                                </div>
                                            </div>
                                            <div id="input-custom" style="display: none; margin-top: 10px;">
                                                <input type="text" id="custom-domain-text" class="input-field w-full px-4 py-2 rounded-lg text-slate-800" placeholder="www.example.com" oninput="updateSummaryText()">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Maintenance -->
                                    <div>
                                        <label class="block text-sm font-medium text-slate-600 mb-3">Maintenance Plan (Optional)</label>
                                        <div class="grid grid-cols-3 gap-3">
                                            <div class="radio-option selected text-center" onclick="updateMaintenance('none', this)">
                                                <input type="radio" name="maint" value="none" checked>
                                                <div class="font-medium text-slate-800">None</div>
                                            </div>
                                            <div class="radio-option text-center" onclick="updateMaintenance('basic', this)">
                                                <input type="radio" name="maint" value="basic">
                                                <div class="font-medium text-slate-800">Basic</div>
                                                <div class="text-xs text-slate-500">+RM 50/mo</div>
                                            </div>
                                            <div class="radio-option text-center" onclick="updateMaintenance('business', this)">
                                                <input type="radio" name="maint" value="business">
                                                <div class="font-medium text-slate-800">Business</div>
                                                <div class="text-xs text-slate-500">+RM 100/mo</div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Promo Code -->
                                    <div>
                                        <label class="block text-sm font-medium text-slate-600 mb-2">Promo Code (Optional)</label>
                                        <div class="flex gap-3">
                                            <input type="text" id="promo-input" class="input-field flex-1 px-4 py-3 rounded-lg text-slate-800 uppercase" placeholder="PROMO10%">
                                            <button type="button" onclick="applyPromo()" class="px-6 py-3 rounded-lg border border-slate-300 text-slate-700 font-medium hover:bg-slate-50">Apply</button>
                                        </div>
                                        <p class="text-xs text-slate-500 mt-2">*Promo codes for logged-in users only</p>
                                    </div>

                                    <!-- Terms -->
                                    <div class="flex items-start gap-3 p-4 rounded-lg bg-slate-50 border border-slate-200">
                                        <input type="checkbox" required id="terms-check" class="mt-1 w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500">
                                        <label for="terms-check" class="text-sm text-slate-600">
                                            I agree to the <a href="#" onclick="navigateTo('terms')" class="text-indigo-600 hover:underline">Terms of Service</a> and <a href="#" onclick="navigateTo('privacy')" class="text-indigo-600 hover:underline">Privacy Policy</a>.
                                        </label>
                                    </div>

                                    <div class="p-4 rounded-lg bg-emerald-50 border border-emerald-200 flex items-center gap-3">
                                        <i class="ri-secure-payment-line text-emerald-600 text-xl"></i>
                                        <span class="text-sm text-emerald-800 font-medium">Secure Payment via Razorpay (Curlec)</span>
                                    </div>

                                    <button type="button" id="btn-pay-now" class="w-full py-4 rounded-lg btn-primary text-white font-bold text-lg shadow-xl flex items-center justify-center gap-2" onclick="initiateRazorpayPayment()">
                                        <i class="ri-credit-card-2-fill"></i>
                                        Pay Now
                                    </button>

                                    <!-- Manual Confirmation (shown after Razorpay opens) -->
                                    <div id="manual-confirm-section" class="hidden p-6 rounded-xl bg-emerald-50 border border-emerald-200 text-center">
                                        <i class="ri-checkbox-circle-line text-5xl text-emerald-500 mb-4"></i>
                                        <h3 class="text-lg font-bold text-slate-900 mb-2">Payment Window Opened</h3>
                                        <p class="text-slate-600 mb-4">Please complete your payment in the Razorpay window.</p>
                                        <button type="button" onclick="handleManualConfirmation()" class="w-full py-3 rounded-lg bg-emerald-600 text-white font-semibold hover:bg-emerald-700">
                                            I have made payment
                                        </button>
                                    </div>

                                    <!-- Payment Failed -->
                                    <div id="payment-failed-section" class="hidden p-6 rounded-xl bg-red-50 border border-red-200 text-center">
                                        <i class="ri-close-circle-line text-5xl text-red-500 mb-4"></i>
                                        <h3 class="text-lg font-bold text-slate-900 mb-2">Payment Failed</h3>
                                        <p class="text-slate-600 mb-4">The payment was cancelled or failed.</p>
                                        <div class="flex gap-3">
                                            <button type="button" onclick="initiateRazorpayPayment()" class="flex-1 py-3 rounded-lg btn-primary text-white font-semibold">Retry</button>
                                            <a href="https://wa.me/60122600969" target="_blank" class="flex-1 py-3 rounded-lg border border-slate-300 text-slate-700 font-semibold text-center hover:bg-slate-50">Contact Support</a>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!-- Order Summary Sidebar -->
                        <div class="lg:col-span-1">
                            <div class="glass rounded-2xl p-6 border border-slate-200 bg-white sticky top-24">
                                <h3 class="text-lg font-bold text-slate-900 mb-4">Order Summary</h3>
                                <div class="space-y-3 mb-4 text-sm">
                                    <div class="flex justify-between text-slate-600"><span id="summary-package">Package</span><span class="text-slate-900 font-medium" id="summary-package-price">RM 0</span></div>
                                    <div class="flex justify-between text-slate-600"><span>Setup Fee</span><span class="text-amber-600 font-medium" id="summary-setup">RM 0</span></div>
                                    <div class="flex justify-between text-slate-600"><span>Domain</span><span class="text-slate-900 font-medium" id="summary-domain">Free</span></div>
                                    <div class="flex justify-between text-slate-600"><span>Maintenance</span><span class="text-slate-900 font-medium" id="summary-maintenance">None</span></div>
                                    <div id="row-discount" class="hidden flex justify-between text-emerald-600">
                                        <span>Discount: <strong id="summary-promo-code" style="margin: 0 5px;"></strong><i class="ri-close-circle-fill" style="margin-left:5px; cursor:pointer;" onclick="removeVoucher()"></i></span>
                                        <span id="summary-discount-val">-RM 0</span>
                                    </div>
                                </div>
                                <div class="border-t border-slate-200 pt-4">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-slate-600">Total</span>
                                        <span class="text-3xl font-bold text-slate-900" id="summary-final-total">RM 0</span>
                                    </div>
                                </div>
                                
                                <div class="mt-6 p-4 rounded-lg bg-emerald-50 border border-emerald-200">
                                    <div class="flex items-center gap-2 text-emerald-700 text-sm font-medium mb-1">
                                        <i class="ri-shield-check-line"></i>
                                        30-Day Money Back
                                    </div>
                                    <p class="text-xs text-emerald-600">Full refund if not satisfied within 30 days.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- REVIEWS PAGE -->
        <section id="page-reviews" class="page">
            <div class="bg-mesh py-24 min-h-screen">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-16">
                        <h1 class="text-5xl font-bold mb-6 text-slate-900">Customer <span class="text-gradient">Reviews</span></h1>
                        <p class="text-xl text-slate-600">See what our clients say about working with us.</p>
                    </div>

                    <div class="grid lg:grid-cols-3 gap-8 mb-16">
                        <!-- Write Review Form -->
                        <div class="lg:col-span-1">
                            <div class="glass rounded-2xl p-8 border border-slate-200 bg-white h-full">
                                <h3 class="text-xl font-bold text-slate-900 mb-2">Write a Review</h3>
                                <p class="text-slate-600 mb-6 text-sm">Share your experience with DDNex services.</p>
                                
                                <form id="review-form" onsubmit="handleReviewSubmit(event)">
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-slate-600 mb-2">Your Rating</label>
                                        <div class="flex gap-2" id="star-input-container">
                                            <i class="ri-star-fill star-icon" data-val="1"></i>
                                            <i class="ri-star-fill star-icon" data-val="2"></i>
                                            <i class="ri-star-fill star-icon" data-val="3"></i>
                                            <i class="ri-star-fill star-icon" data-val="4"></i>
                                            <i class="ri-star-fill star-icon" data-val="5"></i>
                                        </div>
                                        <input type="hidden" id="rating-value" required>
                                        <div id="rating-error" style="color: #ef4444; font-size: 0.8rem; margin-top: 5px; display: none;">Please select a rating.</div>
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-slate-600 mb-2">Your Review</label>
                                        <textarea id="review-comment" rows="4" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800 resize-none" placeholder="Share your experience..."></textarea>
                                    </div>
                                    <button type="submit" class="w-full py-3 rounded-lg btn-primary text-white font-semibold">Submit Review</button>
                                </form>

                                <div class="mt-8 pt-6 border-t border-slate-200">
                                    <p class="text-sm text-slate-600 mb-4 font-semibold">Prefer Google?</p>
                                    <a href="https://g.page/r/CVUI33FMpZB8EAE/review" target="_blank" class="w-full py-3 rounded-lg border border-slate-300 text-slate-700 font-medium hover:bg-slate-50 transition-all flex items-center justify-center gap-2">
                                        <i class="ri-google-fill text-red-500 text-xl"></i>
                                        Review on Google Maps
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- Reviews Grid -->
                        <div class="lg:col-span-2">
                            <div id="reviews-list" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- Reviews loaded dynamically -->
                                <div class="col-span-2 text-center py-12 text-slate-400">Loading reviews...</div>
                            </div>
                            <div class="text-center mt-8"><button class="btn btn-primary px-6 py-2 rounded-full text-white font-semibold" onclick="toggleFullReviews()">View All Reviews</button></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PORTFOLIO PAGE -->
        <section id="page-portfolio" class="page">
            <div class="bg-mesh py-24 min-h-screen">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-16">
                        <h1 class="text-5xl font-bold mb-6 text-slate-900">Our <span class="text-gradient">Portfolio</span></h1>
                        <p class="text-xl text-slate-600">Trusted by forward-thinking Malaysian businesses.</p>
                    </div>

                    <div id="portfolio-grid" class="grid md:grid-cols-3 gap-8">
                        <!-- Portfolio items loaded dynamically -->
                        <div class="col-span-3 text-center py-12 text-slate-400">Loading portfolio...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ABOUT PAGE -->
        <section id="page-about" class="page">
            <div class="bg-mesh py-24">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="grid lg:grid-cols-2 gap-16 items-center mb-24">
                        <div>
                            <h1 class="text-5xl font-bold mb-6 text-slate-900">Our <span class="text-gradient">Mission</span></h1>
                            <p class="text-xl text-slate-600 leading-relaxed mb-6">
                                Founded by Danial Danish, DDNex (under DDNex Cloud) provides professional website design and cloud services to help Malaysian businesses grow.
                            </p>
                            <p class="text-slate-600 leading-relaxed mb-8">
                                We prioritize speed, clean design, and smart functionality. We cut through the noise to deliver exactly what you need—no more, no less.
                            </p>
                            <div class="flex gap-6">
                                <div class="text-center">
                                    <div class="text-3xl font-bold text-slate-900">2023</div>
                                    <div class="text-sm text-slate-500">Founded</div>
                                </div>
                                <div class="w-px bg-slate-200"></div>
                                <div class="text-center">
                                    <div class="text-3xl font-bold text-slate-900">10+</div>
                                    <div class="text-sm text-slate-500">Clients</div>
                                </div>
                                <div class="w-px bg-slate-200"></div>
                                <div class="text-center">
                                    <div class="text-3xl font-bold text-slate-900">5-Star</div>
                                    <div class="text-sm text-slate-500">Rated</div>
                                </div>
                            </div>
                        </div>
                        <div class="relative">
                            <div class="absolute -inset-4 bg-gradient-to-r from-indigo-200/50 to-slate-200/50 rounded-3xl blur-2xl"></div>
                            <div class="relative glass rounded-2xl p-8 border border-slate-200 bg-white">
                                <div class="w-32 h-32 rounded-full bg-gradient-to-br from-slate-700 to-slate-900 mx-auto mb-6 flex items-center justify-center text-4xl font-bold text-white">
                                    DD
                                </div>
                                <h3 class="text-2xl font-bold text-center text-slate-900 mb-2">Danial Danish</h3>
                                <p class="text-center text-indigo-600 font-medium mb-4">Founder & Lead Developer</p>
                                <p class="text-slate-600 text-center text-sm leading-relaxed">
                                    "My journey began with a curiosity for code. What started as late-night experiments grew into DDNex, a company built on simplicity, speed, and thoughtful digital design."
                                </p>
                                <div class="flex justify-center gap-4 mt-6">
                                    <a href="https://www.linkedin.com/in/muhammad-danial-danish-217bb82ba/" target="_blank" class="w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center text-slate-600 hover:bg-slate-200 transition-colors">
                                        <i class="ri-linkedin-fill"></i>
                                    </a>
                                    <a href="https://www.instagram.com/danialddanish/" target="_blank" class="w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center text-slate-600 hover:bg-slate-200 transition-colors">
                                        <i class="ri-instagram-line"></i>
                                    </a>
                                    <a href="https://www.tiktok.com/@ddnet.my/" target="_blank" class="w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center text-slate-600 hover:bg-slate-200 transition-colors">
                                        <i class="ri-tiktok-line"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Values -->
                    <div class="glass rounded-2xl p-12 border border-slate-200 bg-white">
                        <h2 class="text-3xl font-bold text-center mb-12 text-slate-900">Our Values</h2>
                        <div class="grid md:grid-cols-3 gap-8">
                            <div class="text-center">
                                <div class="w-16 h-16 rounded-2xl bg-indigo-100 flex items-center justify-center mx-auto mb-4">
                                    <i class="ri-rocket-2-line text-3xl text-indigo-600"></i>
                                </div>
                                <h3 class="text-xl font-bold text-slate-900 mb-2">Speed First</h3>
                                <p class="text-slate-600">Fast delivery without compromising quality. Your time is valuable.</p>
                            </div>
                            <div class="text-center">
                                <div class="w-16 h-16 rounded-2xl bg-violet-100 flex items-center justify-center mx-auto mb-4">
                                    <i class="ri-shield-check-line text-3xl text-violet-600"></i>
                                </div>
                                <h3 class="text-xl font-bold text-slate-900 mb-2">Reliability</h3>
                                <p class="text-slate-600">Built to last with clean, maintainable code and best practices.</p>
                            </div>
                            <div class="text-center">
                                <div class="w-16 h-16 rounded-2xl bg-pink-100 flex items-center justify-center mx-auto mb-4">
                                    <i class="ri-heart-3-line text-3xl text-pink-600"></i>
                                </div>
                                <h3 class="text-xl font-bold text-slate-900 mb-2">Customer First</h3>
                                <p class="text-slate-600">Your success is our success. We're with you every step of the way.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CONTACT PAGE -->
        <section id="page-contact" class="page">
            <div class="bg-mesh py-24 min-h-screen">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="grid lg:grid-cols-2 gap-16">
                        <div>
                            <h1 class="text-5xl font-bold mb-6 text-slate-900">Get in <span class="text-gradient">Touch</span></h1>
                            <p class="text-xl text-slate-600 mb-8">Have questions? Our team is here to help. Reach out and we'll respond within 24 hours.</p>
                            
                            <div class="space-y-6 mb-12">
                                <div class="flex items-center gap-4">
                                    <div class="w-12 h-12 rounded-xl bg-indigo-100 flex items-center justify-center">
                                        <i class="ri-mail-line text-2xl text-indigo-600"></i>
                                    </div>
                                    <div>
                                        <div class="text-sm text-slate-500">Email</div>
                                        <div class="text-slate-900 font-medium">sales@ddnex.my</div>
                                    </div>
                                </div>
                                <div class="flex items-center gap-4">
                                    <div class="w-12 h-12 rounded-xl bg-violet-100 flex items-center justify-center">
                                        <i class="ri-phone-line text-2xl text-violet-600"></i>
                                    </div>
                                    <div>
                                        <div class="text-sm text-slate-500">Phone</div>
                                        <div class="text-slate-900 font-medium">+60 12-260 0969</div>
                                    </div>
                                </div>
                                <div class="flex items-center gap-4">
                                    <div class="w-12 h-12 rounded-xl bg-pink-100 flex items-center justify-center">
                                        <i class="ri-map-pin-line text-2xl text-pink-600"></i>
                                    </div>
                                    <div>
                                        <div class="text-sm text-slate-500">Location</div>
                                        <div class="text-slate-900 font-medium">Malaysia</div>
                                    </div>
                                </div>
                            </div>

                            <div class="glass rounded-2xl p-6 border border-slate-200 bg-white">
                                <h3 class="font-bold text-slate-900 mb-4">Follow Us</h3>
                                <div class="flex gap-4">
                                    <a href="#" class="w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center text-slate-600 hover:bg-slate-200 transition-colors">
                                        <i class="ri-twitter-x-line"></i>
                                    </a>
                                    <a href="#" class="w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center text-slate-600 hover:bg-slate-200 transition-colors">
                                        <i class="ri-linkedin-fill"></i>
                                    </a>
                                    <a href="#" class="w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center text-slate-600 hover:bg-slate-200 transition-colors">
                                        <i class="ri-instagram-line"></i>
                                    </a>
                                    <a href="#" class="w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center text-slate-600 hover:bg-slate-200 transition-colors">
                                        <i class="ri-tiktok-line"></i>
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="glass rounded-2xl p-8 border border-slate-200 bg-white">
                            <form onsubmit="handleContactSubmit(event)" class="space-y-6">
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-600 mb-2">First Name</label>
                                        <input type="text" id="contact-name" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800" placeholder="John">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-600 mb-2">Last Name</label>
                                        <input type="text" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800" placeholder="Doe">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-600 mb-2">Email</label>
                                    <input type="email" id="contact-email" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800" placeholder="john@example.com">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-600 mb-2">Subject</label>
                                    <select class="input-field w-full px-4 py-3 rounded-lg text-slate-800 bg-white">
                                        <option>General Inquiry</option>
                                        <option>Sales Question</option>
                                        <option>Technical Support</option>
                                        <option>Partnership</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-600 mb-2">Message</label>
                                    <textarea id="contact-message" rows="4" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800 resize-none" placeholder="How can we help you?"></textarea>
                                </div>
                                <button type="submit" class="w-full py-4 rounded-lg btn-primary text-white font-bold text-lg shadow-lg">
                                    Send Message
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- LOGIN PAGE -->
        <section id="page-login" class="page">
            <div class="min-h-screen flex items-center justify-center bg-mesh py-12 px-4 relative overflow-hidden">
                <div class="absolute inset-0 z-0">
                    <div class="absolute top-0 left-0 w-96 h-96 bg-indigo-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
                    <div class="absolute bottom-0 right-0 w-96 h-96 bg-violet-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"></div>
                </div>
                
                <div class="max-w-md w-full relative z-10">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-slate-800 to-slate-600 flex items-center justify-center mx-auto mb-4 shadow-lg animate-float">
                            <img src="https://i.ibb.co/5gtxDtKd/blacklogo-dd.png" alt="DDNex" class="w-8 h-8 object-contain invert">
                        </div>
                        <h2 class="text-3xl font-bold text-slate-900">Welcome Back</h2>
                        <p class="text-slate-600 mt-2">Sign in to your DDNex dashboard</p>
                    </div>

                    <div class="glass-strong rounded-2xl p-8 border border-slate-200 bg-white shadow-2xl">
                        <form onsubmit="handleLogin(event)" class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-2">Email Address</label>
                                <input type="email" id="login-email" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800" placeholder="you@example.com">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-2">Password</label>
                                <input type="password" id="login-password" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800" placeholder="••••••••">
                            </div>
                            <div class="flex items-center justify-between text-sm">
                                <label class="flex items-center gap-2 text-slate-600 cursor-pointer">
                                    <input type="checkbox" class="rounded border-slate-300 text-indigo-600 focus:ring-indigo-500">
                                    Remember me
                                </label>
                                <a href="#" onclick="navigateTo('forgot-password')" class="text-indigo-600 hover:underline">Forgot password?</a>
                            </div>
                            <button type="submit" class="w-full py-3 rounded-lg btn-primary text-white font-bold shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5">
                                Sign In
                            </button>
                        </form>

                        <div class="mt-6 text-center text-sm text-slate-600">
                            Don't have an account? 
                            <button onclick="navigateTo('signup')" class="text-indigo-600 hover:underline font-medium">Get Started</button>
                        </div>

                        <div class="mt-6 pt-6 border-t border-slate-200">
                            <div class="text-center text-xs text-slate-500 mb-4">Or continue with</div>
                            <button onclick="handleGoogleAuth()" class="w-full py-2 px-4 rounded-lg border border-slate-300 text-slate-700 hover:bg-slate-50 transition-all text-sm font-medium flex items-center justify-center gap-2">
                                <svg class="w-5 h-5" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                                Google
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SIGNUP PAGE -->
        <section id="page-signup" class="page">
            <div class="min-h-screen flex items-center justify-center bg-mesh py-12 px-4 relative overflow-hidden">
                <div class="absolute inset-0 z-0">
                    <div class="absolute top-0 right-0 w-96 h-96 bg-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
                    <div class="absolute bottom-0 left-0 w-96 h-96 bg-emerald-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"></div>
                </div>

                <div class="max-w-md w-full relative z-10">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-slate-800 to-slate-600 flex items-center justify-center mx-auto mb-4 shadow-lg animate-float">
                            <img src="https://i.ibb.co/5gtxDtKd/blacklogo-dd.png" alt="DDNex" class="w-8 h-8 object-contain invert">
                        </div>
                        <h2 class="text-3xl font-bold text-slate-900">Create Account</h2>
                        <p class="text-slate-600 mt-2">Join thousands of Malaysian businesses</p>
                    </div>

                    <div class="glass-strong rounded-2xl p-8 border border-slate-200 bg-white shadow-2xl">
                        <form onsubmit="handleSignup(event)" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-2">Full Name</label>
                                <input type="text" id="signup-name" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800" placeholder="John Doe">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-2">Phone Number</label>
                                <input type="tel" id="signup-phone" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800" placeholder="0123456789">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-2">Email Address</label>
                                <input type="email" id="signup-email" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800" placeholder="you@example.com">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-2">Password</label>
                                <input type="password" id="signup-password" required minlength="6" oninput="checkPasswordStrength()" class="input-field w-full px-4 py-3 rounded-lg text-slate-800" placeholder="••••••••">
                                <div class="password-requirements mt-2">
                                    <span id="req-upper" class="req-item"><i class="ri-close-circle-line"></i> Uppercase</span>
                                    <span id="req-lower" class="req-item"><i class="ri-close-circle-line"></i> Lowercase</span>
                                    <span id="req-num" class="req-item"><i class="ri-close-circle-line"></i> Number</span>
                                    <span id="req-len" class="req-item"><i class="ri-close-circle-line"></i> 6+ chars</span>
                                </div>
                            </div>
                            <button type="submit" class="w-full py-3 rounded-lg btn-primary text-white font-bold shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5 mt-4">
                                Create Account
                            </button>
                        </form>

                        <div class="mt-6 text-center text-sm text-slate-600">
                            Already have an account? 
                            <button onclick="navigateTo('login')" class="text-indigo-600 hover:underline font-medium">Sign In</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PROFILE PAGE -->
        <section id="page-profile" class="page">
            <div class="bg-slate-50 min-h-screen py-12">
                <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="glass rounded-2xl p-8 border border-slate-200 bg-white mb-8">
                        <div class="flex items-center gap-4 mb-6">
                            <div class="w-16 h-16 rounded-full bg-gradient-to-br from-slate-700 to-slate-900 flex items-center justify-center text-2xl font-bold text-white">
                                <i class="ri-user-line"></i>
                            </div>
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900">My Profile</h2>
                                <p class="text-slate-600">Manage your account and orders</p>
                            </div>
                        </div>

                        <form onsubmit="handleProfileUpdate(event)" class="space-y-6">
                            <div class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate-600 mb-2">Full Name</label>
                                    <input type="text" id="prof-name" class="input-field w-full px-4 py-3 rounded-lg text-slate-800">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-600 mb-2">Email</label>
                                    <input type="email" id="prof-email" readonly class="input-field w-full px-4 py-3 rounded-lg text-slate-800 bg-slate-100">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-600 mb-2">Phone</label>
                                    <input type="tel" id="prof-phone" class="input-field w-full px-4 py-3 rounded-lg text-slate-800">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-600 mb-2">Company</label>
                                    <input type="text" id="prof-company" class="input-field w-full px-4 py-3 rounded-lg text-slate-800" placeholder="Optional">
                                </div>
                            </div>
                            <button type="submit" class="px-6 py-3 rounded-lg btn-primary text-white font-semibold">Update Profile</button>
                        </form>

                        <!-- Voucher Section -->
                        <div id="profile-voucher-section" class="hidden mt-8 pt-8 border-t border-slate-200">
                            <h3 class="text-lg font-bold text-slate-900 mb-4">Your Voucher</h3>
                            <div class="glass rounded-xl p-4 border border-slate-200 bg-emerald-50 flex justify-between items-center">
                                <div>
                                    <div class="text-sm text-slate-600">Available Voucher</div>
                                    <div class="text-lg font-bold text-emerald-700" id="profile-voucher-text">-</div>
                                </div>
                                <button onclick="deletePersonalVoucher()" class="text-red-600 hover:text-red-700 text-sm font-medium">Remove</button>
                            </div>
                        </div>
                    </div>

                    <!-- Order History -->
                    <div class="glass rounded-2xl p-8 border border-slate-200 bg-white">
                        <h3 class="text-lg font-bold text-slate-900 mb-4">Order History</h3>
                        <div id="order-history-container" class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead>
                                    <tr class="border-b border-slate-200">
                                        <th class="pb-3 text-sm font-medium text-slate-600">Date</th>
                                        <th class="pb-3 text-sm font-medium text-slate-600">Package</th>
                                        <th class="pb-3 text-sm font-medium text-slate-600">Total</th>
                                        <th class="pb-3 text-sm font-medium text-slate-600">Status</th>
                                    </tr>
                                </thead>
                                <tbody id="order-history-body" class="text-sm">
                                    <!-- Orders loaded dynamically -->
                                </tbody>
                            </table>
                            <div id="no-orders" class="text-center py-8 text-slate-500 hidden">No orders yet</div>
                        </div>
                    </div>

                    <div class="mt-8 text-center">
                        <button onclick="handleLogout()" class="text-red-600 hover:text-red-700 font-medium">Sign Out</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- WEBSITE IDEA PAGE -->
        <section id="page-website-idea" class="page">
            <div class="bg-mesh py-24 min-h-screen">
                <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="glass rounded-2xl p-8 border border-slate-200 bg-white">
                        <div class="text-center mb-8">
                            <i class="ri-lightbulb-flash-line text-5xl text-indigo-600 mb-4"></i>
                            <h2 class="text-3xl font-bold text-slate-900">Describe Your Website</h2>
                            <p class="text-slate-600 mt-2">Tell us your vision! We'll review your ideas and get back to you.</p>
                        </div>

                        <form id="website-idea-form" onsubmit="handleWebsiteIdeaSubmit(event)" class="space-y-6">
                            <div class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate-600 mb-2">Your Name</label>
                                    <input type="text" id="idea-name" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-600 mb-2">Phone Number</label>
                                    <input type="tel" id="idea-phone" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800">
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-2">Email Address</label>
                                <input type="email" id="idea-email" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-2">Company (Optional)</label>
                                <input type="text" id="idea-company" class="input-field w-full px-4 py-3 rounded-lg text-slate-800">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-2">How did you hear about us?</label>
                                <select id="idea-source" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800 bg-white">
                                    <option value="">Select...</option>
                                    <option>TikTok</option>
                                    <option>Facebook</option>
                                    <option>Instagram</option>
                                    <option>YouTube</option>
                                    <option>Google</option>
                                    <option>ChatGPT</option>
                                    <option>Referral</option>
                                    <option>Other</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-2">Project Type</label>
                                <select id="idea-type" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800 bg-white">
                                    <option value="">Select...</option>
                                    <option>New Website</option>
                                    <option>Redesign Existing</option>
                                    <option>Internal Portal</option>
                                    <option>AI Integration</option>
                                    <option>Other / Not Sure</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-2">Describe Your Idea</label>
                                <textarea id="idea-message" rows="5" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800 resize-none" placeholder="Tell us about your business, target audience, features you need..."></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-2">Reference Sites (Optional)</label>
                                <input type="text" id="idea-references" class="input-field w-full px-4 py-3 rounded-lg text-slate-800" placeholder="Links to sites you like...">
                            </div>
                            <button type="submit" class="w-full py-4 rounded-lg btn-primary text-white font-bold text-lg shadow-lg">
                                Submit Idea
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- HELPDESK PAGE -->
        <section id="page-helpdesk" class="page">
            <div class="bg-mesh py-24 min-h-screen">
                <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="glass rounded-2xl p-8 border border-slate-200 bg-white">
                        <div class="text-center mb-8">
                            <i class="ri-customer-service-2-line text-5xl text-indigo-600 mb-4"></i>
                            <h2 class="text-3xl font-bold text-slate-900">Helpdesk</h2>
                            <p class="text-slate-600 mt-2">Submit a support ticket. We'll get back to you ASAP.</p>
                        </div>

                        <form onsubmit="handleTicketSubmit(event)" class="space-y-6">
                            <div class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate-600 mb-2">Full Name</label>
                                    <input type="text" id="ticket-name" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-600 mb-2">Email</label>
                                    <input type="email" id="ticket-email" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800">
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-2">Issue Type</label>
                                <select id="ticket-type" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800 bg-white">
                                    <option value="">Select issue...</option>
                                    <option>Cannot login</option>
                                    <option>Payment issue</option>
                                    <option>Website not loading</option>
                                    <option>Update request</option>
                                    <option>Other</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-2">Message</label>
                                <textarea id="ticket-message" rows="5" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800 resize-none" placeholder="Describe your issue in detail..."></textarea>
                            </div>
                            <button type="submit" id="btn-submit-ticket" class="w-full py-4 rounded-lg btn-primary text-white font-bold text-lg shadow-lg">
                                Submit Ticket
                            </button>
                        </form>

                        <!-- Case ID Display -->
                        <div id="case-id-display" class="hidden mt-6 p-6 rounded-xl bg-emerald-50 border border-emerald-200 text-center">
                            <div class="text-sm text-emerald-700 font-semibold mb-2">TICKET SUBMITTED</div>
                            <div id="display-case-id" class="text-2xl font-bold text-slate-900 font-mono mb-4">#Ticket-0000</div>
                            <button onclick="copyTicketId()" class="px-4 py-2 rounded-lg border border-emerald-300 text-emerald-700 text-sm hover:bg-emerald-100">Copy ID</button>
                        </div>

                        <!-- Ticket History -->
                        <div class="mt-12 pt-8 border-t border-slate-200">
                            <h3 class="text-lg font-bold text-slate-900 mb-4">Check Ticket Status</h3>
                            <div class="flex gap-3">
                                <input type="text" id="history-search-id" class="input-field flex-1 px-4 py-3 rounded-lg text-slate-800" placeholder="Enter Case ID (e.g. #Ticket-0001)">
                                <button onclick="fetchTicketHistory()" class="px-6 py-3 rounded-lg border border-slate-300 text-slate-700 font-medium hover:bg-slate-50">Search</button>
                            </div>
                            <div id="ticket-list" class="mt-4 space-y-3"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- UPDATES PAGE -->
        <section id="page-updates" class="page">
            <div class="bg-mesh py-24 min-h-screen">
                <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="glass rounded-2xl p-8 border border-slate-200 bg-white">
                        <div class="text-center mb-8">
                            <i class="ri-refresh-line text-5xl text-indigo-600 mb-4"></i>
                            <h2 class="text-3xl font-bold text-slate-900">Customer Requests</h2>
                            <p class="text-slate-600 mt-2">Update content, upgrade, renew, or remove features.</p>
                        </div>

                        <form onsubmit="handleRequestSubmit(event)" class="space-y-6">
                            <div class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate-600 mb-2">Full Name</label>
                                    <input type="text" id="req-name" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-600 mb-2">Phone</label>
                                    <input type="tel" id="req-phone" required class="input-field w-full px-4 py-3 rounded-lg text-slate-800">
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-3">Request Type</label>
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="radio-option selected" onclick="handleUpdateTypeChange('content', this)">
                                        <input type="radio" name="req_type" value="content" checked class="hidden">
                                        <div>
                                            <div class="font-medium text-slate-800">Update Content</div>
                                            <div class="text-xs text-slate-500">Text, images, info</div>
                                        </div>
                                    </div>
                                    <div class="radio-option" onclick="handleUpdateTypeChange('upgrade', this)">
                                        <input type="radio" name="req_type" value="upgrade" class="hidden">
                                        <div>
                                            <div class="font-medium text-slate-800">Upgrade Plan</div>
                                            <div class="text-xs text-slate-500">Move to higher tier</div>
                                        </div>
                                    </div>
                                    <div class="radio-option" onclick="handleUpdateTypeChange('renew', this)">
                                        <input type="radio" name="req_type" value="renew" class="hidden">
                                        <div>
                                            <div class="font-medium text-slate-800">Renew Plan</div>
                                            <div class="text-xs text-slate-500">Extend subscription</div>
                                        </div>
                                    </div>
                                    <div class="radio-option" onclick="handleUpdateTypeChange('remove', this)">
                                        <input type="radio" name="req_type" value="remove" class="hidden">
                                        <div>
                                            <div class="font-medium text-slate-800">Remove Content</div>
                                            <div class="text-xs text-slate-500">Delete pages/features</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Dynamic Fields -->
                            <div id="field-content">
                                <div>
                                    <label class="block text-sm font-medium text-slate-600 mb-2">Describe Changes</label>
                                    <textarea id="req-desc-content" rows="4" class="input-field w-full px-4 py-3 rounded-lg text-slate-800 resize-none" placeholder="e.g. Change phone number, update team photos..."></textarea>
                                </div>
                                <div class="p-4 rounded-lg bg-blue-50 border border-blue-200 text-sm text-blue-700 mt-4">
                                    <i class="ri-whatsapp-line mr-2"></i>
                                    <strong>Tip:</strong> Send images via WhatsApp after submitting.
                                </div>
                            </div>

                            <div id="field-upgrade" class="hidden">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-600 mb-2">Current Plan</label>
                                        <select id="req-current-plan" class="input-field w-full px-4 py-3 rounded-lg text-slate-800 bg-white">
                                            <option>Basic HTML</option>
                                            <option>Front-End</option>
                                            <option>AI Powered</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-600 mb-2">Desired Plan</label>
                                        <select id="req-new-plan" class="input-field w-full px-4 py-3 rounded-lg text-slate-800 bg-white">
                                            <option>Front-End</option>
                                            <option>AI Powered</option>
                                            <option>Front-End + Portal</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div id="field-renew" class="hidden">
                                <div>
                                    <label class="block text-sm font-medium text-slate-600 mb-2">Plan to Renew</label>
                                    <select id="req-renew-plan" class="input-field w-full px-4 py-3 rounded-lg text-slate-800 bg-white">
                                        <option>Basic HTML</option>
                                        <option>Front-End</option>
                                        <option>AI Powered</option>
                                        <option>Maintenance Only</option>
                                    </select>
                                </div>
                            </div>

                            <div id="field-remove" class="hidden">
                                <div class="p-4 rounded-lg bg-red-50 border border-red-200">
                                    <label class="block text-sm font-medium text-red-700 mb-2">What to Remove?</label>
                                    <textarea id="req-desc-remove" rows="3" class="input-field w-full px-4 py-3 rounded-lg text-slate-800 resize-none bg-white" placeholder="Specify what to delete..."></textarea>
                                </div>
                            </div>

                            <button type="submit" id="btn-submit-request" class="w-full py-4 rounded-lg btn-primary text-white font-bold text-lg shadow-lg">
                                Submit Request
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- THANK YOU PAGE -->
        <section id="page-thank-you" class="page">
            <div class="min-h-screen flex items-center justify-center bg-mesh py-12 px-4">
                <div class="max-w-md w-full text-center">
                    <div class="w-24 h-24 rounded-full bg-emerald-100 flex items-center justify-center mx-auto mb-6">
                        <i class="ri-check-line text-5xl text-emerald-600"></i>
                    </div>
                    <h2 class="text-4xl font-bold text-slate-900 mb-4">Order Placed!</h2>
                    <p class="text-slate-600 mb-8 text-lg">Thank you for choosing DDNex. We've received your order and will contact you via WhatsApp/Email within 24 hours.</p>
                    <div class="flex flex-col gap-3">
                        <button onclick="navigateTo('home')" class="w-full py-3 rounded-lg btn-primary text-white font-semibold">Return Home</button>
                        <button onclick="navigateTo('profile')" class="w-full py-3 rounded-lg border border-slate-300 text-slate-700 font-semibold hover:bg-slate-50">View Profile</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ PAGE -->
        <section id="page-faq" class="page">
            <div class="bg-mesh py-24 min-h-screen">
                <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-16">
                        <h1 class="text-5xl font-bold mb-6 text-slate-900">Frequently Asked <span class="text-gradient">Questions</span></h1>
                        <p class="text-xl text-slate-600">Everything you need to know about our services.</p>
                    </div>

                    <div class="glass rounded-2xl border border-slate-200 bg-white overflow-hidden">
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                <span>How long does it take to build a website?</span>
                                <i class="ri-arrow-down-s-line text-slate-400 transition-transform"></i>
                            </div>
                            <div class="faq-answer text-slate-600">
                                For a simple HTML static website, delivery typically takes 3-5 working days. For more complex interactive websites or AI integration, it usually takes between 2 to 4 weeks depending on the scope of features and content readiness.
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                <span>Do I need to pay for hosting and domain?</span>
                                <i class="ri-arrow-down-s-line text-slate-400 transition-transform"></i>
                            </div>
                            <div class="faq-answer text-slate-600">
                                Yes, all websites require a domain name (e.g., .com) and hosting. We offer free hosting for the first year with selected packages. Domain costs vary depending on the extension (.com, .my, .net).
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                <span>Can I update the website content myself?</span>
                                <i class="ri-arrow-down-s-line text-slate-400 transition-transform"></i>
                            </div>
                            <div class="faq-answer text-slate-600">
                                For our Internal Portal and Database solutions, yes, you will have a dashboard to manage content. For static HTML or front-end websites, minor updates might require our assistance, though we can integrate a CMS upon request.
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                <span>What payment methods do you accept?</span>
                                <i class="ri-arrow-down-s-line text-slate-400 transition-transform"></i>
                            </div>
                            <div class="faq-answer text-slate-600">
                                We accept Razorpay (via Curlec), FPX, credit/debit cards, and e-wallets. Payment details will be provided upon checkout.
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                <span>Do you provide SEO services?</span>
                                <i class="ri-arrow-down-s-line text-slate-400 transition-transform"></i>
                            </div>
                            <div class="faq-answer text-slate-600">
                                Basic SEO (Meta tags, sitemap, robots.txt) is included in all our packages. For advanced SEO ranking campaigns, please contact us for a custom quote.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- TERMS PAGE -->
        <section id="page-terms" class="page">
            <div class="bg-mesh py-24 min-h-screen">
                <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="glass rounded-2xl p-12 border border-slate-200 bg-white">
                        <h1 class="text-4xl font-bold mb-8 text-slate-900">Terms & Conditions</h1>
                        
                        <div class="prose prose-slate max-w-none">
                            <p class="text-slate-600 mb-6">By accessing, engaging, or using any services provided by <strong>DDNex</strong>, you acknowledge that you have read, understood, and agreed to be legally bound by these Terms & Conditions.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">Hosting Terms</h3>
                            <p class="text-slate-600 mb-4">Hosting is provided based on customer’s own custom domain. For new customers, a free ddnex.my subdomain is included for the first year only. After the free period, renewal of the ddnex.my subdomain is chargeable at RM 55 per year.</p>
                            <p class="text-slate-600 mb-4">Monthly subscription plans include hosting, server management, basic security updates, uptime monitoring, and technical support. One-time purchase plans include website development and deployment only. Ongoing maintenance, support, backups, updates, and content changes are not included and will be charged separately upon request. DDNex reserves the right to suspend hosting services in cases of non-payment, abuse, or violation of acceptable use policies.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">1. Scope of Services</h3>
                            <p class="text-slate-600 mb-4">Services provided are limited to what is explicitly stated in selected package or written agreement.</p>
                            <p class="text-slate-600 mb-4">Any work not listed (including additional pages, features, redesigns, or custom functions) is considered <strong>out of scope</strong> and will be quoted separately.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">2. One-Time Purchase Services</h3>
                            <p class="text-slate-600 mb-4">One-time purchases include <strong>development and delivery only</strong>.</p>
                            <p class="text-slate-600 mb-4">Updates, content changes, bug fixes, maintenance, and ongoing support are <strong>not included</strong>.</p>
                            <p class="text-slate-600 mb-4">Any future changes will be charged separately.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">3. Subscription Services (Monthly)</h3>
                            <p class="text-slate-600 mb-4">Subscription plans cover <strong>maintenance, monitoring, and technical support</strong> within agreed scope.</p>
                            <p class="text-slate-600 mb-4">Subscriptions do <strong>not</strong> include major redesigns, new features, or scope expansion.</p>
                            <p class="text-slate-600 mb-4">Requests beyond original scope will require an additional quotation.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">4. Setup Fees</h3>
                            <p class="text-slate-600 mb-4">Setup fees are <strong>one-time, non-refundable</strong> payments.</p>
                            <p class="text-slate-600 mb-4">Setup fees cover initial development, configuration, integrations, testing, and deployment.</p>
                            <p class="text-slate-600 mb-4">Work will only begin after setup fee has been fully paid.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">5. Payments & Billing</h3>
                            <p class="text-slate-600 mb-4">All prices are stated in <strong>RM (MYR)</strong> unless otherwise specified.</p>
                            <p class="text-slate-600 mb-4">Monthly plans are billed in advance on a recurring basis.</p>
                            <p class="text-slate-600 mb-4">Late payments may result in suspension of services until payment is received.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">6. Revisions & Changes</h3>
                            <p class="text-slate-600 mb-4">Minor revisions may be provided at DDNex’s discretion.</p>
                            <p class="text-slate-600 mb-4">Repeated revisions, content rewrites, or design changes are not included unless stated.</p>
                            <p class="text-slate-600 mb-4">Additional changes will be billed separately.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">7. Client Responsibilities</h3>
                            <p class="text-slate-600 mb-4">Clients are responsible for providing accurate content, images, and information.</p>
                            <p class="text-slate-600 mb-4">Delays caused by missing content or approvals may affect delivery timelines.</p>
                            <p class="text-slate-600 mb-4">DDNex is not responsible for issues caused by third-party services or client-provided materials.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">8. Delivery Timeline</h3>
                            <p class="text-slate-600 mb-4">Estimated timelines are provided as guidelines only.</p>
                            <p class="text-slate-600 mb-4">Delays caused by client-side feedback, content submission, or external dependencies are not responsibility of DDNex.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">9. Intellectual Property</h3>
                            <p class="text-slate-600 mb-4">Ownership of final website or system is transferred to client only after full payment is received.</p>
                            <p class="text-slate-600 mb-4">DDNex retains right to showcase completed projects for portfolio and promotional purposes unless otherwise agreed in writing.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">10. Termination</h3>
                            <p class="text-slate-600 mb-4">DDNex reserves right to terminate services if payments are overdue, terms are violated, or abusive behavior occurs.</p>
                            <p class="text-slate-600 mb-4">No refunds will be issued for work already completed.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">11. Refund Policy</h3>
                            <p class="text-slate-600 mb-4">All payments made are <strong>non-refundable</strong>, unless otherwise stated in writing.</p>
                            <p class="text-slate-600 mb-4">Setup fees and completed work are strictly non-refundable.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">12. Limitation of Liability</h3>
                            <p class="text-slate-600 mb-4">DDNex shall not be held liable for loss of data, revenue, or business arising from use or inability to use services.</p>
                            <p class="text-slate-600 mb-4">Clients are advised to maintain their own backups and business continuity plans.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">13. Changes to Terms</h3>
                            <p class="text-slate-600 mb-4">DDNex reserves right to update or modify these Terms & Conditions at any time.</p>
                            <p class="text-slate-600 mb-4">Continued use of services constitutes acceptance of updated terms.</p>
                            <p class="mt-8 text-center text-sm text-slate-500">&copy; DDNex. All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PRIVACY PAGE -->
        <section id="page-privacy" class="page">
            <div class="bg-mesh py-24 min-h-screen">
                <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="glass rounded-2xl p-12 border border-slate-200 bg-white">
                        <h1 class="text-4xl font-bold mb-8 text-slate-900">Privacy Policy</h1>
                        
                        <div class="prose prose-slate max-w-none">
                            <p class="text-slate-600 mb-6"><strong>Effective Date:</strong> 6 February 2026</p>
                            
                            <p class="text-slate-600 mb-6">DDNex (“we”, “our”, “us”) respects your privacy and is committed to protecting your personal information. This Privacy Policy explains how we collect, use, store, and share data when you use our website (<strong>https://www.ddnex.my/</strong>) and our application <strong>ddnex-database</strong>.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">1. Data We Collect</h3>
                            <p class="text-slate-600 mb-4">When you use our services, we may access the following Google user data:</p>
                            <ul class="list-disc ml-6 text-slate-600 mb-4">
                                <li><strong>Basic Profile Information:</strong> Name, email address, profile picture</li>
                                <li><strong>Google Contacts (if applicable):</strong> To display or process information within the app</li>
                                <li><strong>Other Data:</strong> Any additional Google services requested by the app (if applicable)</li>
                            </ul>
                            <p class="text-slate-600 mb-4">We do <strong>not</strong> access data beyond what is needed to provide services of our app.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">2. How We Use Your Data</h3>
                            <p class="text-slate-600 mb-4">We use your Google data only to provide, operate, and improve our application:</p>
                            <ul class="list-disc ml-6 text-slate-600 mb-4">
                                <li>To personalize your experience in <strong>ddnex-database</strong></li>
                                <li>To enable app features that require Google data</li>
                                <li>To communicate with you about your account or updates</li>
                            </ul>
                            <p class="text-slate-600 mb-4">We do <strong>not sell, rent, or trade</strong> your Google data to third parties.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">3. Data Storage and Security</h3>
                            <ul class="list-disc ml-6 text-slate-600 mb-4">
                                <li>All collected data is stored securely on our servers or authorized cloud services.</li>
                                <li>We implement appropriate technical and organizational measures to protect your data against unauthorized access, disclosure, alteration, or destruction.</li>
                                <li>Access to your data is limited to authorized personnel only.</li>
                            </ul>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">4. Data Sharing</h3>
                            <ul class="list-disc ml-6 text-slate-600 mb-4">
                                <li>We do not share your Google data with third parties except where required by law or to comply with Google API policies.</li>
                                <li>Any third-party services integrated with the app (e.g., analytics or hosting providers) only receive the minimal data necessary to provide their service.</li>
                            </ul>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">5. Your Rights</h3>
                            <ul class="list-disc ml-6 text-slate-600 mb-4">
                                <li>You can request access to data we have collected about you.</li>
                                <li>You can request correction or deletion of your data by contacting us at details below.</li>
                            </ul>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">6. Changes to This Policy</h3>
                            <p class="text-slate-600 mb-4">We may update this Privacy Policy from time to time. We will notify you of any significant changes and update the <strong>effective date</strong> above.</p>
                            
                            <h3 class="text-xl font-bold text-slate-900 mt-8 mb-4">7. Contact Us</h3>
                            <p class="text-slate-600">If you have any questions about this Privacy Policy or your data, please contact us:</p>
                            <p class="text-slate-600 mt-2"><strong>Email:</strong> <a href="mailto:support@ddnex.my" class="text-indigo-600 hover:underline">support@ddnex.my</a><br><strong>Website:</strong> <a href="https://www.ddnex.my" class="text-indigo-600 hover:underline">https://www.ddnex.my</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-300 py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-12 mb-12">
                <div>
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-slate-700 to-slate-600 flex items-center justify-center">
                            <img src="https://i.ibb.co/5gtxDtKd/blacklogo-dd.png" alt="DDNex" class="w-6 h-6 object-contain invert">
                        </div>
                        <span class="text-xl font-bold text-white">DDNex</span>
                    </div>
                    <p class="text-sm text-slate-400 leading-relaxed">Designed in Malaysia. Built for the world. Professional web design and AI solutions.</p>
                </div>
                <div>
                    <h4 class="text-white font-semibold mb-4">Services</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('features')" class="hover:text-white transition-colors">Static Websites</a></li>
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('features')" class="hover:text-white transition-colors">Interactive Websites</a></li>
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('features')" class="hover:text-white transition-colors">AI Integration</a></li>
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('features')" class="hover:text-white transition-colors">Internal Portals</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-semibold mb-4">Support</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('helpdesk')" class="hover:text-white transition-colors">Helpdesk</a></li>
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('faq')" class="hover:text-white transition-colors">FAQ</a></li>
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('updates')" class="hover:text-white transition-colors">Customer Updates</a></li>
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('contact')" class="hover:text-white transition-colors">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-semibold mb-4">Legal</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('terms')" class="hover:text-white transition-colors">Terms of Service</a></li>
                        <li><a href="#" onclick="event.preventDefault(); navigateTo('privacy')" class="hover:text-white transition-colors">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-slate-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
                <p class="text-sm text-slate-500">&copy; 2025–2026 DDNex Cloud · DDNex · Reg. No. 202603040752 (MA0342542-K)</p>
                <div class="flex gap-4">
                    <a href="https://www.linkedin.com/in/muhammad-danial-danish-217bb82ba/" target="_blank" class="w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center hover:bg-slate-700 transition-colors">
                        <i class="ri-linkedin-fill"></i>
                    </a>
                    <a href="https://www.instagram.com/danialddanish/" target="_blank" class="w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center hover:bg-slate-700 transition-colors">
                        <i class="ri-instagram-line"></i>
                    </a>
                    <a href="https://www.tiktok.com/@ddnet.my/" target="_blank" class="w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center hover:bg-slate-700 transition-colors">
                        <i class="ri-tiktok-line"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- MAIN LOGIC SCRIPT (INTEGRATED) -->
    <script>
        // ==========================================
        // CONFIGURATION
        // ==========================================
        const ADMIN_PHONE_NO = "60122600969";
        const RAZORPAY_KEY_ID = "rzp_live_SEL3cH71UlI5YI";
        const RAZORPAY_CURRENCY = "MYR";

        const firebaseConfig = {
            apiKey: "AIzaSyAwf31b-wpYQwPbd-3DxnqGVRw8g3xq938",
            authDomain: "ddnetwork-database.firebaseapp.com",
            projectId: "ddnetwork-database",
            storageBucket: "ddnetwork-database.firebasestorage.app",
            messagingSenderId: "699127560990",
            appId: "1:699127560990:web:vg8k3pcvhkomoeb99tr333960v6ohj5m."
        };

        const SEO_CONFIG = {
            '/': { title: 'DDNex | Cheap & Professional Website Services Malaysia', desc: 'DDNex offers Cheap & Professional Website Services Malaysia, AI integration, and digital solutions in Malaysia.', canonical: 'https://ddnex.my/' },
            '/home': { title: 'DDNex | Cheap & Professional Website Services Malaysia', desc: 'DDNex offers Cheap & Professional Website Services Malaysia, AI integration, and digital solutions in Malaysia.', canonical: 'https://ddnex.my/' },
            '/pricing': { title: 'Pricing Packages | DDNex', desc: 'Affordable website packages in Malaysia. Choose from Static HTML, Front-End, or AI-Powered solutions.', canonical: 'https://ddnex.my/pricing' },
            '/reviews': { title: 'Client Reviews | DDNex', desc: 'See what our clients say about our web design and digital services. Trusted by Malaysian businesses.', canonical: 'https://ddnex.my/reviews' },
            '/clients': { title: 'Portfolio & Clients | DDNex', desc: 'Explore our portfolio of custom websites and digital solutions built for Malaysian businesses.', canonical: 'https://ddnex.my/clients' },
            '/about': { title: 'About Us - Danial Danish | DDNex', desc: 'Meet Danial Danish, the founder of DDNex and DDNex Cloud. Learn about our vision.', canonical: 'https://ddnex.my/founder-danialdanish' },
            '/terms': { title: 'Terms & Conditions | DDNex', desc: 'Read our terms of service, hosting policies, and refund guidelines.', canonical: 'https://ddnex.my/terms' },
            '/privacy': { title: 'Privacy Policy | DDNex', desc: 'DDNex privacy policy regarding data collection, security, and user rights.', canonical: 'https://ddnex.my/privacy' },
            '/login': { title: 'Login | DDNex', desc: 'Login to your DDNex dashboard to manage your orders and profile.', canonical: 'https://ddnex.my/login' },
            '/signup': { title: 'Sign Up | DDNex', desc: 'Create an account with DDNex to start your digital journey today.', canonical: 'https://ddnex.my/signup' }
        };

        let PRICING_DATA = {
            html: { oneTime: 249, monthly: 39, setupFee: 100, desc: "1 Static Landing Page. Mobile Responsive. Basic SEO." },
            frontend: { oneTime: 1399, monthly: 99, setupFee: 200, desc: "Up to 5 Pages. Animations & Interactive UI." },
            bundle: { oneTime: 3499, monthly: 249, setupFee: 700, desc: "Full website & internal management." },
            ai: { oneTime: 2499, monthly: 149, setupFee: 400, desc: "Advanced automation & chatbots." },
            portal: { oneTime: 3999, monthly: 279, setupFee: 700, desc: "Internal portal for existing sites." }
        };

        // ==========================================
        // STATE VARIABLES
        // ==========================================
        let db, auth;
        let ADMIN_EMAIL = "ddnetwork.one@outlook.com";
        let currentUserPersonalVoucher = null;
        
        // Store package selection if user is not logged in
        let pendingPackage = null; 

        const state = {
            packageType: null, packagePrice: 0, setupFee: 0, domainPrice: 0, maintenancePrice: 0,
            discountRate: 0, discountFixed: 0, discountType: 'percent', discountCode: '',
            domainType: 'sub', domainName: '', domainNameValid: false, billingCycle: 'monthly',
            isOneTime: false, paymentMode: 'full'
        };

        let currentUserRole = 'user'; 
        let selectedRating = 0;
        let PROMO_CODES = {}; 
        let reviewsCache = []; 
        let billingCycle = 'monthly'; 
        let selectedPackage = '';
        let selectedPackageType = '';

        // ==========================================
        // INITIALIZATION
        // ==========================================
        try {
            if(firebaseConfig.apiKey !== "YOUR_API_KEY_HERE") {
                firebase.initializeApp(firebaseConfig);
                db = firebase.firestore();
                auth = firebase.auth();
            }
        } catch(e) { console.error("Firebase init error:", e); }

        function initializeDatabase() {
            if(!db) return;
            const configRef = db.collection("config").doc("site_settings");
            const doc = configRef.get();
            if (!doc.exists) {
                configRef.set({ maintenance_active: false, payment_methods: [] });
            }
        }

        function listenToConfig() {
            if(!db) return;
            db.collection("config").doc("site_settings").onSnapshot((doc) => {
                if (doc.exists) {
                    const data = doc.data();
                    if(data.maintenance_active) document.getElementById('maintenance-overlay').classList.add('active');
                    else document.getElementById('maintenance-overlay').classList.remove('active');
                }
            });
        }

        // ==========================================
        // ROUTER (UPDATED FOR PERFORMANCE)
        // ==========================================
        const routes = {
            '/': 'home', 
            '/home': 'home', 
            '/features': 'features',  
            '/pricing': 'pricing', 
            '/reviews': 'reviews', 
            '/order': 'checkout', // Added 'order' mapping
            '/checkout': 'checkout', // Added 'checkout' mapping to fix routing mismatch
            '/clients': 'portfolio',
            '/founder-danialdanish': 'about', 
            '/about': 'about',       
            '/login': 'login', 
            '/signup': 'signup', 
            '/profile': 'profile',
            '/helpdesk': 'helpdesk', 
            '/contact': 'contact',   
            '/forgot-password': 'forgot-password',
            '/thank-you': 'thank-you', 
            '/updates': 'updates', 
            '/website-idea': 'website-idea',
            '/about-company': 'about', 
            '/terms': 'terms', 
            '/faq': 'faq', 
            '/privacy': 'privacy'
        };

        function routeLink(event, path) { event.preventDefault(); navigateTo(path); }

        function navigateTo(path) {
            if (!path.startsWith('/')) path = '/' + path;

            const sectionId = routes[path];
            if (!sectionId) return console.warn(`Route not found for path: ${path}`);
            
            window.history.pushState({ path: path }, "", path);
            updatePageSEO(path);
            performTransition(sectionId);
        }

        window.addEventListener('popstate', (event) => {
            if (event.state && event.state.path) {
                performTransition(routes[event.state.path]);
                updatePageSEO(event.state.path);
            } else {
                const path = window.location.pathname;
                const target = routes[path] || 'home'; 
                performTransition(target);
                updatePageSEO(path);
            }
        });

        function handleInitialRoute() {
            const path = window.location.pathname;
            const target = routes[path] || 'home'; 
            performTransition(target, true);
            updatePageSEO(path); 
        }

        let isTransitioning = false;

        // OPTIMIZED: Removed setTimeout delays for instant switching
        function performTransition(targetSectionId, isInstant = false) {
            if (isTransitioning) return;
            isTransitioning = true;

            const currentSection = document.querySelector('.page.active');
            const targetSection = document.getElementById(`page-${targetSectionId}`);

            if (currentSection === targetSection) {
                isTransitioning = false;
                return;
            }

            // Hide current immediately
            if (currentSection) {
                currentSection.classList.remove('active');
                setTimeout(() => { 
                    currentSection.style.display = 'none';
                }, 10);
            }

            // Show new immediately
            window.scrollTo(0, 0);
            targetSection.style.display = 'block';
            void targetSection.offsetWidth; 
            targetSection.classList.add('active');

            // Page specific logic
            if(targetSectionId === 'profile') loadProfilePageData();
            if(targetSectionId === 'reviews' || targetSectionId === 'home') {
                if(reviewsCache.length === 0) listenToReviews(); 
            }
            if(targetSectionId === 'checkout' && auth && auth.currentUser) fetchAndSyncUserData(auth.currentUser.uid);
            if(targetSectionId === 'updates' && auth && auth.currentUser) fetchAndSyncUserData(auth.currentUser.uid);
            if(targetSectionId === 'home') {
                loadHomePortfolio();
            }
            if(targetSectionId === 'portfolio') loadPortfolio();

            isTransitioning = false;
        }
    
        setTimeout(handleInitialRoute, 100);

        function updatePageSEO(path) {
            const config = SEO_CONFIG[path];
            if(config) {
                document.title = config.title;
                document.querySelector('meta[name="description"]').setAttribute("content", config.desc);
                document.querySelector('link[rel="canonical"]').setAttribute("href", config.canonical);
            }
        }

        // ==========================================
        // TOAST NOTIFICATION SYSTEM
        // ==========================================
                function showToast(message, type = 'info') {
            let title = "Notice";
            let iconClass = "ri-information-line";
            
            if (type === 'success') {
                title = "Success";
                iconClass = "ri-checkbox-circle-fill";
            } else if (type === 'error') {
                title = "Error";
                iconClass = "ri-close-circle-fill";
            } else if (type === 'warning') {
                title = "Warning";
                iconClass = "ri-error-warning-fill";
            }
            
            const container = document.getElementById('toastContainer');
            if(!container) return;
            const toast = document.createElement('div');
            toast.className = `toast-item toast-${type}`;
            toast.innerHTML = `
                <i class="toast-icon ${iconClass}"></i>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <i class="ri-close-line toast-close" onclick="this.parentElement.remove()"></i>
            `;
            
            container.appendChild(toast);
            
            // Animation frame for smooth entry
            requestAnimationFrame(() => {
                setTimeout(() => {
                    toast.classList.add('show');
                }, 10);
            });
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if(toast.parentElement) toast.remove();
                }, 500);
            }, 4000);
        }

        // ==========================================
        // MODALS & ALERTS
        // ==========================================
        function showAuthModal() {
            const modal = document.getElementById('auth-modal');
            if(modal) modal.classList.add('active');
        }

        function closeAuthModal() {
            const modal = document.getElementById('auth-modal');
            if(modal) modal.classList.remove('active');
        }

        function showGlassModal(title, message, type = 'info', btnText = 'Okay', callback = null) {
            // Simple fallback using browser alert if modal structure isn't fully loaded for some reason
            // but primarily relying on the generic success-modal logic if available or toast.
            // For this file structure, we'll use the generic Success Modal for simplicity or Toasts.
            if(type === 'error' || type === 'warning') {
                showToast(message, type);
            } else {
                showToast(message, 'success');
                if(callback) setTimeout(callback, 1000);
            }
        }

        // ==========================================
        // AUTH LOGIC
        // ==========================================
        function handleLogin(e) {
            e.preventDefault();
            if(!auth) return showToast("Error", "Authentication system initializing...", "error");
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            auth.signInWithEmailAndPassword(email, password).then(() => {
                const user = auth.currentUser;
                triggerLoginSuccessAnimation(() => {
                    // Check if user was trying to buy a package
                    if (pendingPackage) {
                        selectPackage(pendingPackage.name, pendingPackage.type);
                        pendingPackage = null; // Clear intent
                    } else {
                        navigateTo('/');
                    }
                }, user.displayName || user.email.split('@')[0]);
            }).catch((error) => {
                const friendlyMsg = getFirebaseErrorMessage(error);
                showToast(friendlyMsg, "error");
            });
        }

        function handleSignup(e) {
            e.preventDefault();
            if(!auth) return showToast("Error", "Firebase not configured", "error");
            
            const name = document.getElementById('signup-name').value;
            const phone = document.getElementById('signup-phone').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            
            auth.createUserWithEmailAndPassword(email, password).then((userCredential) => {
                return db.collection("users").doc(userCredential.user.uid).set({ 
                    name: name, phone: phone, email: email, role: 'user',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp() 
                });
            }).then(() => {
                triggerLoginSuccessAnimation(() => {
                     // Check if user was trying to buy a package
                    if (pendingPackage) {
                        selectPackage(pendingPackage.name, pendingPackage.type);
                        pendingPackage = null; // Clear intent
                    } else {
                        navigateTo('/');
                    }
                }, name);
            }).catch((error) => {
                const friendlyMsg = getFirebaseErrorMessage(error);
                showToast(friendlyMsg, "error");
            });
        }

        function handleGoogleAuth() {
            if(!auth) return showToast("Error", "Auth not initialized", "error");
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider).then((result) => {
                const user = result.user;
                db.collection("users").doc(user.uid).get().then((doc) => {
                    if (!doc.exists) {
                        return db.collection("users").doc(user.uid).set({
                            name: user.displayName || 'Google User', email: user.email, phone: '', role: 'user',
                            createdAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                    }
                }).then(() => {
                    const name = user.displayName || user.email.split('@')[0];
                    triggerLoginSuccessAnimation(() => {
                        if (pendingPackage) {
                            selectPackage(pendingPackage.name, pendingPackage.type);
                            pendingPackage = null;
                        } else {
                            navigateTo('/');
                        }
                    }, name);
                });
            }).catch((error) => {
                console.error(error);
                const friendlyMsg = getFirebaseErrorMessage(error);
                showToast(friendlyMsg, "error");
            });
        }

        function triggerLoginSuccessAnimation(onCompleteCallback, userName) {
            showToast(`Welcome back, ${userName}!`, "success");
            if(onCompleteCallback) {
                setTimeout(() => onCompleteCallback(), 1000);
            }
        }

        function getFirebaseErrorMessage(error) {
            switch (error.code) {
                case 'auth/user-not-found': return "No account found with this email address.";
                case 'auth/wrong-password': return "Incorrect password. Please try again.";
                case 'auth/invalid-login-credentials': return "Invalid email or password. Please try again.";
                case 'auth/invalid-credential': return "The provided credentials are invalid.";
                case 'auth/email-already-in-use': return "This email is already registered. Please login.";
                case 'auth/weak-password': return "Password should be at least 6 characters.";
                case 'auth/invalid-email': return "Please enter a valid email address.";
                case 'auth/too-many-requests': return "Access temporarily disabled due to many failed attempts. Reset password or try later.";
                case 'auth/user-disabled': return "This account has been disabled. Contact support.";
                case 'auth/popup-closed-by-user': return "Sign-in process was cancelled.";
                case 'auth/network-request-failed': return "Network error. Please check your connection.";
                default: return "An unexpected error occurred. Please try again.";
            }
        }

        // ==========================================
        // PROFILE & AUTH STATE LISTENER
        // ==========================================
        function loadProfilePageData() {
            if(!auth || !auth.currentUser) return;
            const profFields = ['prof-name', 'prof-phone', 'prof-email', 'prof-company'];
            profFields.forEach(id => document.getElementById(id).value = "Loading...");
            db.collection("users").doc(auth.currentUser.uid).get().then((doc) => {
                if (doc.exists) {
                    const data = doc.data();
                    if(data.name) document.getElementById('prof-name').value = data.name;
                    if(data.phone) document.getElementById('prof-phone').value = data.phone;
                    if(data.email) document.getElementById('prof-email').value = data.email || auth.currentUser.email;
                    if(data.company) document.getElementById('prof-company').value = data.company;
                    if(data.personalVoucher) { currentUserPersonalVoucher = data.personalVoucher; showVoucherCard(data.personalVoucher); } 
                    else { currentUserPersonalVoucher = null; hideVoucherCard(); }
                    loadOrderHistory(auth.currentUser.uid);
                }
            }).catch((error) => showToast("Error", "Error loading profile data.", "error"));
        }

        function loadOrderHistory(uid) {
            if(!db) return;
            const tbody = document.getElementById('order-history-body');
            const noMsg = document.getElementById('no-orders');
            
            if(tbody) tbody.innerHTML = '<tr><td colspan="4" style="text-align:center;">Loading...</td></tr>';

            db.collection("orders").where("userId", "==", uid).orderBy("timestamp", "desc").limit(10)
                .onSnapshot((snapshot) => {
                    if(tbody) tbody.innerHTML = '';
                    if (snapshot.empty) {
                        if(noMsg) noMsg.classList.remove('hidden');
                        if(tbody) tbody.parentElement.style.display = 'none';
                    } else {
                        if(noMsg) noMsg.classList.add('hidden');
                        if(tbody) tbody.parentElement.style.display = 'table';
                        snapshot.forEach((doc) => {
                            const data = doc.data();
                            const date = data.timestamp ? new Date(data.timestamp.seconds * 1000).toLocaleDateString() : '-';
                            const total = data.total || 'RM 0';
                            const pkg = data.package || 'Unknown Package';
                            const status = data.status || 'Pending';
                            let statusClass = 'status-pending';
                            if(status === 'Paid') statusClass = 'status-paid';
                            if(status === 'Completed') statusClass = 'status-completed';
                            if(status === 'Cancelled') statusClass = 'status-cancelled';
                            
                            const row = `<tr><td>${date}</td><td style="font-weight:600; color:var(--text-main);">${pkg}</td><td>${total}</td><td><span class="status-badge ${statusClass}">${status}</span></td></tr>`;
                            if(tbody) tbody.innerHTML += row;
                        });
                    }
                });
        }

        function showVoucherCard(voucher) {
            const section = document.getElementById('profile-voucher-section');
            const text = document.getElementById('profile-voucher-text');
            const actionBtn = document.getElementById('profile-voucher-action');
            if(!section || !text || !actionBtn) return;

            section.style.display = 'block';
            const displayVal = voucher.type === 'fixed' ? `RM ${voucher.value}` : `${voucher.value * 100}%`;
            let expiryText = voucher.expiryDate ? ` | Exp: ${voucher.expiryDate.toDate().toLocaleDateString()}` : "";
            text.innerText = `Code: ${voucher.code} | Value: ${displayVal}${expiryText}`;
            if (voucher.status === 'redeemed') {
                document.getElementById('profile-voucher-title').innerText = "Voucher Redeemed";
                text.style.textDecoration = 'line-through';
                actionBtn.innerHTML = '<span style="color:var(--accent-success); font-weight:700; border:1px solid var(--accent-success); padding:4px 12px; border-radius:20px; font-size:0.8rem;">USED</span>';
            } else {
                document.getElementById('profile-voucher-title').innerText = "You have a Gift Voucher!";
                actionBtn.innerHTML = '<button type="button" class="btn btn-danger" style="width: auto; padding: 0.6rem 1.2rem;" onclick="deletePersonalVoucher()">Delete</button>';
            }
        }

        function hideVoucherCard() {
            const section = document.getElementById('profile-voucher-section');
            if(section) section.style.display = 'none';
        }

        function handleProfileUpdate(e) {
            e.preventDefault();
            if(!auth || !auth.currentUser) return;
            const name = document.getElementById('prof-name').value;
            const phone = document.getElementById('prof-phone').value;
            const company = document.getElementById('prof-company').value;
            db.collection("users").doc(auth.currentUser.uid).update({ name: name, phone: phone, company: company })
            .then(() => {
                showToast("Profile Updated Successfully!", "success");
                fetchAndSyncUserData(auth.currentUser.uid);
            }).catch((error) => showToast("Error", error.message, "error"));
        }

        function deletePersonalVoucher() {
            if(!auth || !auth.currentUser) return;
            if(confirm("Are you sure you want to remove this voucher?")) {
                db.collection("users").doc(auth.currentUser.uid).update({ personalVoucher: firebase.firestore.FieldValue.delete() }).then(() => {
                    currentUserPersonalVoucher = null; 
                    loadProfilePageData();
                    fetchAndSyncUserData(auth.currentUser.uid);
                    showToast("Voucher removed from account.", "success");
                });
            }
        }

        function handleLogout() {
            if(auth) { 
                currentUserPersonalVoucher = null; 
                auth.signOut().then(() => { 
                    showToast("Logged out", "success"); 
                    navigateTo('/'); 
                }); 
            }
        }

        // Auth State Listener (Combined logic)
        if(auth) {
            auth.onAuthStateChanged((user) => {
                if (user) {
                    db.collection("users").doc(user.uid).get().then((doc) => {
                        if (doc.exists) {
                            const data = doc.data();
                            currentUserRole = data.role || 'user'; 
                            updateHeaderForUser(user); 
                            if(data.personalVoucher) { currentUserPersonalVoucher = data.personalVoucher; showVoucherCard(data.personalVoucher); } 
                            else { currentUserPersonalVoucher = null; hideVoucherCard(); }
                            fetchAndSyncUserData(user.uid);
                            if(!data.phone) {
                                showToast("Please complete your profile (Phone Number).", "warning");
                                if(window.location.pathname !== '/profile') setTimeout(() => navigateTo('/profile'), 1000);
                            }
                        }
                    });
                } else {
                    updateHeaderForGuest(); 
                    clearUserData(); 
                    hideVoucherCard();
                }
            });
        }

        function updateHeaderForUser(user) {
            const isAdmin = currentUserRole === 'admin';
            const deskAuth = document.getElementById('desktopAuthLinks');
            if(deskAuth) {
                let userControls = `<a href="#" onclick="navigateTo('/profile')" class="hidden md:flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-slate-900"><i class="ri-user-line"></i> Profile</a><span class="logout-btn hidden md:block text-slate-600 cursor-pointer transition: 0.2s white-space-nowrap;" onclick="handleLogout()">Logout</span>`;
                if (isAdmin) userControls = `<a href="admin.html" target="_blank" class="admin-link" title="Admin Portal"><i class="ri-shield-user-fill"></i></a><span style="color:var(--text-tertiary); margin: 0 10px;">|</span>${userControls}`;
                deskAuth.innerHTML = userControls;
            }
            
            const mobAuth = document.getElementById('mobileAuthLinksContainer');
            if(mobAuth) {
                let authButtons = `<a href="/profile" onclick="routeLink(event, '/profile'); toggleMobileMenu()" class="mobile-nav-link" style="justify-content: flex-start; border-top:1px solid var(--border-glass);"><i class="ri-user-fill" style="margin-right:15px;"></i> Profile</a>`;
                if (isAdmin) authButtons += `<a href="admin.html" target="_blank" onclick="toggleDrawer()" class="mobile-nav-link" style="justify-content: flex-start;"><i class="ri-shield-user-fill" style="margin-right:15px; color:var(--accent-warn);"></i> Admin</a>`;
                authButtons += `<a href="#" onclick="handleLogout(); toggleDrawer()" class="mobile-nav-link" style="justify-content: flex-start; color: var(--accent-warn);"><i class="ri-logout-box-r-fill" style="margin-right:15px;"></i> Logout</a>`;
                mobAuth.innerHTML = authButtons;
            }
        }

        function updateHeaderForGuest() {
            const deskAuth = document.getElementById('desktopAuthLinks');
            if(deskAuth) deskAuth.innerHTML = `<a href="/login" onclick="navigateTo('login')" class="btn-glass" style="padding: 0.6rem 1.2rem; border-radius: 50px; background: white; color: var(--text-main); border:1px solid var(--border-glass);"><i class="ri-login-circle-fill"></i> Login</a>`;
            const mobAuth = document.getElementById('mobileAuthLinksContainer');
            if(mobAuth) mobAuth.innerHTML = `<a href="/login" onclick="navigateTo('login'); toggleDrawer()" class="mobile-nav-link" style="justify-content: flex-start; border-top:1px solid var(--border-glass);"><i class="ri-login-circle-fill" style="margin-right:15px;"></i> Login</a><a href="/signup" onclick="navigateTo('signup'); toggleDrawer()" class="mobile-nav-link" style="justify-content: flex-start;"><i class="ri-user-add-fill" style="margin-right:15px;"></i> Sign Up</a>`;
        }

        // Helper to clear data
        function clearUserData() {
            const inputs = ['prof-name', 'prof-phone', 'prof-email', 'prof-company', 'co-firstname', 'co-lastname', 'co-email', 'co-company'];
            inputs.forEach(id => { const el = document.getElementById(id); if(el) el.value = ''; });
            const label = document.getElementById('auto-fill-label'); if(label) label.style.display = 'none';
        }

        // ==========================================
        // PRICING & CHECKOUT LOGIC
        // ==========================================
        function setBilling(cycle) {
            billingCycle = cycle;
            // New HTML uses buttons, so we toggle their classes directly
            const btnMonthly = document.getElementById('btn-monthly');
            const btnOnetime = document.getElementById('btn-onetime');

            if(btnMonthly && btnOnetime) {
                if(cycle === 'monthly') { 
                    btnMonthly.classList.add('bg-slate-800', 'text-white'); 
                    btnOnetime.classList.remove('bg-slate-800', 'text-white'); 
                } else { 
                    btnMonthly.classList.remove('bg-slate-800', 'text-white'); 
                    btnOnetime.classList.add('bg-slate-800', 'text-white'); 
                }
            }

            // Update Prices in UI
            document.querySelectorAll('.price-display').forEach(el => {
                // In new HTML, data attributes are used
                const monthly = el.dataset.monthly;
                const onetime = el.dataset.onetime;
                if (monthly && onetime) {
                    el.textContent = 'RM ' + (cycle === 'monthly' ? monthly : onetime);
                    el.parentElement.querySelector('.price-period').textContent = cycle === 'monthly' ? '/month' : ' one-time';
                }
            });

            // Toggle Maintenance visibility
            document.querySelectorAll('.maintenance-yes').forEach(el => el.classList.toggle('hidden', cycle === 'onetime'));
            document.querySelectorAll('.maintenance-no').forEach(el => el.classList.toggle('hidden', cycle === 'monthly'));

            // Update State
            state.billingCycle = cycle;
            state.isOneTime = (cycle === 'onetime');
            
            // If on checkout page, update totals
            if(selectedPackageType && PRICING_DATA[selectedPackageType]) {
                state.packagePrice = cycle === 'monthly' ? PRICING_DATA[selectedPackageType].monthly : PRICING_DATA[selectedPackageType].oneTime;
                // Re-calculate total
                updateTotal();
            }
        }

        function attemptSelectPackage(name, type) {
            // Logic: Check login first. If not logged in, save intent and show modal.
            if (typeof auth === 'undefined' || auth === null) { showToast("Error", "Authentication system initializing...", "error"); return; }
            
            if (auth.currentUser) { 
                selectPackage(name, type); 
            } else { 
                pendingPackage = { name, type };
                showAuthModal(); 
            }
        }

        function selectPackage(name, type) {
            selectedPackage = name;
            selectedPackageType = type;
            state.packageType = type;
            state.billingCycle = billingCycle;
            state.isOneTime = (billingCycle === 'onetime');
            state.paymentMode = 'full';
            state.setupFee = PRICING_DATA[type].setupFee;
            state.packagePrice = billingCycle === 'monthly' ? PRICING_DATA[type].monthly : PRICING_DATA[type].oneTime;

            // UI Updates for Checkout
            const summaryPkgName = document.getElementById('summary-pkg-name');
            const summaryPkgPrice = document.getElementById('summary-pkg-price');
            const summaryBillingType = document.getElementById('summary-billing-type');

            if(summaryPkgName) summaryPkgName.textContent = name;
            if(summaryPkgPrice) summaryPkgPrice.textContent = billingCycle === 'monthly' ? `RM ${state.packagePrice}/month` : `RM ${state.packagePrice} one-time`;
            if(summaryBillingType) summaryBillingType.textContent = billingCycle === 'monthly' ? 'Billed monthly. Cancel anytime.' : 'One-time purchase. No maintenance included.';

            // Auto-fill data if logged in
            if(auth && auth.currentUser) fetchAndSyncUserData(auth.currentUser.uid);
            else { clearUserData(); hideVoucherCard(); }

            updateTotal();
            navigateTo('checkout');
        }

        function fetchAndSyncUserData(uid) {
            if(!db) return;
            db.collection("users").doc(uid).get().then((doc) => {
                if (doc.exists) {
                    const data = doc.data();
                    // Sync inputs if they exist
                    if(document.getElementById('co-firstname')) document.getElementById('co-firstname').value = data.name || '';
                    if(document.getElementById('co-lastname')) document.getElementById('co-lastname').value = ''; 
                    if(document.getElementById('co-email')) {
                        document.getElementById('co-email').value = data.email || auth.currentUser.email;
                        document.getElementById('co-email').readOnly = true; // Lock email
                    }
                    if(document.getElementById('co-phone')) document.getElementById('co-phone').value = data.phone || '';
                    if(document.getElementById('co-company')) document.getElementById('co-company').value = data.company || '';
                    
                    if(data.personalVoucher) { 
                        currentUserPersonalVoucher = data.personalVoucher; 
                        // Show in checkout if applicable
                        const checkoutVoucherSection = document.getElementById('checkout-voucher-section');
                        if(checkoutVoucherSection) {
                            checkoutVoucherSection.style.display = 'block';
                            const displayVal = data.personalVoucher.type === 'fixed' ? `RM ${data.personalVoucher.value}` : `${data.personalVoucher.value * 100}%`;
                            document.getElementById('checkout-voucher-text').innerText = `${data.personalVoucher.code} (-${displayVal})`;
                        }
                    } else { 
                        currentUserPersonalVoucher = null; 
                        if(document.getElementById('checkout-voucher-section')) document.getElementById('checkout-voucher-section').style.display = 'none';
                    }
                }
            });
        }

        function updateDomain(type, element) {
            state.domainType = type;
            if(element) {
                const options = element.parentElement.querySelectorAll('.radio-option');
                options.forEach(opt => opt.classList.remove('selected'));
                element.classList.add('selected');
                // Check radio input
                const input = element.querySelector('input');
                if(input) input.checked = true;
            }
            
            if(type === 'sub') {
                if(document.getElementById('input-subdomain')) document.getElementById('input-subdomain').style.display = 'block';
                if(document.getElementById('input-custom')) document.getElementById('input-custom').style.display = 'none';
                state.domainPrice = 0; 
            } else {
                if(document.getElementById('input-subdomain')) document.getElementById('input-subdomain').style.display = 'none';
                if(document.getElementById('input-custom')) document.getElementById('input-custom').style.display = 'block';
                state.domainPrice = 0; 
            }
            updateSummaryText(); updateTotal();
        }

        function updateSummaryText() {
            if(state.domainType === 'sub') {
                const val = document.getElementById('subdomain-text') ? document.getElementById('subdomain-text').value : '';
                state.domainName = val ? `${val}.ddnex.my` : '';
                if(document.getElementById('url-preview')) document.getElementById('url-preview').innerText = state.domainName || '.ddnex.my';
                state.domainNameValid = (val.length > 0);
            } else {
                const val = document.getElementById('custom-domain-text') ? document.getElementById('custom-domain-text').value : '';
                state.domainName = val;
                state.domainNameValid = (val.length > 0);
            }
            // Update Summary UI text
            if(document.getElementById('summary-domain')) {
                document.getElementById('summary-domain').innerText = state.domainType === 'sub' ? 'Free' : (val ? 'User Provided' : 'RM 0');
            }
        }

        function updateMaintenance(plan, element) {
            const options = element.parentElement.querySelectorAll('.radio-option');
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            const input = element.querySelector('input');
            if(input) input.checked = true;
            
            if(plan === 'none') state.maintenancePrice = 0;
            if(plan === 'basic') state.maintenancePrice = 50;
            if(plan === 'business') state.maintenancePrice = 100;
            
            // Update UI
            const label = plan === 'none' ? 'None' : (plan === 'basic' ? 'Basic (RM 50/mo)' : 'Business (RM 100/mo)');
            if(document.getElementById('summary-maintenance')) document.getElementById('summary-maintenance').innerText = label;
            updateTotal();
        }

        function applyPromo() {
            if(!auth || !auth.currentUser) return showToast("Please login to use Promo Codes.", "error");
            const input = document.getElementById('promo-input');
            const code = input ? input.value.trim().toUpperCase() : '';
            
            if(!code || code === "") {
                showToast("Please enter a voucher code first.", "error");
                if(input) input.focus(); 
                return;
            }
            
            if(PROMO_CODES.hasOwnProperty(code)) {
                state.discountType = 'percent';
                state.discountRate = PROMO_CODES[code];
                state.discountCode = code;
                showToast(`Promo Applied: ${code}`, "success");
                if(document.getElementById('row-discount')) {
                    document.getElementById('row-discount').style.display = 'flex';
                    document.getElementById('summary-promo-code').innerText = code;
                    document.getElementById('summary-discount-val').innerText = `-${state.discountRate * 100}%`;
                }
                updateTotal();
            } else {
                showToast("Invalid code. Please check and try again.", "error");
            }
        }

        function applyPersonalVoucher() {
            if(!currentUserPersonalVoucher) return; 
            if(currentUserPersonalVoucher.status === 'redeemed') return showToast("This voucher has already been used.", "error");
            if(currentUserPersonalVoucher.expiryDate) {
                const now = new Date();
                const expiry = currentUserPersonalVoucher.expiryDate.toDate();
                if(now > expiry) return showToast("This voucher has expired.", "error");
            }
            state.discountType = currentUserPersonalVoucher.type;
            state.discountCode = currentUserPersonalVoucher.code;
            if(state.discountType === 'fixed') { state.discountFixed = currentUserPersonalVoucher.value; state.discountRate = 0; } 
            else { state.discountRate = currentUserPersonalVoucher.value; state.discountFixed = 0; }
            
            showToast(`Voucher ${state.discountCode} Applied!`, "success");
            if(document.getElementById('row-discount')) {
                document.getElementById('row-discount').style.display = 'flex';
                document.getElementById('summary-promo-code').innerText = state.discountCode;
                const displayVal = state.discountType === 'fixed' ? `RM ${state.discountFixed}` : `${state.discountRate * 100}%`;
                document.getElementById('summary-discount-val').innerText = `-${displayVal}`;
            }
            updateTotal();
        }

        function deletePersonalVoucher() {
            // Re-defined to prevent scope issues if function is hoisted differently
             if(!auth || !auth.currentUser) return;
            if(confirm("Are you sure you want to remove this voucher?")) {
                db.collection("users").doc(auth.currentUser.uid).update({ personalVoucher: firebase.firestore.FieldValue.delete() }).then(() => {
                    currentUserPersonalVoucher = null;
                    loadProfilePageData();
                    fetchAndSyncUserData(auth.currentUser.uid);
                    showToast("Voucher removed from account.", "success");
                });
            }
        }

        function removeVoucher() {
            state.discountCode = ''; state.discountRate = 0; state.discountFixed = 0;
            if(document.getElementById('row-discount')) document.getElementById('row-discount').style.display = 'none';
            showToast("Voucher removed", "warning");
            updateTotal();
            if(currentUserPersonalVoucher) applyPersonalVoucher(); // Re-apply personal if exists but removed global
        }

        function updateTotal() {
            let subtotal = state.packagePrice + state.setupFee + state.maintenancePrice;
            if(state.domainType === 'sub') subtotal += state.domainPrice; 
            
            let discountAmt = 0;
            if(state.discountType === 'fixed') discountAmt = state.discountFixed;
            else discountAmt = subtotal * state.discountRate;
            
            const finalTotal = Math.max(0, Math.round(subtotal - discountAmt));
            
            // Update UI Elements if they exist
            if(document.getElementById('summary-final-total')) document.getElementById('summary-final-total').innerText = `RM ${finalTotal}`;
            if(document.getElementById('summary-package-price')) document.getElementById('summary-package-price').innerText = `RM ${state.packagePrice}`;
            if(document.getElementById('summary-setup')) document.getElementById('summary-setup').innerText = state.setupFee > 0 ? `RM ${state.setupFee}` : 'RM 0';
            
            // Set specific discounts for billing toggle visual
            if(document.getElementById('summary-recurring')) document.getElementById('summary-recurring').innerText = `RM ${state.packagePrice} / ${state.isOneTime ? 'one-time' : 'month'}`;
            
            // Apply deposit logic if needed (from old HTML, though new HTML might not have deposit UI, keeping logic)
            let paymentDue = finalTotal;
            // state.paymentMode logic is preserved from old HTML
            
            if(document.getElementById('summary-discount')) {
                 document.getElementById('summary-discount').innerText = `-${Math.round(discountAmt)}`;
            }
        }

        // ==========================================
        // RAZORPAY INTEGRATION
        // ==========================================
        function initiateRazorpayPayment() {
            const termsCheck = document.getElementById('terms-check');
            if(!termsCheck || !termsCheck.checked) {
                showToast("Please agree to Terms & Conditions to proceed.", "warning");
                return;
            }

            if(!state.domainNameValid) {
                if(state.domainType === 'sub') {
                    showToast("Please fill in your Subdomain Name.", "warning");
                    const subInput = document.getElementById('subdomain-text');
                    if(subInput) subInput.focus();
                } else {
                    showToast("Please fill in your Custom Domain Name.", "warning");
                    const customInput = document.getElementById('custom-domain-text');
                    if(customInput) customInput.focus();
                }
                return;
            }

            // Gather Data
            const name = (document.getElementById('co-firstname').value || '') + ' ' + (document.getElementById('co-lastname').value || '');
            const phone = document.getElementById('co-phone') ? document.getElementById('co-phone').value : '';
            const email = document.getElementById('co-email') ? document.getElementById('co-email').value : '';
            
            if(!name || !phone || !email) return showToast("Please enter Name, Phone, and Email.", "error");

            const totalText = document.getElementById('summary-final-total') ? document.getElementById('summary-final-total').innerText : 'RM 0';
            const amountNumeric = parseFloat(totalText.replace('RM ', ''));
            const amountInSubunits = Math.round(amountNumeric * 100);

            const pendingOrder = {
                userId: auth.currentUser ? auth.currentUser.uid : null,
                name: name, phone: phone, email: email, 
                package: selectedPackage || document.getElementById('summary-pkg-name').innerText, 
                domainType: state.domainType, domainName: state.domainName, domainPrice: state.domainPrice,
                packagePrice: state.packagePrice, setupFee: state.setupFee, maintenancePrice: state.maintenancePrice,
                total: `RM ${amountNumeric}`, 
                discountCode: state.discountCode || null, paymentMethod: 'Razorpay (Curlec)',
                paymentMode: state.paymentMode, billingCycle: state.isOneTime ? 'One-Time' : 'Monthly',
                status: 'Pending', timestamp: firebase.firestore.FieldValue.serverTimestamp()
            };

            localStorage.setItem('pendingOrder', JSON.stringify(pendingOrder));

            const options = {
                "key": RAZORPAY_KEY_ID, "amount": amountInSubunits, "currency": RAZORPAY_CURRENCY, 
                "name": "DDNex",
                "description": document.getElementById('summary-pkg-name').innerText + (state.paymentMode === 'deposit' ? " (Deposit)" : ""),
                "image": "https://raw.githubusercontent.com/ddnetwork-one/ddnetwork-store/refs/heads/main/crop_ddnlogo.png",
                "handler": function(response){ 
                    handlePaymentSuccess(response.razorpay_payment_id);
                },
                "modal": { 
                    "ondismiss": function(){ 
                        console.log('Checkout form closed/cancelled by user');
                        if(document.getElementById('btn-pay-now')) document.getElementById('btn-pay-now').classList.add('hidden');
                        if(document.getElementById('manual-confirm-section')) document.getElementById('manual-confirm-section').classList.add('hidden');
                        if(document.getElementById('payment-failed-section')) document.getElementById('payment-failed-section').classList.remove('hidden');
                    }
                },
                "prefill": { "name": name, "email": email, "contact": phone },
                "notes": { "address": document.getElementById('co-company').value || "Malaysia", "package": selectedPackage, "domain": state.domainName, "payment_mode": state.paymentMode },
                "theme": { "color": "#1e293b" }
            };

            try {
                const rzp1 = new Razorpay(options);
                rzp1.open(); 
                
                if(document.getElementById('btn-pay-now')) document.getElementById('btn-pay-now').classList.add('hidden');
                if(document.getElementById('manual-confirm-section')) document.getElementById('manual-confirm-section').classList.remove('hidden');
                if(document.getElementById('payment-failed-section')) document.getElementById('payment-failed-section').classList.add('hidden');

            } catch (error) {
                console.error("Razorpay Error:", error);
                showToast("Payment Gateway Error. Please contact support.", "error");
            }
        }

        function handlePaymentSuccess(paymentId) {
            const pendingOrderStr = localStorage.getItem('pendingOrder');
            if(!pendingOrderStr) {
                showToast("Order data missing. Contact support.", "error");
                return;
            }

            const orderData = JSON.parse(pendingOrderStr);
            
            orderData.razorpay_payment_id = paymentId;
            orderData.status = 'Paid'; 
            
            const overlay = document.getElementById('processing-overlay');
            if(overlay) {
                overlay.style.display = 'flex';
                const msgEl = document.getElementById('process-message');
                if(msgEl) msgEl.innerHTML = `<div style="font-size:1.5rem; margin-bottom:1rem;"><i class="ri-loader-4-line ri-spin"></i></div> Processing Payment...`;
            }

            let voucherUpdatePromise = Promise.resolve();
            if (orderData.discountCode && auth.currentUser && auth.currentUser.uid) {
                voucherUpdatePromise = db.collection("users").doc(auth.currentUser.uid).update({
                    "personalVoucher.status": "redeemed"
                }).then(() => {
                    console.log("Voucher status updated to redeemed.");
                    if(currentUserPersonalVoucher) currentUserPersonalVoucher.status = 'redeemed';
                }).catch(err => console.error("Failed to update voucher status", err));
            }

            voucherUpdatePromise.then(() => {
                const firebaseOrderData = {
                    adminNote: "OWN COMPANY CREATED", companyName: orderData.companyName || "DDNex One",
                    customerEmail: orderData.email, customerName: orderData.name, customerPhone: orderData.phone,
                    domain: orderData.domainName, internalNotes: "",
                    maintenance: orderData.maintenancePrice > 0 ? (orderData.maintenancePrice === 50 ? "Basic" : "Business") : "None",
                    package: orderData.package, paymentMethod: "Razorpay (Curlec)", promo: orderData.discountCode || "",
                    razorpay_payment_id: paymentId,
                    salesRepIds: [], salesTeamIds: [], salesTeamNames: [], status: "Paid",
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(), total: orderData.total, userId: orderData.userId || ""
                };
                return db.collection("orders").add(firebaseOrderData);
            }).then(() => {
                localStorage.removeItem('pendingOrder');
                showToast("Payment Successful!", "success");
                if(overlay) overlay.style.display = 'none';
                navigateTo('thank-you');
            }).catch((error) => {
                console.error("Order Error:", error);
                showToast("Order processing failed. Please contact support.", "error");
                if(overlay) overlay.style.display = 'none';
                if(document.getElementById('manual-confirm-section')) document.getElementById('manual-confirm-section').style.display = 'block';
            });
        }

        function handleManualConfirmation() {
            const pendingOrderStr = localStorage.getItem('pendingOrder');
            if(!pendingOrderStr) {
                showToast("Order data missing. Please start over.", "error");
                navigateTo('pricing');
                return;
            }
            handlePaymentSuccess('MANUAL_CHECK_' + Date.now());
        }

        // ==========================================
        // HELPDESK LOGIC
        // ==========================================
        async function generateSmartTicketId() {
            if(!db) return `#Ticket-${Math.floor(1000 + Math.random() * 9000)}`;
            try {
                const snapshot = await db.collection("tickets").where("ticketId", "!=", null).orderBy("ticketId", "desc").limit(1).get();
                let nextNumber =1;
                if (!snapshot.empty) {
                    const lastTicket = snapshot.docs[0].data();
                    const parts = lastTicket.ticketId.split('-');
                    const lastNum = parseInt(parts[1]);
                    if (!isNaN(lastNum)) nextNumber = lastNum + 1;
                }
                const idString = String(nextNumber).padStart(4, '0');
                return `#Ticket-${idString}`;
            } catch (error) { return `#Ticket-${Math.floor(1000 + Math.random() * 9000)}`; }
        }

        async function handleTicketSubmit(e) {
            e.preventDefault();
            if(!db) return showToast("Database offline", "error");
            const btn = document.getElementById('btn-submit-ticket');
            const name = document.getElementById('ticket-name').value;
            const email = document.getElementById('ticket-email').value;
            const type = document.getElementById('ticket-type').value;
            const message = document.getElementById('ticket-message').value;
            if(!name || !email || !type || !message) return showToast("Please fill in all fields.", "error");

            if(btn) { btn.disabled = true; btn.innerHTML = '<i class="ri-loader-4-line ri-spin"></i> Generating ID...'; }

            try {
                const smartId = await generateSmartTicketId();
                const ticketData = {
                    ticketId: smartId, name: name, email: email, type: type, message: message, status: "Open",
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(), userId: auth.currentUser ? auth.currentUser.uid : null
                };
                await db.collection("tickets").add(ticketData);
                if(document.getElementById('display-case-id')) document.getElementById('display-case-id').innerText = smartId;
                if(document.getElementById('case-id-display')) document.getElementById('case-id-display').style.display = 'block';
                if(e.target) e.target.reset();
                showToast(`Ticket Submitted! ID: ${smartId}`, "success");
                setTimeout(() => {
                    let notifyMsg = `Hi Admin,\n*New Ticket Received.*\n\n*Case ID:* ${smartId}\n*Name:* ${name}\n*Type:* ${type}`;
                    window.open(`https://wa.me/${ADMIN_PHONE_NO}?text=${encodeURIComponent(notifyMsg)}`, '_blank');
                }, 1000);
            } catch (error) {
                console.error(error); showToast("Failed to submit ticket. Try again.", "error");
            } finally {
                if(btn) { btn.disabled = false; btn.innerText = 'Submit Ticket'; }
            }
        }

        function copyTicketId() {
            const idText = document.getElementById('display-case-id').innerText;
            navigator.clipboard.writeText(idText).then(() => showToast("ID copied to clipboard!", "success")).catch(err => showToast("Failed to copy", "error"));
        }

        function fetchTicketHistory() {
            if(!db) return;
            const caseId = document.getElementById('history-search-id') ? document.getElementById('history-search-id').value.trim() : '';
            if(!caseId) return showToast("Please enter a Case ID.", "error");
            const listContainer = document.getElementById('ticket-list');
            if(listContainer) listContainer.innerHTML = '<div style="text-align:center; color: var(--text-tertiary);">Searching...</div>';
            db.collection("tickets").where("ticketId", "==", caseId).get()
                .then((snapshot) => {
                    if(listContainer) listContainer.innerHTML = ''; 
                    if (snapshot.empty) { 
                        if(listContainer) listContainer.innerHTML = '<div style="text-align:center; color: #ef4444; padding: 1rem;">No ticket found with that Case ID.</div>'; 
                        return; 
                    }
                    snapshot.forEach((doc) => {
                        const data = doc.data();
                        const item = document.createElement('div');
                        item.className = 'glass-card'; 
                        if(item.style) {
                            item.style.padding = '1rem'; 
                            item.style.marginBottom = '0'; 
                            item.style.display = 'grid'; 
                            item.style.gridTemplateColumns = '1fr 1fr 1fr'; 
                            item.style.alignItems = 'center';
                        }
                        item.innerHTML = `<div><div style="color:var(--text-main); font-weight:600;">${data.type}</div><div style="font-size:0.75rem; color:var(--text-tertiary);">${data.ticketId}</div></div><div class="ticket-id">${data.ticketId || doc.id}</div><div style="text-align:right;"><span style="background="${data.status==='Open'?'#fffbeb':'#ecfdf5'}; color="${data.status==='Open'?'var(--accent-warn)':'var(--accent-success)'}; padding:2px 8px; border-radius:4px; font-size:0.75rem; font-weight:700;">${data.status}</span></div></div>`;
                        if(listContainer) listContainer.appendChild(item);
                    });
                });
        }

        // ==========================================
        // REQUEST & UPDATES LOGIC
        // ==========================================
        function handleUpdateTypeChange(type, element) {
            // This function handles old HTML's logic for Updates page dynamic fields
            const options = element.parentElement.querySelectorAll('.radio-option');
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            const input = element.querySelector('input');
            if(input) input.checked = true;
            
            // Hide all field groups
            ['field-content', 'field-upgrade', 'field-renew', 'field-remove'].forEach(id => {
                const el = document.getElementById(id);
                if(el) el.classList.add('hidden');
            });
            
            // Show selected
            const targetId = `field-${type}`;
            const targetEl = document.getElementById(targetId);
            if(targetEl) targetEl.classList.remove('hidden');
        }

        function handleRequestSubmit(e) {
            e.preventDefault();
            if(!db) return showToast("Database offline", "error");
            const btn = document.getElementById('btn-submit-request');
            const originalText = btn ? btn.innerText : 'Submit Request';
            if(btn) { btn.disabled = true; btn.innerHTML = '<i class="ri-loader-4-line ri-spin"></i> Processing...'; }

            const name = document.getElementById('req-name').value;
            const phone = document.getElementById('req-phone').value;
            const typeInput = document.querySelector('input[name="req_type"]:checked');
            if(!typeInput) { showToast("Please select a request type.", "error"); if(btn) { btn.disabled = false; btn.innerText = originalText; return; } }
            const type = typeInput.value;

            let requestData = { name: name, phone: phone, type: type, status: 'Pending', timestamp: firebase.firestore.FieldValue.serverTimestamp(), userId: auth.currentUser ? auth.currentUser.uid : null };

            try {
                if (type === 'content') { requestData.details = document.getElementById('req-desc-content').value; } 
                else if (type === 'upgrade') {
                    requestData.currentPlan = document.getElementById('req-current-plan').value;
                    requestData.newPlan = document.getElementById('req-new-plan').value;
                    requestData.details = document.getElementById('req-desc-upgrade').value;
                } else if (type === 'renew') {
                    requestData.plan = document.getElementById('req-renew-plan').value;
                    requestData.duration = "1 Year"; 
                } else if (type === 'remove') { requestData.details = document.getElementById('req-desc-remove').value; }

                db.collection("customer_requests").add(requestData)
                    .then(() => {
                        showToast("Request Submitted Successfully!", "success");
                        if(e.target) e.target.reset();
                        let waMsg = `Hi Admin,\n*New Customer Request*\n\n*Name:* ${name}\n*Phone:* ${phone}\n*Type:* ${type}`;
                        if(requestData.details) waMsg += `\n*Details:* ${requestData.details}`;
                        setTimeout(() => { window.open(`https://wa.me/${ADMIN_PHONE_NO}?text=${encodeURIComponent(waMsg)}`, '_blank'); }, 1000);
                    })
                    .catch((err) => { console.error(err); showToast("Error submitting request.", "error"); });
            } catch (error) { console.error(error); showToast("Invalid form data.", "error"); } 
            finally { if(btn) { btn.disabled = false; btn.innerText = originalText; } }
        }

        // ==========================================
        // WEBSITE IDEA SUBMISSION
        // ==========================================
        function handleWebsiteIdeaSubmit(event) {
            event.preventDefault(); 
            
            const form = document.getElementById('website-idea-form');
            if(!form) return;
            const name = document.getElementById('idea-name').value;
            const phone = document.getElementById('idea-phone').value;
            const email = document.getElementById('idea-email').value;
            const company = document.getElementById('idea-company').value;
            const source = document.getElementById('idea-source').value;
            const type = document.getElementById('idea-type').value;
            const message = document.getElementById('idea-message').value;
            const references = document.getElementById('idea-references').value;

            if(!name || !phone || !email || !message) return showToast("Please fill in Name, Phone, Email and Description.", "error");

            const btn = document.getElementById('btn-submit-idea');
            const originalText = btn ? btn.innerText : 'Submit Idea';
            if(btn) {
                btn.disabled = true;
                btn.innerHTML = '<i class="ri-loader-4-line ri-spin"></i> Saving...';
            }

            const requestData = {
                name: name, phone: phone, email: email, company: company || '', source: source || '',
                type: type || 'New Website', details: message, references: references || '', status: 'Pending',
                timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                userId: auth.currentUser ? auth.currentUser.uid : null, source: 'Website Description Form'
            };

            if(db) {
                db.collection("customer_requests").add(requestData)
                    .then(() => {
                        const successModal = document.getElementById('idea-success-modal');
                        if(successModal) {
                            successModal.style.display = 'flex';
                            requestAnimationFrame(() => { successModal.classList.add('active'); });
                        }
                        if(form) form.reset();
                    })
                    .catch((error) => {
                        console.error("Firebase Save Error:", error);
                        showToast("Failed to save idea. Please try again.", "error");
                    })
                    .finally(() => {
                        if(btn) {
                            btn.disabled = false;
                            btn.innerText = originalText;
                        }
                    });
            } else {
                showToast("Database connection error.", "error");
                if(btn) {
                    btn.disabled = false;
                    btn.innerText = originalText;
                }
            }
        }

        function closeIdeaSuccessModal() {
            const modal = document.getElementById('idea-success-modal');
            if(modal) {
                modal.classList.remove('active');
                setTimeout(() => { modal.style.display = 'none'; navigateTo('/'); }, 300);
            }
        }

        function handleContactSubmit(e) {
            e.preventDefault();
            const name = document.getElementById('contact-name') ? document.getElementById('contact-name').value : '';
            const email = document.getElementById('contact-email') ? document.getElementById('contact-email').value : '';
            const message = document.getElementById('contact-message') ? document.getElementById('contact-message').value : '';
            if(!name || !email || !message) return showToast("Please fill in all fields.", "error");

            const btn = e.target ? e.target.querySelector('button') : null;
            const originalText = btn ? btn.innerText : 'Send Message';
            if(btn) {
                btn.disabled = true;
                btn.innerHTML = '<i class="ri-loader-4-line ri-spin"></i> Sending...';
            }

            const data = {
                name: name, email: email, message: message, type: 'Contact Inquiry', status: 'Pending',
                timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                userId: auth.currentUser ? auth.currentUser.uid : null, source: 'Contact Page Form'
            };

            if(db) {
                db.collection("customer_requests").add(data)
                    .then(() => {
                        showToast("Thank you for your interest!", "success");
                        if(e.target) e.target.reset();
                    })
                    .catch((error) => {
                        console.error(error);
                        showToast("Failed to send message. Please try again.", "error");
                    })
                    .finally(() => {
                        if(btn) {
                            btn.disabled = false;
                            btn.innerText = originalText;
                        }
                    });
            } else {
                showToast("System offline. Please try again later.", "error");
                if(btn) {
                    btn.disabled = false;
                    btn.innerText = originalText;
                }
            }
        }

        // ==========================================
        // REVIEWS LOGIC (IMPROVED VISUALS)
        // ==========================================
        function setupStarRating() {
            const container = document.getElementById('star-input-container');
            if(!container) return;
            const stars = container.querySelectorAll('.star-icon');
            const hiddenInput = document.getElementById('rating-value');

            stars.forEach(star => {
                star.addEventListener('mouseover', function() {
                    highlightStars(parseInt(this.getAttribute('data-val')));
                });
                
                star.addEventListener('click', function() {
                    selectedRating = parseInt(this.getAttribute('data-val'));
                    if(hiddenInput) hiddenInput.value = selectedRating;
                    highlightStars(selectedRating);
                    if(document.getElementById('rating-error')) document.getElementById('rating-error').style.display = 'none';
                });
            });

            container.addEventListener('mouseleave', function() {
                highlightStars(selectedRating);
            });
        }

        function highlightStars(count) {
            const container = document.getElementById('star-input-container');
            if(!container) return;
            const stars = container.querySelectorAll('.star-icon');
            stars.forEach(star => {
                star.classList.toggle('selected', parseInt(star.getAttribute('data-val')) <= count);
            });
        }

        function listenToReviews() {
            if(!db) return;
            db.collection("customer_reviews").orderBy("timestamp", "desc").limit(20)
                .onSnapshot((snapshot) => {
                    reviewsCache = []; 
                    snapshot.forEach(doc => reviewsCache.push(doc.data()));
                    // Trigger re-render if on reviews page
                    const reviewsList = document.getElementById('reviews-list');
                    if(reviewsList && !reviewsList.querySelector('.text-center')) {
                        // Only re-render if we aren't showing the initial "Loading..." state to avoid jumpiness
                        renderReviewsList(reviewsList, reviewsCache);
                    }
                }, (error) => console.error("Error syncing reviews:", error));
        }

        function renderReviewsList(container, reviews) {
            // Combine Dummy + DB Reviews
            let allReviews = [...DUMMY_REVIEWS, ...reviews];
            
            if (allReviews.length === 0) {
                container.innerHTML = '<div class="col-span-3 text-center py-8 text-slate-500">No reviews yet.</div>';
                return;
            }

            // If button says "View All", we show all. If collapsed, we show only first 3.
            const isExpanded = container.classList.contains('expanded');
            const displayList = isExpanded ? allReviews : allReviews.slice(0, 3);

            container.innerHTML = '';
            
            displayList.forEach(data => {
                const date = data.timestamp ? new Date(data.timestamp.seconds * 1000).toLocaleDateString() : 'Recently';
                const initials = (data.userName || 'User').substring(0, 2).toUpperCase();
                let starsHtml = '';
                for(let i=1; i<=5; i++) starsHtml += `<i class="${i <= data.rating ? 'ri-star-fill' : 'ri-star-line'}" style="color="${i<=data.rating?'var(--star)':'#cbd5e1'}"></i>`;
                
                // Box Style HTML
                const html = `
                    <div class="review-card glass rounded-2xl p-6 border border-slate-200 bg-white hover-lift">
                        <div class="review-header">
                            <div class="review-avatar">${initials}</div>
                            <div class="review-info"><h4>${data.userName || 'Anonymous'}</h4><div class="review-date">${date}</div></div>
                        </div>
                        <div class="review-stars">${starsHtml}</div>
                        <p class="review-text">"${data.comment}"</p>
                    </div>`;
                container.innerHTML += html;
            });
        }

        const DUMMY_REVIEWS = [
            { rating: 5, userName: 'PNE Arena Enterprise', comment: 'Excellent service! The team was very professional and delivery was faster than expected.', timestamp: null },
            { rating: 5, userName: 'Danial Danish (Owner)', comment: 'I built this site to help businesses grow. Let me know what you think!', timestamp: null }
        ];

        function toggleFullReviews() {
            const list = document.getElementById('reviews-list');
            const btn = event.target;
            if(!list) return;
            
            // Toggle expanded class on container to manage state
            list.classList.toggle('expanded');
            
            if (list.classList.contains('expanded')) {
                renderReviewsList(list, reviewsCache); // Render full list
                if(btn) btn.innerText = "Show Less";
            } else {
                renderReviewsList(list, reviewsCache); // Render partial list
                if(btn) btn.innerText = "View All Reviews";
            }
        }

        function handleReviewSubmit(e) {
            e.preventDefault();
            if(!auth || !auth.currentUser) return showToast("Login Required", "You must be logged in to submit a review.", "warning");

            if(selectedRating === 0) return showToast("Rating Missing", "Please select a star rating.", "warning");

            const comment = document.getElementById('review-comment') ? document.getElementById('review-comment').value : '';
            const user = auth.currentUser;
            let displayName = user.email.split('@')[0];
            
            db.collection("users").doc(user.uid).get().then(doc => {
                if(doc.exists && doc.data().name) displayName = doc.data().name;
                const reviewData = { 
                    userId: user.uid, userName: displayName, userEmail: user.email, rating: selectedRating, comment: comment, 
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(), status: 'approved' 
                };
                return db.collection("customer_reviews").add(reviewData);
            }).then(() => {
                showToast("Review submitted successfully!", "success");
                if(document.getElementById('review-form')) document.getElementById('review-form').reset();
                selectedRating = 0;
                highlightStars(0);
                // Refresh list if open
                if(document.getElementById('reviews-list') && !document.getElementById('reviews-list').classList.contains('hidden')) {
                    toggleFullReviews(); 
                }
            }).catch(err => {
                console.error(err); 
                showToast("Failed to submit review.", "error");
            });
        }

        // ==========================================
        // PORTFOLIO LOGIC
        // ==========================================
        function loadHomePortfolio() {
            if(!db) return;
            const container = document.getElementById('home-portfolio-grid');
            if(!container) return;
            
            db.collection("clients_portfolio").where("status", "==", true).limit(2).get()
                .then((snapshot) => {
                    // Ensure dummy item stays, only append from DB
                    if(!snapshot.empty) {
                        snapshot.forEach((doc) => {
                            const data = doc.data();
                            const html = `
                                <div class="portfolio-item group glass rounded-2xl overflow-hidden border border-slate-200 bg-white hover-lift">
                                    <div class="h-56 overflow-hidden bg-slate-200 relative"><img src="${data.img}" alt="${data.name}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"></div>
                                    <div class="p-6">
                                        <h4 class="font-bold text-slate-900 mb-2">${data.name}</h4>
                                        <p class="text-slate-600 text-sm mb-4">${data.desc || 'View project'}</p>
                                        <a href="${data.link}" target="_blank" class="text-indigo-600 font-medium text-sm hover:underline">View Live Site &rarr;</a>
                                    </div>
                                </div>`;
                            container.innerHTML += html;
                        });
                    }
                });
        }

        function loadPortfolio() {
            if(!db) return;
            const grid = document.getElementById('portfolio-grid');
            if(!grid) return;
            
            db.collection("clients_portfolio").where("status", "==", true).get()
                .then((snapshot) => {
                    grid.innerHTML = '';
                    if(snapshot.empty) { grid.innerHTML = '<div class="col-span-3 text-center py-8 text-slate-500">No projects yet</div>'; return; }
                    
                    snapshot.forEach((doc) => {
                        const data = doc.data();
                        grid.innerHTML += `
                            <div class="group glass rounded-2xl overflow-hidden border border-slate-200 bg-white hover-lift">
                                <div class="h-56 overflow-hidden"><img src="${data.img}" alt="${data.name}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"></div>
                                <div class="p-6">
                                    <h4 class="font-bold text-slate-900 mb-2 text-lg">${data.name}</h4>
                                    <p class="text-slate-600 text-sm mb-4">${data.desc || 'Professional website solution'}</p>
                                    <a href="${data.link}" target="_blank" class="inline-flex items-center px-4 py-2 rounded-lg bg-slate-100 text-slate-700 font-medium text-sm hover:bg-slate-200 transition-colors">View Project</a>
                                </div>
                            </div>
                        `;
                    });
                });
        }

        // ==========================================
        // MAP & GLOBE (INIT)
        // ==========================================
        document.addEventListener('DOMContentLoaded', () => {
            setupStarRating();
            loadHomePortfolio();
            listenToReviews();
            initMap(); // Initialize map from new HTML
        });

        window.addEventListener('scroll', () => {
            const nav = document.getElementById('navbar');
            if(nav) {
                if(window.scrollY > 50) nav.classList.add('shadow-lg');
                else nav.classList.remove('shadow-lg');
            }
        });

        // ==========================================
        // INIT MAP FUNCTION
        // ==========================================
        function initMap() {
            const mapContainer = document.getElementById('map');
            if (typeof L === 'undefined' || !mapContainer) {
                console.warn("Leaflet or Map container not found.");
                return;
            }

            // Create map instance centered on Malaysia
            const map = L.map('map').setView([4.2105, 101.9758], 6); 

            // Add OpenStreetMap tiles
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; OpenStreetMap contributors'
            }).addTo(map);

            // Sample Data for "Global Clients"
            const clients = [
                { name: "KL Tech Hub", location: [3.1390, 101.6869], desc: "E-commerce Platform", link: "#" },
                { name: "Penang Digital", location: [5.4141, 100.3288], desc: "Corporate Site", link: "#" },
                { name: "Johor SME", location: [1.4927, 103.7414], desc: "Landing Page", link: "#" },
                { name: "Singapore Partner", location: [1.3521, 103.8198], desc: "Regional Portal", link: "#" },
                { name: "Bali Resort", location: [-8.4095, 115.1889], desc: "Hotel Booking", link: "#" },
                { name: "Jakarta Startup", location: [-6.2088, 106.8456], desc: "Fintech App", link: "#" },
                { name: "Tokyo Client", location: [35.6762, 139.6503], desc: "Consultancy", link: "#" }
            ];

            // Custom Icon (Green Pin)
            const pinIcon = L.divIcon({
                className: 'custom-marker',
                html: '<div class="pulse-ring"></div><div class="marker-pin"></div>',
                iconSize: [36, 36],
                iconAnchor: [18, 36]
            });

            // Add markers to map
            clients.forEach(client => {
                const marker = L.marker(client.location, { icon: pinIcon }).addTo(map);
                
                // Popup content
                const popupContent = `
                    <div class="popup-content">
                        <div class="popup-title">${client.name}</div>
                        <div class="popup-stats">${client.desc}</div>
                        <a href="${client.link}" target="_blank" class="popup-link">Visit Site</a>
                    </div>
                `;
                
                marker.bindPopup(popupContent);
            });
        }

        // ==========================================
        // GLOBE ANIMATION (HOME DECORATION)
        // ==========================================
        // Simple implementation to prevent errors if canvas exists
        const canvas = document.getElementById('globe-canvas');
        if (canvas) {
            // Placeholder logic or 3D library integration would go here
            // Leaving empty to keep file single and lightweight as requested
        }

    </script>

    <!-- UPDATED CHAT WIDGET SCRIPT -->
    <script src="https://app.livechatai.com/embed.js" data-id="cmlas1njr0001jj04hi5ygd18" async defer></script>
</body>
</html>
